/*!For license information please see _app-991ce0dc4ef2d4c0.js.LICENSE.txt*/(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{8375:function(t,e,n){"use strict";const r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=u,e.h2=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=a(n);const i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const i=function(t){if(u.isBuffer(t)){const e=0|d(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||W(t.length)?a(0):p(t);if("Buffer"===t.type&&Array.isArray(t.data))return p(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),a(t<0?0:0|d(t))}function p(t){const e=t.length<0?0:0|d(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function d(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(i)return r?-1:Y(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){let o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){let n=!0;for(let r=0;r<u;r++)if(c(t,o+r)!==c(e,r)){n=!1;break}if(n)return o}return-1}function b(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(W(r))return s;t[n+s]=r}return s}function w(t,e,n,r){return H(Y(e,t.length-n),t,n,r)}function E(t,e,n,r){return H(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return H(Z(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128==(192&n)&&(u=(31&e)<<6|63&n,u>127&&(o=u));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(X(e,Uint8Array))i+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n);for(let t=0;t<a;++t)if(c[t]!==l[t]){o=c[t],s=l[t];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function T(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=K[t[r]];return i}function R(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,i){$(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function M(t,e,n,r,i){$(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function k(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Q((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Q((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Q((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Q((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Q((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Q((function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Q((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Q((function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=u.isBuffer(t)?t:u.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const B={};function q(t,e,n){B[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function U(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function $(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||G(e,t.length-(n+1))}(r,i,o)}function z(t,e){if("number"!=typeof t)throw new B.ERR_INVALID_ARG_TYPE(e,"number",t)}function G(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function Y(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function W(t){return t!=t}const K=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?J:t}function J(){throw new Error("BigInt not supported")}},93649:function(t){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",u="week",c="month",l="quarter",h="year",p="date",f="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},_={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),o=n-i<0,s=e.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:u,d:a,D:p,h:s,m:o,s:i,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",b={};b[v]=y;var w="$isDayjsObject",E=function(t){return t instanceof C||!(!t||!t[w])},x=function t(e,n,r){var i;if(!e)return v;if("string"==typeof e){var o=e.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var s=e.split("-");if(!i&&s.length>1)return t(s[0])}else{var a=e.name;b[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},S=function(t,e){if(E(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new C(n)},I=_;I.l=x,I.i=E,I.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var C=function(){function y(t){this.$L=x(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[w]=!0}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(I.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return I},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return S(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<S(t)},m.$g=function(t,e,n){return I.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!I.u(e)||e,l=I.p(t),f=function(t,e){var i=I.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},d=function(t,e){return I.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,y=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(l){case h:return r?f(1,0):f(31,11);case c:return r?f(1,y):f(0,y+1);case u:var v=this.$locale().weekStart||0,b=(g<v?g+7:g)-v;return f(r?m-b:m+(6-b),y);case a:case p:return d(_+"Hours",0);case s:return d(_+"Minutes",1);case o:return d(_+"Seconds",2);case i:return d(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,u=I.p(t),l="set"+(this.$u?"UTC":""),f=(n={},n[a]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[h]=l+"FullYear",n[s]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],d=u===a?this.$D+(e-this.$W):e;if(u===c||u===h){var g=this.clone().set(p,1);g.$d[f](d),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](d);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[I.p(t)]()},m.add=function(r,l){var p,f=this;r=Number(r);var d=I.p(l),g=function(t){var e=S(f);return I.w(e.date(e.date()+Math.round(t*r)),f)};if(d===c)return this.set(c,this.$M+r);if(d===h)return this.set(h,this.$y+r);if(d===a)return g(1);if(d===u)return g(7);var y=(p={},p[o]=e,p[s]=n,p[i]=t,p)[d]||1,m=this.$d.getTime()+r*y;return I.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),o=this.$H,s=this.$m,a=this.$M,u=n.weekdays,c=n.months,l=n.meridiem,h=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},p=function(t){return I.s(o%12||12,t,"0")},d=l||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return I.s(e.$y,4,"0");case"M":return a+1;case"MM":return I.s(a+1,2,"0");case"MMM":return h(n.monthsShort,a,c,3);case"MMMM":return h(c,a);case"D":return e.$D;case"DD":return I.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,u,2);case"ddd":return h(n.weekdaysShort,e.$W,u,3);case"dddd":return u[e.$W];case"H":return String(o);case"HH":return I.s(o,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return d(o,s,!0);case"A":return d(o,s,!1);case"m":return String(s);case"mm":return I.s(s,2,"0");case"s":return String(e.$s);case"ss":return I.s(e.$s,2,"0");case"SSS":return I.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,f){var d,g=this,y=I.p(p),m=S(r),_=(m.utcOffset()-this.utcOffset())*e,v=this-m,b=function(){return I.m(g,m)};switch(y){case h:d=b()/12;break;case c:d=b();break;case l:d=b()/3;break;case u:d=(v-_)/6048e5;break;case a:d=(v-_)/864e5;break;case s:d=v/n;break;case o:d=v/e;break;case i:d=v/t;break;default:d=v}return f?d:I.a(d)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=x(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return I.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),O=C.prototype;return S.prototype=O,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",p]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,C,S),t.$i=!0),S},S.locale=x,S.isDayjs=E,S.unix=function(t){return S(1e3*t)},S.en=b[v],S.Ls=b,S.p={},S}()},31548:function(t){t.exports=function(){"use strict";var t,e,n=1e3,r=6e4,i=36e5,o=864e5,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=31536e6,u=2628e6,c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:a,months:u,days:o,hours:i,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},h=function(t){return t instanceof _},p=function(t,e,n){return new _(t,n,e.$l)},f=function(t){return e.p(t)+"s"},d=function(t){return t<0},g=function(t){return d(t)?Math.ceil(t):Math.floor(t)},y=function(t){return Math.abs(t)},m=function(t,e){return t?d(t)?{negative:!0,format:""+y(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},_=function(){function d(t,e,n){var r=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return p(t*l[f(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[f(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var i=t.match(c);if(i){var o=i.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var y=d.prototype;return y.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,n){return e+(t.$d[n]||0)*l[n]}),0)},y.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=g(t/a),t%=a,this.$d.months=g(t/u),t%=u,this.$d.days=g(t/o),t%=o,this.$d.hours=g(t/i),t%=i,this.$d.minutes=g(t/r),t%=r,this.$d.seconds=g(t/n),t%=n,this.$d.milliseconds=t},y.toISOString=function(){var t=m(this.$d.years,"Y"),e=m(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=m(n,"D"),i=m(this.$d.hours,"H"),o=m(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3,s=Math.round(1e3*s)/1e3);var a=m(s,"S"),u=t.negative||e.negative||r.negative||i.negative||o.negative||a.negative,c=i.format||o.format||a.format?"T":"",l=(u?"-":"")+"P"+t.format+e.format+r.format+c+i.format+o.format+a.format;return"P"===l||"-P"===l?"P0D":l},y.toJSON=function(){return this.toISOString()},y.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(s,(function(t,e){return e||String(r[t])}))},y.as=function(t){return this.$ms/l[f(t)]},y.get=function(t){var e=this.$ms,n=f(t);return"milliseconds"===n?e%=1e3:e="weeks"===n?g(e/l[n]):this.$d[n],e||0},y.add=function(t,e,n){var r;return r=e?t*l[f(e)]:h(t)?t.$ms:p(t,this).$ms,p(this.$ms+r*(n?-1:1),this)},y.subtract=function(t,e){return this.add(t,e,!0)},y.locale=function(t){var e=this.clone();return e.$l=t,e},y.clone=function(){return p(this.$ms,this)},y.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},y.valueOf=function(){return this.asMilliseconds()},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},d}(),v=function(t,e,n){return t.add(e.years()*n,"y").add(e.months()*n,"M").add(e.days()*n,"d").add(e.hours()*n,"h").add(e.minutes()*n,"m").add(e.seconds()*n,"s").add(e.milliseconds()*n,"ms")};return function(n,r,i){t=i,e=i().$utils(),i.duration=function(t,e){var n=i.locale();return p(t,{$l:n},e)},i.isDuration=h;var o=r.prototype.add,s=r.prototype.subtract;r.prototype.add=function(t,e){return h(t)?v(this,t,1):o.bind(this)(t,e)},r.prototype.subtract=function(t,e){return h(t)?v(this,t,-1):s.bind(this)(t,e)}}}()},9705:function(t,e,n){"use strict";var r=n(31540);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},84102:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},31540:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);function i(t,e,n){if(null!==t)for(var r,o,s,a,u,c,l,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,m=g?t.features.length:1,_=0;_<m;_++){u=(h=!!(l=g?t.features[_].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<u;v++){var b=0,w=0;if(null!==(a=h?l.geometries[v]:l)){c=a.coordinates;var E=a.type;switch(p=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(c,f,_,b,w))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],f,_,b,w))return!1;f++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++){if(!1===e(c[r][o],f,_,b,w))return!1;f++}"MultiLineString"===E&&b++,"Polygon"===E&&w++}"Polygon"===E&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(w=0,o=0;o<c[r].length;o++){for(s=0;s<c[r][o].length-p;s++){if(!1===e(c[r][o][s],f,_,b,w))return!1;f++}w++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,r,i,o,s,a,u,c,l,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},l=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,h))return!1;p++}}function u(t,e){a(t,(function(t,n,i,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:a,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,i),n,c))return!1}}))}function c(t,e){u(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,c=0,l=0,h=0;return!1!==i(t,(function(i,a,p,f,d){if(void 0===u||n>c||f>l||d>h)return u=i,c=n,l=f,h=d,void(s=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,u=i}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(r.lineString(s[a],t.properties),n,i,a))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o},e.featureEach=s,e.featureReduce=function(t,e,n){var r=n;return s(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],u,e);case"LineString":return a<0&&(a=c.length+a),r.point(c[a],u,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a),r.point(c[s][a],u,e);case"MultiLineString":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),r.point(c[o][a],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),a<0&&(a=c[o][s].length-a),r.point(c[o][s][a],u,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),r.lineString([c[a],c[a+1]],u,e);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a-1),r.lineString([c[s][a],c[s][a+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a-1),r.lineString([c[o][a],c[o][a+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),a<0&&(a=c[o][s].length-a-1),r.lineString([c[o][s][a],c[o][s][a+1]],u,e)}throw new Error("geojson is invalid")},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=a,e.geomReduce=function(t,e,n){var r=n;return a(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}},79742:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],u=o[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,u)),l=0,h=u>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[l++]=255&e);1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,c=r-i;a<c;a+=s)o.push(u(t,a,a+s>c?c:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},21924:function(t,e,n){"use strict";var r=n(40210),i=n(55559),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?i(n):n}},55559:function(t,e,n){"use strict";var r=n(58612),i=n(40210),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||r.call(s,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=a(r,s,arguments);u&&c&&(u(e,"length").configurable&&c(e,"length",{value:1+l(0,t.length-(arguments.length-1))}));return e};var h=function(){return a(r,o,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},2350:function(){},72273:function(t,e,n){"use strict";var r=n(81662),i=n(43842),o=n(26960),s=n(88639).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var u=[e,n,r,i],c=u.slice();for(s=0;s<t.length;s++)o(t[s],u)||c.push(t[s]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&f(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(c)}(t),s=new r(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,c=[],l=0;l<i.length;l++){var h=i[l];s.remove(h),a=g(h,a),c.push(a)}var p=new r(16);for(l=0;l<c.length;l++)p.insert(d(c[l]));for(var m=e*e,_=n*n;c.length;){var b=c.shift(),w=b.p,E=b.next.p,x=y(w,E);if(!(x<_)){var S=x/m;(h=u(s,b.prev.p,w,E,b.next.next.p,S,p))&&Math.min(y(h,w),y(h,E))<=S&&(c.push(b),c.push(g(h,b)),s.remove(h),p.remove(b),p.insert(d(b)),p.insert(d(b.next)))}}b=a;var I=[];do{I.push(b.p),b=b.next}while(b!==a);return I.push(b.p),I}function u(t,e,n,r,o,s,a){for(var u=new i([],c),h=t.data;h;){for(var f=0;f<h.children.length;f++){var d=h.children[f],g=h.leaf?m(d,n,r):l(n,r,d);g>s||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var y=u.pop(),_=y.node,v=m(_,e,n),b=m(_,r,o);if(y.dist<v&&y.dist<b&&p(n,_,a)&&p(r,_,a))return _}(h=u.pop())&&(h=h.node)}return null}function c(t,e){return t.dist-e.dist}function l(t,e,n){if(h(t,n)||h(e,n))return 0;var r=_(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=_(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=_(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=_(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:c,maxY:l}),p=0;p<h.length;p++)if(r=h[p].p,i=h[p].next.p,o=t,r!==(s=e)&&i!==o&&f(r,i,o)>0!=f(r,i,s)>0&&f(o,s,r)>0!=f(o,s,i)>0)return!1;return!0}function f(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function m(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function _(t,e,n,r,i,o,s,a){var u,c,l,h,p=n-t,f=r-e,d=s-i,g=a-o,y=t-i,m=e-o,_=p*p+f*f,v=p*d+f*g,b=d*d+g*g,w=p*y+f*m,E=d*y+g*m,x=_*b-v*v,S=x,I=x;0===x?(c=0,S=1,h=E,I=b):(h=_*E-v*w,(c=v*E-b*w)<0?(c=0,h=E,I=b):c>S&&(c=S,h=E+v,I=b)),h<0?(h=0,-w<0?c=0:-w>_?c=S:(c=-w,S=_)):h>I&&(h=I,-w+v<0?c=0:-w+v>_?c=S:(c=-w+v,S=_));var C=(1-(l=0===h?0:h/I))*i+l*s-((1-(u=0===c?0:c/S))*t+u*n),O=(1-l)*o+l*a-((1-u)*e+u*r);return C*C+O*O}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=a,t.exports.default=a},81662:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=r-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(a-l)/a)*(u-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*l/a+h)),Math.min(o,Math.floor(r+(a-u)*l/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf){var l=i(t,s.children,e);if(-1!==l)return s.children.splice(l,1),u.push(s),this._condense(u),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var u=Math.ceil(s/a),c=u*Math.ceil(Math.sqrt(a));g(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var h=Math.min(l+c-1,n);g(t,l,h,u,this.compareMinY);for(var p=l;p<=h;p+=u){var f=Math.min(p+u-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],c=l(u),h=(p=t,f=u,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,i=c<i?c:i,s=u):h===o&&c<i&&(i=c,s=u)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,u,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),y=s(t,d,n,this.toBBox),m=(i=g,o=y,a=void 0,u=void 0,c=void 0,h=void 0,a=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-a)*Math.max(0,h-u)),_=l(g)+l(y);m<p?(p=m,r=d,f=_<f?_:f):m===p&&_<f&&(f=_,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),u=s(t,n-e,n,i),c=h(o)+h(u),l=e;l<n-e;l++){var p=t.children[l];a(o,t.leaf?i(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(u,t.leaf?i(d):d),c+=h(u)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},27484:function(t){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",u="week",c="month",l="quarter",h="year",p="date",f="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},_={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),o=n-i<0,s=e.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:u,d:a,D:p,h:s,m:o,s:i,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",b={};b[v]=y;var w=function(t){return t instanceof I},E=function t(e,n,r){var i;if(!e)return v;if("string"==typeof e){var o=e.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var s=e.split("-");if(!i&&s.length>1)return t(s[0])}else{var a=e.name;b[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},x=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new I(n)},S=_;S.l=E,S.i=w,S.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var I=function(){function y(t){this.$L=E(t.locale,null,!0),this.parse(t)}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(t,e){var n=x(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return x(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<x(t)},m.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!S.u(e)||e,l=S.p(t),f=function(t,e){var i=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},d=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,y=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(l){case h:return r?f(1,0):f(31,11);case c:return r?f(1,y):f(0,y+1);case u:var v=this.$locale().weekStart||0,b=(g<v?g+7:g)-v;return f(r?m-b:m+(6-b),y);case a:case p:return d(_+"Hours",0);case s:return d(_+"Minutes",1);case o:return d(_+"Seconds",2);case i:return d(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,u=S.p(t),l="set"+(this.$u?"UTC":""),f=(n={},n[a]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[h]=l+"FullYear",n[s]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],d=u===a?this.$D+(e-this.$W):e;if(u===c||u===h){var g=this.clone().set(p,1);g.$d[f](d),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](d);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(r,l){var p,f=this;r=Number(r);var d=S.p(l),g=function(t){var e=x(f);return S.w(e.date(e.date()+Math.round(t*r)),f)};if(d===c)return this.set(c,this.$M+r);if(d===h)return this.set(h,this.$y+r);if(d===a)return g(1);if(d===u)return g(7);var y=(p={},p[o]=e,p[s]=n,p[i]=t,p)[d]||1,m=this.$d.getTime()+r*y;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,s=this.$m,a=this.$M,u=n.weekdays,c=n.months,l=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},h=function(t){return S.s(o%12||12,t,"0")},p=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},d={YY:String(this.$y).slice(-2),YYYY:S.s(this.$y,4,"0"),M:a+1,MM:S.s(a+1,2,"0"),MMM:l(n.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:S.s(o,2,"0"),h:h(1),hh:h(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:S.s(s,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(t,e){return e||d[t]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,f){var d,g=S.p(p),y=x(r),m=(y.utcOffset()-this.utcOffset())*e,_=this-y,v=S.m(this,y);return v=(d={},d[h]=v/12,d[c]=v,d[l]=v/3,d[u]=(_-m)/6048e5,d[a]=(_-m)/864e5,d[s]=_/n,d[o]=_/e,d[i]=_/t,d)[g]||_,f?v:S.a(v)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=E(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),C=I.prototype;return x.prototype=C,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",p]].forEach((function(t){C[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,I,x),t.$i=!0),x},x.locale=E,x.isDayjs=w,x.unix=function(t){return x(1e3*t)},x.en=b[v],x.Ls=b,x.p={},x}()},96023:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),r={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")}};return n.default.locale(r,null,!0),r}(n(27484))},29387:function(t){t.exports=function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,r,i){var o,s=function(t,n,r){void 0===r&&(r={});var i=new Date(t),o=function(t,n){void 0===n&&(n={});var r=n.timeZoneName||"short",i=t+"|"+r,o=e[i];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),e[i]=o),o}(n,r);return o.formatToParts(i)},a=function(e,n){for(var r=s(e,n),o=[],a=0;a<r.length;a+=1){var u=r[a],c=u.type,l=u.value,h=t[c];h>=0&&(o[h]=parseInt(l,10))}var p=o[3],f=24===p?0:p,d=o[0]+"-"+o[1]+"-"+o[2]+" "+f+":"+o[4]+":"+o[5]+":000",g=+e;return(i.utc(d).valueOf()-(g-=g%1e3))/6e4},u=r.prototype;u.tz=function(t,e){void 0===t&&(t=o);var n=this.utcOffset(),r=this.toDate(),s=r.toLocaleString("en-US",{timeZone:t}),a=Math.round((r-new Date(s))/1e3/60),u=i(s).$set("millisecond",this.$ms).utcOffset(15*-Math.round(r.getTimezoneOffset()/15)-a,!0);if(e){var c=u.utcOffset();u=u.add(n-c,"minute")}return u.$x.$timezone=t,u},u.offsetName=function(t){var e=this.$x.$timezone||i.tz.guess(),n=s(this.valueOf(),e,{timeZoneName:t}).find((function(t){return"timezonename"===t.type.toLowerCase()}));return n&&n.value};var c=u.startOf;u.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return c.call(this,t,e);var n=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(n,t,e).tz(this.$x.$timezone,!0)},i.tz=function(t,e,n){var r=n&&e,s=n||e||o,u=a(+i(),s);if("string"!=typeof t)return i(t).tz(s);var c=function(t,e,n){var r=t-60*e*1e3,i=a(r,n);if(e===i)return[r,e];var o=a(r-=60*(i-e)*1e3,n);return i===o?[r,i]:[t-60*Math.min(i,o)*1e3,Math.max(i,o)]}(i.utc(t,r).valueOf(),u,s),l=c[0],h=c[1],p=i(l).utcOffset(h);return p.$x.$timezone=s,p},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(t){o=t}}}()},70178:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var s=i.prototype;o.utc=function(t){return new i({date:t,utc:!0,args:arguments})},s.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var u=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var c=s.utcOffset;s.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],s=60*+i[1]+ +i[2];return 0===s?0:"+"===o?s:-s}(r),null===r))return this;var s=Math.abs(r)<=16?60*r:r,a=this;if(i)return a.$offset=s,a.$u=0===r,a;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(s+u,t)).$offset=s,a.$x.$localOffset=u}else a=this.utc();return a};var l=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var h=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=s.diff;s.diff=function(t,e,n){if(t&&this.$u===t.$u)return p.call(this,t,e,n);var r=this.local(),i=o(t).local();return p.call(r,i,e,n)}}}()},10251:function(t,e,n){var r=n(82215),i=n(82584),o=n(20609),s=n(98420),a=n(46068),u=n(18923),c=Date.prototype.getTime;function l(t,e,n){var f=n||{};return!!(f.strict?o(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?f.strict?o(t,e):t==e:function(t,e,n){var o,f;if(typeof t!=typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=s(t),g=s(e);if(d!==g)return!1;if(d||g)return t.source===e.source&&a(t)===a(e);if(u(t)&&u(e))return c.call(t)===c.call(e);var y=p(t),m=p(e);if(y!==m)return!1;if(y||m){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!=typeof e)return!1;try{var _=r(t),v=r(e)}catch(t){return!1}if(_.length!==v.length)return!1;for(_.sort(),v.sort(),o=_.length-1;o>=0;o--)if(_[o]!=v[o])return!1;for(o=_.length-1;o>=0;o--)if(!l(t[f=_[o]],e[f],n))return!1;return!0}(t,e,f))}function h(t){return null==t}function p(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=l},96005:function(t,e,n){"use strict";var r=n(58052),i=Object,o=TypeError;t.exports=r((function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},46068:function(t,e,n){"use strict";var r=n(4289),i=n(55559),o=n(96005),s=n(11706),a=n(33072),u=i(s());r(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},11706:function(t,e,n){"use strict";var r=n(96005),i=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},33072:function(t,e,n){"use strict";var r=n(4289).supportsDescriptors,i=n(11706),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,u=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!r||!u)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=u(c),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},9996:function(t){"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?u((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function i(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function s(t,e){try{return e in t}catch(t){return!1}}function a(t,e,n){var i={};return n.isMergeableObject(t)&&o(t).forEach((function(e){i[e]=r(t[e],n)})),o(e).forEach((function(o){(function(t,e){return s(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(s(t,o)&&n.isMergeableObject(e[o])?i[o]=function(t,e){if(!e.customMerge)return u;var n=e.customMerge(t);return"function"==typeof n?n:u}(o,n)(t[o],e[o],n):i[o]=r(e[o],n))})),i}function u(t,n,o){(o=o||{}).arrayMerge=o.arrayMerge||i,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=r;var s=Array.isArray(n);return s===Array.isArray(t)?s?o.arrayMerge(t,n,o):a(t,n,o):r(n,o)}u.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return u(t,n,e)}),{})};var c=u;t.exports=c},12296:function(t,e,n){"use strict";var r=n(31044)(),i=n(76308),o=r&&i("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch(t){o=!1}var s=i("%SyntaxError%"),a=i("%TypeError%"),u=n(27296);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new a("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],h=!!u&&u(t,e);if(o)o(t,e,{configurable:null===c&&h?h.configurable:!c,enumerable:null===r&&h?h.enumerable:!r,value:n,writable:null===i&&h?h.writable:!i});else{if(!l&&(r||i||c))throw new s("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},24087:function(t){"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n};t.exports=function(t){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n}(arguments,1),a=n(0,i.length-s.length),u=[],c=0;c<a;c++)u[c]="$"+c;if(o=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(t,r(s,arguments))})),i.prototype){var l=function(){};l.prototype=i.prototype,o.prototype=new l,l.prototype=null}return o}},49788:function(t,e,n){"use strict";var r=n(24087);t.exports=Function.prototype.bind||r},76308:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var c=function(){throw new s},l=u?function(){try{return c}catch(t){try{return u(arguments,"callee").get}catch(t){return c}}}():c,h=n(41405)(),p=n(28185)(),f=Object.getPrototypeOf||(p?function(t){return t.__proto__}:null),d={},g="undefined"!=typeof Uint8Array&&f?f(Uint8Array):r,y={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&f?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&f?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h&&f?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h&&f?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&f?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(f)try{null.error}catch(t){var m=f(f(t));y["%Error.prototype%"]=m}var _=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&f&&(n=f(i.prototype))}return y[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(49788),w=n(48824),E=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),I=b.call(Function.call,String.prototype.slice),C=b.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,P=function(t,e){var n,r=t;if(w(v,r)&&(r="%"+(n=v[r])[0]+"%"),w(y,r)){var o=y[r];if(o===d&&(o=_(r)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=I(t,0,1),n=I(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(t,O,(function(t,e,n,i){r[r.length]=n?S(i,T,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=P("%"+r+"%",e),a=o.name,c=o.value,l=!1,h=o.alias;h&&(r=h[0],x(n,E([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var d=n[p],g=I(d,0,1),m=I(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&f||(l=!0),w(y,a="%"+(r+="."+d)+"%"))c=y[a];else if(null!=c){if(!(d in c)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&p+1>=n.length){var _=u(c,d);c=(f=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:c[d]}else f=w(c,d),c=c[d];f&&!l&&(y[a]=c)}}return c}},4289:function(t,e,n){"use strict";var r=n(82215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=n(31044)(),c=a&&u,l=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;c?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],n[o[a]])};h.supportsDescriptors=!!c,t.exports=h},68317:function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},63781:function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},73763:function(t,e,n){if(t.exports)var r=n(57985);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new r(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},57985:function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},52606:function(t,e,n){t.exports&&(t.exports={DBSCAN:n(68317),KMEANS:n(63781),OPTICS:n(73763),PriorityQueue:n(57985)})},9187:function(t){"use strict";function e(t,e,r){r=r||2;var o,s,a,u,h,p,d,g=e&&e.length,y=g?e[0]*r:t.length,m=n(t,0,y,r,!0),_=[];if(!m||m.next===m.prev)return _;if(g&&(m=function(t,e,r,i){var o,s,a,u=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),u.push(f(a));for(u.sort(c),o=0;o<u.length;o++)r=l(u[o],r);return r}(t,e,m,r)),t.length>80*r){o=a=t[0],s=u=t[1];for(var v=r;v<y;v+=r)(h=t[v])<o&&(o=h),(p=t[v+1])<s&&(s=p),h>a&&(a=h),p>u&&(u=p);d=0!==(d=Math.max(a-o,u-s))?32767/d:0}return i(m,_,r,o,s,d,0),_}function n(t,e,n,r,i){var o,s;if(i===C(t,e,n,r)>0)for(o=e;o<n;o+=r)s=x(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=x(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(S(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,l,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,c,l,h);for(var d,g,y=t;t.prev!==t.next;)if(d=t.prev,g=t.next,h?s(t,c,l,h):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),S(t),t=g.next,y=g.next;else if((t=g)===y){f?1===f?i(t=a(r(t),e,n),e,n,c,l,h,2):2===f&&u(t,e,n,c,l,h):i(r(t),e,n,c,l,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,c=r.y,l=i<o?i<s?i:s:o<s?o:s,h=a<u?a<c?a:c:u<c?u:c,p=i>o?i>s?i:s:o>s?o:s,f=a>u?a>c?a:c:u>c?u:c,g=r.next;g!==e;){if(g.x>=l&&g.x<=p&&g.y>=h&&g.y<=f&&d(i,a,o,u,s,c,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(y(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,c=s.x,l=i.y,h=o.y,f=s.y,g=a<u?a<c?a:c:u<c?u:c,m=l<h?l<f?l:f:h<f?h:f,_=a>u?a>c?a:c:u>c?u:c,v=l>h?l>f?l:f:h>f?h:f,b=p(g,m,e,n,r),w=p(_,v,e,n,r),E=t.prevZ,x=t.nextZ;E&&E.z>=b&&x&&x.z<=w;){if(E.x>=g&&E.x<=_&&E.y>=m&&E.y<=v&&E!==i&&E!==s&&d(a,l,u,h,c,f,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,x.x>=g&&x.x<=_&&x.y>=m&&x.y<=v&&x!==i&&x!==s&&d(a,l,u,h,c,f,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;E&&E.z>=b;){if(E.x>=g&&E.x<=_&&E.y>=m&&E.y<=v&&E!==i&&E!==s&&d(a,l,u,h,c,f,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;x&&x.z<=w;){if(x.x>=g&&x.x<=_&&x.y>=m&&x.y<=v&&x!==i&&x!==s&&d(a,l,u,h,c,f,x.x,x.y)&&y(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!m(o,s)&&_(o,i,i.next,s)&&w(o,s)&&w(s,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),S(i),S(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function u(t,e,n,o,s,a){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&g(u,c)){var l=E(u,c);return u=r(u,u.next),l=r(l,l.next),i(u,e,n,o,s,a,0),void i(l,e,n,o,s,a,0)}c=c.next}u=u.next}while(u!==t)}function c(t,e){return t.x-e.x}function l(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,c=n,l=n.x,p=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&d(o<p?i:s,o,l,p,o<p?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),w(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var i=E(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||m(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,r){var i=b(y(t,e,n)),o=b(y(t,e,r)),s=b(y(n,r,t)),a=b(y(n,r,e));return i!==o&&s!==a||(!(0!==i||!v(t,n,e))||(!(0!==o||!v(t,r,e))||(!(0!==s||!v(n,t,r))||!(0!==a||!v(n,e,r)))))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function w(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var n=new I(t.i,t.x,t.y),r=new I(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function x(t,e,n,r){var i=new I(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(C(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(C(t,c,l,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},17648:function(t){"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),s=Math.max(0,r.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))})),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}},58612:function(t,e,n){"use strict";var r=n(17648);t.exports=Function.prototype.bind||r},25972:function(t){"use strict";var e=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(t){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof r&&""!==function(){}.bind().name},t.exports=e},29657:function(t,e,n){var r=n(10251),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!s(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},51787:function(t,e,n){var r=n(24056),i=n(84102),o=n(31540),s=n(9705).Z,a=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function c(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return u(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},24056:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=r-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(a-l)/a)*(u-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*l/a+h)),Math.min(o,Math.floor(r+(a-u)*l/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf){var l=i(t,s.children,e);if(-1!==l)return s.children.splice(l,1),u.push(s),this._condense(u),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var u=Math.ceil(s/a),c=u*Math.ceil(Math.sqrt(a));g(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var h=Math.min(l+c-1,n);g(t,l,h,u,this.compareMinY);for(var p=l;p<=h;p+=u){var f=Math.min(p+u-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],c=l(u),h=(p=t,f=u,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,i=c<i?c:i,s=u):h===o&&c<i&&(i=c,s=u)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,u,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),y=s(t,d,n,this.toBBox),m=(i=g,o=y,a=void 0,u=void 0,c=void 0,h=void 0,a=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-a)*Math.max(0,h-u)),_=l(g)+l(y);m<p?(p=m,r=d,f=_<f?_:f):m===p&&_<f&&(f=_,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),u=s(t,n-e,n,i),c=h(o)+h(u),l=e;l<n-e;l++){var p=t.children[l];a(o,t.leaf?i(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(u,t.leaf?i(d):d),c+=h(u)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},40210:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(t){u=null}var c=function(){throw new s},l=u?function(){try{return c}catch(t){try{return u(arguments,"callee").get}catch(t){return c}}}():c,h=n(41405)(),p=n(28185)(),f=Object.getPrototypeOf||(p?function(t){return t.__proto__}:null),d={},g="undefined"!=typeof Uint8Array&&f?f(Uint8Array):r,y={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&f?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&f?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h&&f?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h&&f?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&f?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(f)try{null.error}catch(t){var m=f(f(t));y["%Error.prototype%"]=m}var _=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&f&&(n=f(i.prototype))}return y[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(58612),w=n(17642),E=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),I=b.call(Function.call,String.prototype.slice),C=b.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,P=function(t,e){var n,r=t;if(w(v,r)&&(r="%"+(n=v[r])[0]+"%"),w(y,r)){var o=y[r];if(o===d&&(o=_(r)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=I(t,0,1),n=I(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(t,O,(function(t,e,n,i){r[r.length]=n?S(i,T,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=P("%"+r+"%",e),a=o.name,c=o.value,l=!1,h=o.alias;h&&(r=h[0],x(n,E([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var d=n[p],g=I(d,0,1),m=I(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&f||(l=!0),w(y,a="%"+(r+="."+d)+"%"))c=y[a];else if(null!=c){if(!(d in c)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&p+1>=n.length){var _=u(c,d);c=(f=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:c[d]}else f=w(c,d),c=c[d];f&&!l&&(y[a]=c)}}return c}},27296:function(t,e,n){"use strict";var r=n(40210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},31044:function(t,e,n){"use strict";var r=n(40210)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},28185:function(t){"use strict";var e={foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof n)}},41405:function(t,e,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(55419);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},55419:function(t){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},96410:function(t,e,n){"use strict";var r=n(55419);t.exports=function(){return r()&&!!Symbol.toStringTag}},17642:function(t,e,n){"use strict";var r=n(58612);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},48824:function(t,e,n){"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(24753);t.exports=o.call(r,i)},61454:function(t){"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n};t.exports=function(t){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n}(arguments,1),a=n(0,i.length-s.length),u=[],c=0;c<a;c++)u[c]="$"+c;if(o=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(t,r(s,arguments))})),i.prototype){var l=function(){};l.prototype=i.prototype,o.prototype=new l,l.prototype=null}return o}},24753:function(t,e,n){"use strict";var r=n(61454);t.exports=Function.prototype.bind||r},80645:function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=d,s/=256,c-=8);t[n+f-d]|=128*g}},82584:function(t,e,n){"use strict";var r=n(96410)(),i=n(21924)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},18923:function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(96410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},98420:function(t,e,n){"use strict";var r,i,o,s,a=n(21924),u=n(96410)();if(u){r=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),o={};var c=function(){throw o};s={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=c)}var l=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=u?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===l(t)}},11752:function(t,e,n){t.exports=n(84785)},198:function(t,e,n){"use strict";n.d(e,{ED:function(){return i},t1:function(){return s},zf:function(){return o}});var r=n(39593),i=function(t,e){var n=(0,r.bS)(t,e.maxNumberOfProducts),i=(0,r.$B)(t,e.maxTotalWeight);return!(n||i)},o=function(t){return!(null==t||!t.livraisonExpress)&&t.livraisonExpress.success},s=function(t){return!(null==t||!t.livraisonStandard)&&t.livraisonStandard.success}},92090:function(t,e,n){"use strict";n.d(e,{CW:function(){return u},Gn:function(){return c},PP:function(){return l},TH:function(){return f},Vi:function(){return m},_R:function(){return g},eO:function(){return a},mW:function(){return p},oi:function(){return d},x8:function(){return y}});var r,i=n(59499),o=n(96568),s=n(91933),a="LEX",u="STD",c="Promotions",l="Promotions du moment",h="SAC",p="NAL",f=(r={},(0,i.Z)(r,o.uS.delivery,u),(0,i.Z)(r,o.uS.deliveryExpress,a),(0,i.Z)(r,o.uS.clickAndCollect,u),function(t){return Boolean(t.tags.find((function(t){return t.default_label===h})))}),d=function(t,e){if(f(t))return!0;if(!t.is_available)return!1;if(!1===t.is_available_in_entity)return!1;var n=t.tags.find((function(t){return t.default_label===u})),r=t.tags.find((function(t){return t.default_label===s.oh}));return!(e===o.uS.delivery&&!n)&&(!(e===o.uS.deliveryExpress&&!r)&&!(e===o.uS.clickAndCollect&&!n))},g=function(t,e,n){var r,i=n.tags.find((function(t){return t.default_label===u})),a=n.tags.find((function(t){return t.default_label===s.oh}));if(t===o.uS.delivery&&!i)return!1;if(t===o.uS.deliveryExpress&&!a)return!1;if(t===o.uS.clickAndCollect&&!i)return!1;var c=null===(r=n.available_in_entity)||void 0===r?void 0:r.find((function(t){return t.entity===e}));return!!c&&!1!==c.enabled};function y(t,e){return!!e.tags.find((function(t){return t.default_label===h}))||!1!==e.is_available&&!!e.tags.find((function(t){return t.default_label===s.oh||t.default_label===u}))}var m=function(t,e,n){return t.stock>=e.quantity+n}},39593:function(t,e,n){"use strict";n.d(e,{$B:function(){return u},SB:function(){return o},bS:function(){return c},tP:function(){return i},wD:function(){return a},xs:function(){return s}});var r=n(92090),i=function(t){return(0,r.TH)(t)||Boolean(t.tags.find((function(t){return t.default_label===r.CW})))},o=function(t){return(0,r.TH)(t)||Boolean(t.tags.find((function(t){return t.default_label===r.eO})))},s=function(t,e){return"DELIVERY"===e?i(t):"DELIVERY_EXPRESS"===e?o(t):"CLICK_AND_COLLECT"===e&&function(t){return(0,r.TH)(t)||Boolean(t.tags.find((function(t){return t.default_label===r.CW})))}(t)},a=function(t,e){return t.every((function(t){return s(t,e)}))},u=function(t,e){var n=function(t){return t.reduce((function(t,e){return(0,r.TH)(e)?t:t+e.quantity*e.weight}),0)}(t);return n>1e3*e},c=function(t,e){var n=function(t){return t.reduce((function(t,e){return(0,r.TH)(e)?t:t+e.quantity}),0)}(t);return n>e}},36222:function(t,e,n){"use strict";n.d(e,{M:function(){return I},C:function(){return C}});var r=n(50029),i=n(59499),o=n(87794),s=n.n(o),a=n(67848);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=n(96568),h=n(44686),p=n(72929),f=n(31514),d=n(94632);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(t){var e,n,i=function(t){var e,n=(0,a.a)(c(c({},t),{},{queryFn:(e=(0,r.Z)(s().mark((function e(){var n=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.queryFn.apply(t,n);case 3:return e.t0=e.sent,e.abrupt("return",{ok:!0,payload:e.t0});case 7:return e.prev=7,e.t1=e.catch(0),e.abrupt("return",{ok:!1,payload:e.t1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return e.apply(this,arguments)})}));return n.data?!0===n.data.ok?c(c({},n),{},{data:n.data.payload,error:null}):c(c({},n),{},{data:null,error:n.data.payload,isError:!0,status:"error"}):c(c({},n),{},{data:null,error:[]})}(y({queryKey:["order-quote",t.products,t.potPayment],refetchOnWindowFocus:!1,queryFn:(n=(0,r.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.zd)();case 3:return n=e.sent,e.next=6,l.ZP.requests.quoteOrderCart(y(y({},n),{},{content:t.products,pot_payment:t.potPayment||n.pot_payment}),{basket_validation:!0});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:if(e.prev=10,e.t0=e.catch(0),400!==e.t0.status){e.next=17;break}throw(0,d.Kz)(d.tw.CHECKOUT_ERROR),(0,f.de)(e.t0.data.description);case 17:p.k.error(e.t0);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return n.apply(this,arguments)})},t.queryOptions));return y(y({},i),{},{error:null!==(e=i.error)&&void 0!==e?e:[],refetchOrder:function(){i.remove()}})},_=n(86820),v=n(66369),b=n(21370),w=n(67294),E=n(52161),x=n(92455),S=n(5516),I=function(t){return t.map((function(t,e){var n=(0,b.o$)(t).price;return{product:{id:t.id},vat_rate:n.vat_rate,price:n.price_ttc,quantity:t.quantity,line_index:e,is_payable:!0}}))},C=function(){var t,e=(0,S.X)(),n=(0,v.q)(),r=(0,x.v)(),i=(0,_.a)(),o=(0,E.e)(),s=(0,w.useMemo)((function(){return I(o.data)}),[e.numberOfProducts]);return m({products:s,potPayment:r.amountUsed,queryOptions:{queryKey:["order-quote",{numberOfProducts:e.numberOfProducts,deliveryType:n.deliveryType,walletAmountUsed:r.amountUsed,userId:null===(t=i.user)||void 0===t?void 0:t.id}],keepPreviousData:!0}})}},52161:function(t,e,n){"use strict";n.d(e,{e:function(){return h}});var r=n(59499),i=n(20891),o=n(99201),s=n(33969),a=n(67848),u=n(67294);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h=function(){var t=(0,s.X)(),e=(0,u.useMemo)((function(){return t.products.map((function(t){return t.id}))}),[t.products.length]),n=(0,i.l)(),r=(0,a.a)({queryKey:["products",e,"baseQueries",n],queryFn:function(){return(0,o.Mm)(e,n)},keepPreviousData:!0,structuralSharing:!1,refetchOnWindowFocus:!1,enabled:e.length>0,staleTime:864e5}),c=(0,u.useMemo)((function(){return!r.data||(null==e?void 0:e.length)<=0?[]:r.data.map((function(e){var n=t.products.find((function(t){return t.id===e.id}));return n?l(l({},e),{},{error:null,quantity:n.quantity}):null})).filter(Boolean)}),[r.data,t.products]);return l(l({},r),{},{data:c})}},92455:function(t,e,n){"use strict";n.d(e,{O:function(){return c},v:function(){return l}});var r=n(59499),i=n(25853),o=n(14671);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={amountUsed:0},c=(0,o.Z)((function(t){return a(a({},u),{},{setAmountUsed:function(e){t({amountUsed:e})},reset:function(){return t(u)}})})),l=function(){var t=c(),e=(0,i.t)();return a(a({},t),{},{balance:e})}},3061:function(t,e,n){"use strict";n.d(e,{g:function(){return Z}});var r=n(59499),i=n(33969),o=n(67294),s=n(27812),a=n(50029),u=n(87794),c=n.n(u),l=n(52161),h=function(){var t=(0,i.X)();return(0,o.useCallback)((function(e){t.addPendingProducts(e)}),[])},p=function(){var t=(0,i.X)();return(0,o.useCallback)((function(){t.clearPendingProducts()}),[])},f=n(67910),d=n(21227),g=n(96568),y=n(66369),m=n(71250),_=n(22906),v=n(63221),b=n(198),w=function(t){return!!t.deliveryType&&(!("DELIVERY"!==t.deliveryType&&"DELIVERY_EXPRESS"!==t.deliveryType||!t.DELIVERY.address||!t.DELIVERY.storeId)||!("CLICK_AND_COLLECT"!==t.deliveryType||!t.CLICK_AND_COLLECT.storeId))},E=n(92090),x=n(39593),S=n(99201),I=n(85486),C=n(20891),O=n(11163),T=n(6915);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var R=function(){var t=(0,y.q)(),e=(0,i.X)(),n=(0,m.f)(),r=((0,v.z)(),(0,_.o)()),u=(0,l.e)(),p=(0,d.a)(),P=(0,f.k)(),R=(0,C.l)(),A=(0,O.useRouter)(),D=h(),L=(0,o.useCallback)((function(e){return t.deliveryType===g.uS.deliveryExpress&&!(0,b.ED)(e,p)}),[p,t.deliveryType]),M=(0,o.useCallback)(function(){var i=(0,a.Z)(c().mark((function i(o){var a,l,h,p,f,d,y,m,v,b,C,O,N,M,k,j,F,B=arguments;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(h=B.length>1&&void 0!==B[1]?B[1]:{},w(t)){i.next=9;break}return e.clear(),D(o),i.next=6,(0,I.k)();case 6:return n.setIsOpen("deliveryDropdown",!0),null===(p=h.onOpenDeliveryModal)||void 0===p||p.call(h),i.abrupt("return",[]);case 9:return f=!1,o=o.filter((function(t){return!Boolean(e.products.find((function(e){return e.id===t})))})),i.next=13,(0,S.XM)(o.map((function(t){return{id:t}})),R);case 13:if(d=i.sent,y=d.filter((function(t){return(0,E.x8)(e.products,t)})),m=y.filter((function(e){return(0,E.oi)(e,t.deliveryType)})),v=m.filter((function(e){return(0,x.xs)(e,t.deliveryType)})),b=v.length!==m.length,C=v.length>0,O=0!==(null===(a=o)||void 0===a?void 0:a.length)&&m.length!==(null===(l=o)||void 0===l?void 0:l.length),!b&&C&&!O){i.next=38;break}if(N=y.filter((function(e){var n,r,i;return(0,E._R)(t.deliveryType===g.uS.delivery?g.uS.deliveryExpress:g.uS.delivery,null!==(n=t.deliveryType===g.uS.delivery?null===(r=t.modesAvailable.livraisonExpress)||void 0===r?void 0:r.siteIdWynd:null===(i=t.modesAvailable.livraisonStandard)||void 0===i?void 0:i.siteIdWynd)&&void 0!==n?n:-1,e)})),t.deliveryType!==g.uS.delivery&&t.deliveryType!==g.uS.deliveryExpress||!(N.length>0)){i.next=33;break}if(t.deliveryType!==g.uS.delivery){i.next=28;break}return i.next=26,r.open(_.w.SWITCH_TO_DELIVERY_EXPRESS,{question:"Ce produit ne peut pas être ajouté au panier car il n'est pas compatible avec le mode de livraison sélectionné",showIcons:!0,onConfirm:function(){N.map((function(t){return-1===v.findIndex((function(e){return e.id===t.id}))&&v.push(t)})),A.push(T.Z.cart),e.clearPendingProducts()},onReject:function(){return[]}});case 26:i.next=31;break;case 28:if(t.deliveryType!==g.uS.deliveryExpress){i.next=31;break}return i.next=31,r.open(_.w.SWITCH_TO_DELIVERY_STD,{question:"Ce produit ne peut pas être ajouté au panier car il n'est pas compatible avec le mode de livraison sélectionné",showIcons:!0,onConfirm:function(){f=!0,N.map((function(t){return-1===v.findIndex((function(e){return e.id===t.id}))&&v.push(t)})),A.push(T.Z.cart),e.clearPendingProducts()},onReject:function(){return[]}});case 31:i.next=36;break;case 33:t.deliveryType===g.uS.deliveryExpress&&r.open(_.w.INCOMPATIBLE_PRODUCTS,{title:"Livraison Express"}),t.deliveryType===g.uS.delivery&&r.open(_.w.INCOMPATIBLE_PRODUCTS,{title:"Livraison Programmée"}),t.deliveryType===g.uS.clickAndCollect&&r.open(_.w.INCOMPATIBLE_PRODUCTS,{title:"Retrait en magasin"});case 36:if(C||!(N.length<=0)){i.next=38;break}return i.abrupt("return",[]);case 38:if(M=[].concat((0,s.Z)(e.products),(0,s.Z)(v.map((function(t){return(0,S.Qn)(t.id)})))),k=(0,S.a2)(v,M),j=[].concat((0,s.Z)(u.data),(0,s.Z)(k)),f||!L(j)){i.next=56;break}if(!(0,x.wD)(k,g.uS.delivery)){i.next=53;break}return F=k.map((function(t){return t.id})),D(F),i.next=47,P.openSwitchToSTD(k);case 47:if(i.sent.ok){i.next=51;break}return e.clearPendingProducts(),i.abrupt("return",[]);case 51:i.next=56;break;case 53:return i.next=55,P.openIncompatibleDeliveryType(k);case 55:return i.abrupt("return",[]);case 56:return i.abrupt("return",k);case 57:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),[e.products,u.data,t,L]),k=(0,o.useCallback)(function(){var n=(0,a.Z)(c().mark((function n(i,o){var a,l,h,p,f,d,y,m,v,b,w;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.products.find((function(t){return t.id===i})),n.next=3,(0,S._h)({id:i},R);case 3:if(l=n.sent,h=o<0,p=a.quantity+o<=0,f=!(0,E.Vi)(l,a,o),a&&l){n.next=9;break}return n.abrupt("return",-1);case 9:if(h||(0,x.xs)(l,t.deliveryType)||t.deliveryType!==g.uS.delivery&&t.deliveryType!==g.uS.deliveryExpress||!(0,E._R)(t.deliveryType===g.uS.delivery?g.uS.deliveryExpress:g.uS.delivery,null!==(d=t.deliveryType===g.uS.delivery?null===(y=t.modesAvailable.livraisonExpress)||void 0===y?void 0:y.siteIdWynd:null===(m=t.modesAvailable.livraisonStandard)||void 0===m?void 0:m.siteIdWynd)&&void 0!==d?d:-1,l)||(t.deliveryType===g.uS.delivery?r.open(_.w.SWITCH_TO_DELIVERY_EXPRESS,{question:"Ce produit ne peut pas être ajouté au panier car il n'est pas compatible avec le mode de livraison sélectionné",showIcons:!0}):t.deliveryType===g.uS.deliveryExpress&&r.open(_.w.SWITCH_TO_DELIVERY_STD,{question:"Ce produit ne peut pas être ajouté au panier car il n'est pas compatible avec le mode de livraison sélectionné",showIcons:!0})),!h){n.next=12;break}return n.abrupt("return",Math.max(0,a.quantity+o));case 12:if(!f){n.next=15;break}return r.open(_.w.PRODUCT_QUANTITY_LIMIT,{quantityAvailable:l.quantity}),n.abrupt("return",a.quantity);case 15:if(v=p?0:f?null!==(b=l.quantity)&&void 0!==b?b:-1:a.quantity+o,w=[].concat((0,s.Z)(u.data.filter((function(t){return t.id!==i}))),[N(N({},l),{},{quantity:v})]),!L(w)){n.next=29;break}if(!(0,x.wD)(w,g.uS.delivery)){n.next=26;break}return n.next=21,P.openSwitchToSTD(w);case 21:if(n.sent.ok){n.next=24;break}return n.abrupt("return",a.quantity);case 24:n.next=29;break;case 26:return n.next=28,P.openIncompatibleDeliveryType(w);case 28:return n.abrupt("return",a.quantity);case 29:return n.abrupt("return",v);case 30:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),[e.products,u.data,L]);return{validateAvailableProducts:M,validateProductQuantity:k}},A=n(85945),D=n(94632),L=n(21370),M=n(89021);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=j(j({},e),{},{tracking:j({source:M.TK.DEFAULT},e.tracking)});var n=(0,L.SN)(t),r=n.price,i=n.origPrice,o=n.potGain;return{product_id:t.id,product_name:t.label,remise:r===i?Math.round(100*(1*(i-r)/i+Number.EPSILON))+"%":"0%",prix:i||r,prix_apres_remise:r,points_fidelite_ajoutes:o,from:e.tracking.source}};function B(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var U=function(){var t=(0,A.NL)(),e=(0,i.X)(),n=(0,l.e)(),r=R(),u=(0,o.useCallback)(function(){var i=(0,a.Z)(c().mark((function i(o){var a,u,l,h,p,f,d,g=arguments;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=g.length>1&&void 0!==g[1]?g[1]:{},i.next=3,r.validateAvailableProducts(o,{onOpenDeliveryModal:function(){return(0,D.Kz)(D.tw.CLICK_PRE_FIRST_ADD_TO_CART)}});case 3:u=i.sent,l=u.map((function(t){return{id:t.id,quantity:1}})),h=[].concat((0,s.Z)(n.data),(0,s.Z)(u)),t.setQueryData(["products",h.map((function(t){return t.id}))],h),e.addProducts(l),p=B(u);try{for(p.s();!(f=p.n()).done;)d=f.value,(0,D.Kz)(D.tw.ADD_TO_CART,F(d,a))}catch(t){p.e(t)}finally{p.f()}return i.abrupt("return",u.map((function(t){return t.id})));case 11:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),[e.products,n.data,r.validateAvailableProducts]);return u},$=n(36222),z=n(85988),G=n(5516);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Z=function(){var t=(0,i.X)(),e=(0,G.X)(),n=function(){var t=U();return(0,o.useCallback)((function(e,n){return t([e],n)}),[t])}(),r=U(),s=function(){var t=(0,i.X)(),e=(0,l.e)(),n=(0,A.NL)(),r=(0,C.l)(),s=(0,$.C)(),u=(0,o.useCallback)(function(){var i=(0,a.Z)(c().mark((function i(o){var a,u;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.data.filter((function(t){return t.id!==o})),n.setQueryData(["products",a.map((function(t){return t.id}))],a),n.removeQueries({queryKey:["order-quote"],exact:!1}),t.removeProduct(o),i.next=6,(0,S.i)({id:o},r);case 6:u=i.sent,s.refetchOrder(),(0,D.Kz)(D.tw.DELETE_FROM_CART,{product_id:null==u?void 0:u.id,product_name:null==u?void 0:u.label});case 9:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),[e.data]);return u}(),u=function(){var t=(0,_.o)(),e=(0,i.X)(),n=R(),r=(0,o.useCallback)(function(){var r=(0,a.Z)(c().mark((function r(i,o){var s,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.validateProductQuantity(i,o);case 2:if(s=r.sent,!((0,z.Rw)(s)||s<0)){r.next=5;break}return r.abrupt("return");case 5:if(0!==s){r.next=8;break}return t.open(_.w.REMOVE_FROM_CART,{id:i}),r.abrupt("return");case 8:return e.setQuantity(i,s),r.next=11,(0,S.i)({id:i});case 11:a=r.sent,o<0&&(0,D.Kz)(D.tw.REMOVE_FROM_CART,{product_id:a.id,product_name:a.label}),o>0&&(0,D.Kz)(D.tw.ADD_TO_CART,F(a));case 14:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),[e.products,n.validateProductQuantity]);return r}(),f=function(){var t=(0,i.X)();return(0,o.useCallback)((function(){return(0,S.pw)(),t.clearProducts()}),[t.products])}(),d=function(){var t=(0,i.X)();return(0,o.useCallback)((function(e){t.addPendingProduct(e)}),[])}(),g=h(),y=function(){var t=(0,i.X)(),e=U(),n=p();return(0,o.useCallback)((0,a.Z)(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.pendingProducts.length<=0)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e(t.pendingProducts);case 4:n();case 5:case"end":return r.stop()}}),r)}))),[t.pendingProducts,e])}(),m=p(),v=(0,o.useCallback)((function(e){return t.setStep(e)}),[t.setStep]);return Y(Y(Y({},t),e),{},{addProduct:n,addProducts:r,removeProduct:s,setQuantity:u,clearProducts:f,addPendingProduct:d,addPendingProducts:g,validatePendingProducts:y,clearPendingProducts:m,setStep:v})}},5516:function(t,e,n){"use strict";n.d(e,{X:function(){return u}});var r=n(33969),i=n(21370),o=n(92090),s=n(67294),a=n(52161),u=function(){var t=(0,r.X)(),e=(0,a.e)();return{totalPrice:(0,s.useMemo)((function(){return e.data.reduce((function(t,e){var n=(0,i.SN)(e).price;return parseFloat((t+n*e.quantity).toFixed(2))}),0)}),[e.data]),totalWeight:(0,s.useMemo)((function(){return e.data.reduce((function(t,e){return t+e.weight*e.quantity}),0)}),[e.data]),numberOfProducts:(0,s.useMemo)((function(){return e.data.reduce((function(t,e){return(0,o.TH)(e)?t:t+e.quantity}),0)}),[e.data]),isEmpty:(0,s.useMemo)((function(){return!t.products.length}),[t.products])}}},12747:function(t,e,n){"use strict";n.d(e,{We:function(){return p},gu:function(){return f}});var r=n(50029),i=n(87794),o=n.n(i),s=n(96568),a=n(66369),u=n(67848),c=n(67294),l=function(t){var e=t.idCreneau,n=t.dateDebutCreneau,r=t.heureDebut,i=t.dateFinCreneau,o=t.heureFin;return{id:e,isAvailable:t.isDisponible,openingDate:n,openingHour:r,closingDate:i,closingHour:o}},h=function(t){return t.map(l)},p=function(t){return"CLICK_AND_COLLECT"===t.deliveryType?{storeId:t.CLICK_AND_COLLECT.storeId,type:"C"}:{storeId:t.DELIVERY.storeId,type:"D"}},f=function(){var t,e=(0,a.q)(),n=(0,c.useMemo)((function(){return p(e)}),[e]),i=(0,u.a)({queryKey:["booking-slots",n],queryFn:(t=(0,r.Z)(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ZP.requests.getBookingMarjane(n.storeId,n.type);case 2:return e=t.sent,r=e.data,t.abrupt("return",h(r.data));case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),enabled:Boolean(n.storeId)});return i}},96167:function(t,e,n){"use strict";n.d(e,{B:function(){return l}});var r=n(50029),i=n(87794),o=n.n(i),s=n(96568),a=n(67848),u=n(48228),c=n(44686),l=function(){var t,e,n,i,l,h=(0,c.Mg)();return t=h.orderUUID,i=(0,a.a)({queryKey:["order",t],queryFn:(e=(0,r.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ZP.requests.getOrder(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),enabled:Boolean(t)}),l=(0,u.D)({mutationFn:(n=(0,r.Z)(o().mark((function e(n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ZP.requests.updateOrder(t,n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)}),onSuccess:function(t){i.refetch()}}),{order:i,update:l}}},69335:function(t,e,n){"use strict";n.d(e,{DA:function(){return x},H4:function(){return S},O6:function(){return r},Y0:function(){return _}});var r,i=n(27812),o=n(50029),s=n(59499),a=n(87794),u=n.n(a),c=n(88752),l=n(44686),h=n(48228),p=n(67294),f=n(14671),d=n(38597),g=n(96167);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t.CreditCard="CreditCard",t.Cash="Cash"}(r||(r={}));var _=function(t){var e=t.number.slice(-4);return{id:t.id,expired:t.expired,type:t.type,label:"Carte se terminant par ".concat(e),description:"Votre carte ne sera débitée qu’après la livraison"}},v={id:r.CreditCard,type:r.CreditCard,label:"Carte bancaire",description:"Votre carte ne sera débitée qu’après la livraison",expired:!1},b={id:r.Cash,type:r.Cash,label:"Paiement à la livraison",description:"En espèces",expired:!1},w=[v,b],E={paymentMethod:v,savePaymentMethod:!1},x=(0,f.Z)((0,d.tJ)((function(t){return m(m({},E),{},{setPaymentMethod:function(e){return t({paymentMethod:e})},setSavePaymentMethod:function(e){return t({savePaymentMethod:e})},reset:function(){return t(E)}})}),{name:"checkout-payment"})),S=function(){var t,e=x(),n=(0,l.Mg)(),r=(0,g.B)(),s=(0,c.r)().creditCards,a=(0,h.D)({mutationFn:(t=(0,o.Z)(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setPaymentMethod(i),r.order.data){t.next=3;break}return t.abrupt("return");case 3:if(n.initialize){t.next=5;break}return t.abrupt("return");case 5:if(!(i.type in c.K)){t.next=10;break}return t.next=8,r.update.mutateAsync({cmi_card:{uuid:i.id}});case 8:t.next=12;break;case 10:return t.next=12,r.update.mutateAsync({cmi_card:null});case 12:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}),f=(0,p.useMemo)((function(){var t,n,o,u=r.order.isFetched,l=null!==(t=null===(n=s.data)||void 0===n?void 0:n.map(_))&&void 0!==t?t:[],h=(null===(o=r.order.data)||void 0===o?void 0:o.total)>0;if(!u)return w;if(h&&l.length>0&&u&&a.isIdle){var p=e.paymentMethod.type in c.K?e.paymentMethod:l[0];a.mutate(p)}else h?h&&l.length<=0&&u&&a.isIdle&&a.mutate(v):a.mutate(b);return[].concat((0,i.Z)(l),w)}),[s.data,r.order.data]);return m(m({},e),{},{setPaymentMethod:a,paymentMethods:m(m({},s),{},{data:f})})}},58449:function(t,e,n){"use strict";n.d(e,{T:function(){return s},Z:function(){return u}});var r=n(887),i=n(11163),o=n(67294),s={frFR:"fr-FR",arMA:"ar-MA"},a=[s.arMA],u=function(){var t=(0,i.useRouter)().locale,e=(0,o.useMemo)((function(){var e,n=null!==(e=(0,r.E)(t,[["fr-FR",s.frFR],["ar-MA",s.arMA]]))&&void 0!==e?e:s.frFR;return{lang:n,direction:a.includes(n)?"rtl":"ltr"}}),[t]),n=e.lang,u=e.direction;return{locale:t,lang:n,direction:u}}},20891:function(t,e,n){"use strict";n.d(e,{l:function(){return c}});var r=n(59499),i=n(67294),o=n(887),s=n(96568),a=n(66369);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var c=function(){var t=a.q.getState().modesAvailable,e=a.q.getState(),n=a.q.getState().deliveryType,c=(0,i.useMemo)((function(){var i,a,c,l,h,p,f,d,g,y,m;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},null!==(i=(0,o.E)(n,[[s.uS.delivery,{"entity[LEX]":null!==(a=null==t||null===(c=t.livraisonExpress)||void 0===c?void 0:c.siteIdWynd)&&void 0!==a?a:void 0,"entity[STD]":null!==(l=null==t||null===(h=t.livraisonStandard)||void 0===h?void 0:h.siteIdWynd)&&void 0!==l?l:void 0,selected_mode:"STD"}],[s.uS.deliveryExpress,{"entity[LEX]":null!==(p=null==t||null===(f=t.livraisonExpress)||void 0===f?void 0:f.siteIdWynd)&&void 0!==p?p:void 0,"entity[STD]":null!==(d=null==t||null===(g=t.livraisonStandard)||void 0===g?void 0:g.siteIdWynd)&&void 0!==d?d:void 0,selected_mode:"LEX"}],[s.uS.clickAndCollect,{"entity[STD]":null!==(y=null==e||null===(m=e.CLICK_AND_COLLECT)||void 0===m?void 0:m.storeId)&&void 0!==y?y:void 0,selected_mode:"STD"}],[void 0,{}]]))&&void 0!==i?i:{})}),[n,t]);return c}},67910:function(t,e,n){"use strict";n.d(e,{k:function(){return g}});var r=n(59499),i=n(50029),o=n(87794),s=n.n(o),a=n(96568),u=n(66369),c=n(22906),l=n(39593),h=n(67294),p=n(21227);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=function(){var t=(0,p.a)(),e=(0,u.q)(),n=(0,c.o)(),r=(0,h.useCallback)((function(e){var n=(0,l.bS)(e,t.maxNumberOfProducts);return(0,l.$B)(e,t.maxTotalWeight)?"Votre panier ne peut dépasser "+t.maxTotalWeight+" Kg":n?"Votre panier ne peut dépasser "+t.maxNumberOfProducts+" produits":null}),[t]),o=(0,h.useCallback)(function(){var t=(0,i.Z)(s().mark((function t(i,o){var a,u,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Souhaitez-vous changer votre mode de livraison ?",u=null===(a=e.modesAvailable)||void 0===a?void 0:a.livraisonStandard.success,l=r(i),t.abrupt("return",n.open(c.w.SWITCH_TO_DELIVERY_STD,d({title:l,question:"Souhaitez-vous changer votre mode de livraison ?",canConfirm:u},o)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e.modesAvailable]),f=(0,h.useCallback)(function(){var t=(0,i.Z)(s().mark((function t(i){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(i),e.deliveryType!==a.uS.deliveryExpress){t.next=3;break}return t.abrupt("return",n.open(c.w.SWITCH_TO_DELIVERY_STD,{title:o,canConfirm:!1}));case 3:if(e.deliveryType!==a.uS.delivery){t.next=5;break}return t.abrupt("return",n.open(c.w.SWITCH_TO_DELIVERY_EXPRESS,{title:o,canConfirm:!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return{openIncompatibleDeliveryType:f,openSwitchToSTD:o}}},21227:function(t,e,n){"use strict";n.d(e,{a:function(){return c}});var r=n(50029),i=n(87794),o=n.n(i),s=n(96568),a=n(66369),u=n(67848),c=function(){var t,e,n,i,c,l,h,p=(0,a.q)(),f=(0,u.a)({queryKey:["lex-delivery-config",p.deliveryType],refetchOnWindowFocus:!1,queryFn:(h=(0,r.Z)(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ZP.requests.getLexDeliveryConfig();case 2:return e=t.sent,n=e.data,t.abrupt("return",{maxTotalWeight:n.lex_weight_max,maxNumberOfProducts:n.lex_products_quantity_max,lexDeliveryTime:n.lex_delivery_time});case 5:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)}),refetchOnMount:!1});return{maxTotalWeight:null!==(t=null===(e=f.data)||void 0===e?void 0:e.maxTotalWeight)&&void 0!==t?t:1/0,maxNumberOfProducts:null!==(n=null===(i=f.data)||void 0===i?void 0:i.maxNumberOfProducts)&&void 0!==n?n:1/0,lexDeliveryTime:null!==(c=null===(l=f.data)||void 0===l?void 0:l.lexDeliveryTime)&&void 0!==c?c:0}}},88752:function(t,e,n){"use strict";n.d(e,{K:function(){return r},r:function(){return y}});var r,i=n(50029),o=n(59499),s=n(87794),a=n.n(s),u=n(96568),c=n(86820),l=n(67848),h=n(48228),p=n(87228),f=n(28610);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}!function(t){t.Mastercard="Mastercard",t.Visa="Visa",t.Amex="Amex"}(r||(r={}));var g=function(t){var e;switch(t.type){case 3:e=r.Amex;break;case 4:default:e=r.Visa;break;case 5:e=r.Mastercard}return{id:t.uuid,expired:t.expired,type:e,holderName:t.holder_name,number:t.masked_credit_card}},y=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,c.a)().user,s=(0,l.a)(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({queryKey:["cards",null==r?void 0:r.id],queryFn:(t=(0,i.Z)(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.ZP.requests.getCards(r.id);case 2:return e=t.sent,n=e.data,t.abrupt("return",n.map(g));case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})},n)),y=(0,h.D)({mutationFn:(e=(0,i.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.ZP.requests.deleteCard(r.id,e);case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)}),onSuccess:function(){s.refetch()}}),m=function(){var t=(0,i.Z)(a().mark((function t(){var e,n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.a.getState(),n=e.user,t.next=3,(0,p.d)({customerId:n.id,saveCard:!0});case 3:r=t.sent,(0,f.E)({method:"POST",url:r}).submit();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{creditCards:s,remove:y,SaveCreditCard:m}}},99201:function(t,e,n){"use strict";n.d(e,{_h:function(){return b},i:function(){return _},XM:function(){return v},pw:function(){return S},Mm:function(){return w},Qn:function(){return I},a2:function(){return x}});var r=n(27812),i=n(59499),o=n(50029),s=n(4730),a=n(87794),u=n.n(a),c=n(35778),l=n(25018),h=n(33969),p=function(t,e){return t.reduce((function(t,n,r){var i=Math.floor(r/e);return t[i]||(t[i]=[]),t[i].push(n),t}),[])},f=["dataKey"];function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(t){var e=t.dataKey,n=void 0===e?function(t){return t}:e,r=(0,s.Z)(t,f),i=l.queryClient.getQueriesData(r).map((function(t){return t[1]})).flat().filter(Boolean);return i.filter((function(t,e){return!(i.findIndex((function(e){return n(t)===n(e)}))!==e)}))},m=function(t){return"object"==typeof t&&"uuid"in t},_=function(){var t=(0,o.Z)(u().mark((function t(e,n){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m(e)){t.next=2;break}return t.abrupt("return",e);case 2:if(!(r=y({queryKey:["products"],exact:!0,dataKey:function(t){return t.id}}).find((function(t){return t.id===e.id})))){t.next=5;break}return t.abrupt("return",r);case 5:return t.next=7,c.uZ.catalog.product.get({queries:g({},n),params:{productID:e.id}});case 7:return i=t.sent,t.abrupt("return",i.data);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=(0,o.Z)(u().mark((function t(e,n){var i,o,s,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.filter(m),o=e.filter((function(t){return!m(t)})),s=y({queryKey:["products"],exact:!0,dataKey:function(t){return t.id}}).filter((function(t){return o.some((function(e){return e.id===t.id}))})),a=o.filter((function(t){return!Boolean(s.find((function(e){return e.id===t.id})))})),t.next=6,w(a.map((function(t){return t.id})),n);case 6:return c=t.sent,t.abrupt("return",[].concat((0,r.Z)(i),(0,r.Z)(s),(0,r.Z)(c)));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var t=(0,o.Z)(u().mark((function t(e,n){var r,i,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.X.getState(),t.next=3,_(e,n);case 3:if(i=t.sent,o=r.products.find((function(t){return t.id===e.id})),i&&o){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",E(i,o));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=(0,o.Z)(u().mark((function t(e,n){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p(e,50),t.next=3,Promise.all(r.map((function(t){return c.uZ.catalog.product.query({queries:g(g({},n),{},{id:t})})})));case 3:return i=t.sent,t.abrupt("return",i.map((function(t){return t.data})).flat());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),E=function(t,e){return g(g({},t),{},{error:null,quantity:null==e?void 0:e.quantity})},x=function(t,e){if(!e){var n=h.X.getState();e=n.products}return t.map((function(t){var n=e.find((function(e){return e.id===t.id}));return E(t,n)}))},S=function(){l.queryClient.removeQueries({queryKey:["products"],exact:!0})},I=function(t){return{id:t,quantity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}}},25853:function(t,e,n){"use strict";n.d(e,{t:function(){return l}});var r=n(50029),i=n(87794),o=n.n(i),s=n(96568),a=n(86820),u=n(67848),c=function(t){var e=t.total;return{total:parseFloat(e)}},l=function(){var t,e=(0,a.a)().user,n=(0,u.a)({queryKey:["wallet-balance",null==e?void 0:e.id],refetchOnWindowFocus:!1,queryFn:(t=(0,r.Z)(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.ZP.requests.getWalletBalance(e.id);case 2:return n=t.sent,r=n.data,t.abrupt("return",c(r));case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),enabled:Boolean(null==e?void 0:e.id)});return n}},5505:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AmpStateContext",{enumerable:!0,get:function(){return r}});var r=n(38754)._(n(67294)).default.createContext({})},91342:function(t,e){"use strict";function n(t){var e=void 0===t?{}:t,n=e.ampFirst,r=void 0!==n&&n,i=e.hybrid,o=void 0!==i&&i,s=e.hasQuery;return r||o&&(void 0!==s&&s)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isInAmpMode",{enumerable:!0,get:function(){return n}})},11597:function(t,e,n){"use strict";var r=n(930);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}(e,{defaultHead:function(){return h},default:function(){return g}});var o=n(38754),s=n(61757)._(n(67294)),a=o._(n(97271)),u=n(5505),c=n(20236),l=n(91342);n(13766);function h(t){void 0===t&&(t=!1);var e=[s.default.createElement("meta",{charSet:"utf-8"})];return t||e.push(s.default.createElement("meta",{name:"viewport",content:"width=device-width"})),e}function p(t,e){return"string"==typeof e||"number"==typeof e?t:e.type===s.default.Fragment?t.concat(s.default.Children.toArray(e.props.children).reduce((function(t,e){return"string"==typeof e||"number"==typeof e?t:t.concat(e)}),[])):t.concat(e)}var f=["name","httpEquiv","charSet","itemProp"];function d(t,e){var n,o,a,u,c=e.inAmpMode;return t.reduce(p,[]).reverse().concat(h(c).reverse()).filter((n=new Set,o=new Set,a=new Set,u={},function(t){var e=!0,r=!1;if(t.key&&"number"!=typeof t.key&&t.key.indexOf("$")>0){r=!0;var i=t.key.slice(t.key.indexOf("$")+1);n.has(i)?e=!1:n.add(i)}switch(t.type){case"title":case"base":o.has(t.type)?e=!1:o.add(t.type);break;case"meta":for(var s=0,c=f.length;s<c;s++){var l=f[s];if(t.props.hasOwnProperty(l))if("charSet"===l)a.has(l)?e=!1:a.add(l);else{var h=t.props[l],p=u[l]||new Set;"name"===l&&r||!p.has(h)?(p.add(h),u[l]=p):e=!1}}}return e})).reverse().map((function(t,e){var n=t.key||e;if(!c&&"link"===t.type&&t.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some((function(e){return t.props.href.startsWith(e)}))){var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.props||{});return o["data-href"]=o.href,o.href=void 0,o["data-optimized-fonts"]=!0,s.default.cloneElement(t,o)}return s.default.cloneElement(t,{key:n})}))}var g=function(t){var e=t.children,n=(0,s.useContext)(u.AmpStateContext),r=(0,s.useContext)(c.HeadManagerContext);return s.default.createElement(a.default,{reduceComponentsToState:d,headManager:r,inAmpMode:(0,l.isInAmpMode)(n)},e)};("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},97271:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var r=n(61757)._(n(67294)),i=!1,o=i?function(){}:r.useLayoutEffect,s=i?function(){}:r.useEffect;function a(t){var e,n=t.headManager,a=t.reduceComponentsToState;function u(){if(n&&n.mountedInstances){var e=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(a(e,t))}}i&&(null==n||null==(e=n.mountedInstances)||e.add(t.children),u());return o((function(){var e;return null==n||null==(e=n.mountedInstances)||e.add(t.children),function(){var e;null==n||null==(e=n.mountedInstances)||e.delete(t.children)}})),o((function(){return n&&(n._pendingUpdate=u),function(){n&&(n._pendingUpdate=u)}})),s((function(){return n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),function(){n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)}})),null}},13766:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"warnOnce",{enumerable:!0,get:function(){return n}});var n=function(t){}},15130:function(t,e,n){var r=n(34155);n(2350);var i=n(67294);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(i);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=void 0!==r&&r.env&&!0,c=function(t){return"[object String]"===Object.prototype.toString.call(t)},l=function(){function t(t){var e=void 0===t?{}:t,n=e.name,r=void 0===n?"stylesheet":n,i=e.optimizeForSpeed,o=void 0===i?u:i;h(c(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",h("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var s=document.querySelector('meta[property="csp-nonce"]');this._nonce=s?s.getAttribute("content"):null}var e,n,r,i=t.prototype;return i.setOptimizeForSpeed=function(t){h("boolean"==typeof t,"`setOptimizeForSpeed` accepts a boolean"),h(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=t,this.inject()},i.isOptimizeForSpeed=function(){return this._optimizeForSpeed},i.inject=function(){var t=this;if(h(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed)return this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),void(this._optimizeForSpeed||(u||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0));this._serverSheet={cssRules:[],insertRule:function(e,n){return"number"==typeof n?t._serverSheet.cssRules[n]={cssText:e}:t._serverSheet.cssRules.push({cssText:e}),n},deleteRule:function(e){t._serverSheet.cssRules[e]=null}}},i.getSheetForTag=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]},i.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},i.insertRule=function(t,e){if(h(c(t),"`insertRule` accepts only strings"),this._optimizeForSpeed){var n=this.getSheet();"number"!=typeof e&&(e=n.cssRules.length);try{n.insertRule(t,e)}catch(e){return u||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[e];this._tags.push(this.makeStyleTag(this._name,t,r))}return this._rulesCount++},i.replaceRule=function(t,e){if(this._optimizeForSpeed){var n=this.getSheet();if(e.trim()||(e=this._deletedRulePlaceholder),!n.cssRules[t])return t;n.deleteRule(t);try{n.insertRule(e,t)}catch(r){u||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,t)}}else{var r=this._tags[t];h(r,"old rule at index `"+t+"` not found"),r.textContent=e}return t},i.deleteRule=function(t){if(this._optimizeForSpeed)this.replaceRule(t,"");else{var e=this._tags[t];h(e,"rule at index `"+t+"` not found"),e.parentNode.removeChild(e),this._tags[t]=null}},i.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach((function(t){return t&&t.parentNode.removeChild(t)})),this._tags=[]},i.cssRules=function(){var t=this;return this._tags.reduce((function(e,n){return n?e=e.concat(Array.prototype.map.call(t.getSheetForTag(n).cssRules,(function(e){return e.cssText===t._deletedRulePlaceholder?null:e}))):e.push(null),e}),[])},i.makeStyleTag=function(t,e,n){e&&h(c(e),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+t,""),e&&r.appendChild(document.createTextNode(e));var i=document.head||document.getElementsByTagName("head")[0];return n?i.insertBefore(r,n):i.appendChild(r),r},e=t,(n=[{key:"length",get:function(){return this._rulesCount}}])&&a(e.prototype,n),r&&a(e,r),t}();function h(t,e){if(!t)throw new Error("StyleSheet: "+e+".")}var p=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0},f={};function d(t,e){if(!e)return"jsx-"+t;var n=String(e),r=t+n;return f[r]||(f[r]="jsx-"+p(t+"-"+n)),f[r]}function g(t,e){var n=t+e;return f[n]||(f[n]=e.replace(/__jsx-style-dynamic-selector/g,t)),f[n]}var y=function(){function t(t){var e=void 0===t?{}:t,n=e.styleSheet,r=void 0===n?null:n,i=e.optimizeForSpeed,o=void 0!==i&&i;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:o}),this._sheet.inject(),r&&"boolean"==typeof o&&(this._sheet.setOptimizeForSpeed(o),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var e=t.prototype;return e.add=function(t){var e=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(t.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce((function(t,e){return t[e]=0,t}),{}));var n=this.getIdAndRules(t),r=n.styleId,i=n.rules;if(r in this._instancesCounts)this._instancesCounts[r]+=1;else{var o=i.map((function(t){return e._sheet.insertRule(t)})).filter((function(t){return-1!==t}));this._indices[r]=o,this._instancesCounts[r]=1}},e.remove=function(t){var e=this,n=this.getIdAndRules(t).styleId;if(function(t,e){if(!t)throw new Error("StyleSheetRegistry: "+e+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach((function(t){return e._sheet.deleteRule(t)})),delete this._indices[n]),delete this._instancesCounts[n]}},e.update=function(t,e){this.add(e),this.remove(t)},e.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},e.cssRules=function(){var t=this,e=this._fromServer?Object.keys(this._fromServer).map((function(e){return[e,t._fromServer[e]]})):[],n=this._sheet.cssRules();return e.concat(Object.keys(this._indices).map((function(e){return[e,t._indices[e].map((function(t){return n[t].cssText})).join(t._optimizeForSpeed?"":"\n")]})).filter((function(t){return Boolean(t[1])})))},e.styles=function(t){return function(t,e){return void 0===e&&(e={}),t.map((function(t){var n=t[0],r=t[1];return s.default.createElement("style",{id:"__"+n,key:"__"+n,nonce:e.nonce?e.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})}))}(this.cssRules(),t)},e.getIdAndRules=function(t){var e=t.children,n=t.dynamic,r=t.id;if(n){var i=d(r,n);return{styleId:i,rules:Array.isArray(e)?e.map((function(t){return g(i,t)})):[g(i,e)]}}return{styleId:d(r),rules:Array.isArray(e)?e:[e]}},e.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce((function(t,e){return t[e.id.slice(2)]=e,t}),{})},t}();var m=i.createContext(null);function _(){return new y}function v(){return i.useContext(m)}m.displayName="StyleSheetContext";var b=s.default.useInsertionEffect||s.default.useLayoutEffect,w=_();function E(t){var e=w||v();return e?(b((function(){return e.add(t),function(){e.remove(t)}}),[t.id,String(t.dynamic)]),null):null}E.dynamic=function(t){return t.map((function(t){return d(t[0],t[1])})).join(" ")},e.style=E},39389:function(t,e,n){t.exports=n(15130).style},25018:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ft},queryClient:function(){return ht}});var r=n(50029),i=n(59499),o=n(39389),s=n.n(o),a=n(87794),u=n.n(a),c=n(96568),l=n(90362),h=n(66369),p=n(71250),f=n(94632),d=n(4819),g=n(9008),y=n.n(g),m=n(11163),_=n(67294),v=n(8112),b=n(32161),w=n(30819),E=n(30081),x=n(72379),S=n(89643);class I extends S.F{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||w._,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==e,r=n?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(t,e){const n=(0,b.oE)(this.state.data,t,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),n}setState(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})}cancel(t){var e;const n=this.promise;return null==(e=this.retryer)||e.cancel(t),n?n.then(b.ZT).catch(b.ZT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((t=>!1!==t.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((t=>t.getCurrentResult().isStale))}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,b.Kp)(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find((t=>t.shouldFetchOnWindowFocus()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}onOnline(){var t;const e=this.observers.find((t=>t.shouldFetchOnReconnect()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter((e=>e!==t)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,e){var n,r;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=e&&e.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find((t=>t.options.queryFn));t&&this.setOptions(t.options)}Array.isArray(this.options.queryKey);const o=(0,b.G9)(),s={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};a(s);const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(s)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};var c;(a(u),null==(n=this.options.behavior)||n.onFetch(u),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(r=u.fetchOptions)?void 0:r.meta))&&this.dispatch({type:"fetch",meta:null==(c=u.fetchOptions)?void 0:c.meta});const l=t=>{var e,n,r,i;((0,x.DV)(t)&&t.silent||this.dispatch({type:"error",error:t}),(0,x.DV)(t))||(null==(e=(n=this.cache.config).onError)||e.call(n,t,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,this.state.data,t,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=(0,x.Mz)({fn:u.fetchFn,abort:null==o?void 0:o.abort.bind(o),onSuccess:t=>{var e,n,r,i;void 0!==t?(this.setData(t),null==(e=(n=this.cache.config).onSuccess)||e.call(n,t,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,t,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):l(new Error(this.queryHash+" data is undefined"))},onError:l,onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){this.state=(e=>{var n,r;switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=t.meta)?n:null,fetchStatus:(0,x.Kw)(this.options.networkMode)?"fetching":"paused",...!e.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(r=t.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return(0,x.DV)(i)&&i.revert&&this.revertState?{...this.revertState}:{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),E.V.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate(t)})),this.cache.notify({query:this,type:"updated",action:t})}))}}var C=n(33989);class O extends C.l{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,e,n){var r;const i=e.queryKey,o=null!=(r=e.queryHash)?r:(0,b.Rm)(i,e);let s=this.get(o);return s||(s=new I({cache:this,logger:t.getLogger(),queryKey:i,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const e=this.queriesMap[t.queryHash];e&&(t.destroy(),this.queries=this.queries.filter((e=>e!==t)),e===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){E.V.batch((()=>{this.queries.forEach((t=>{this.remove(t)}))}))}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,e){const[n]=(0,b.I6)(t,e);return void 0===n.exact&&(n.exact=!0),this.queries.find((t=>(0,b._x)(n,t)))}findAll(t,e){const[n]=(0,b.I6)(t,e);return Object.keys(n).length>0?this.queries.filter((t=>(0,b._x)(n,t))):this.queries}notify(t){E.V.batch((()=>{this.listeners.forEach((({listener:e})=>{e(t)}))}))}onFocus(){E.V.batch((()=>{this.queries.forEach((t=>{t.onFocus()}))}))}onOnline(){E.V.batch((()=>{this.queries.forEach((t=>{t.onOnline()}))}))}}var T=n(89886);class P extends C.l{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,e,n){const r=new T.m({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(e),state:n,defaultOptions:e.mutationKey?t.getMutationDefaults(e.mutationKey):void 0});return this.add(r),r}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter((e=>e!==t)),this.notify({type:"removed",mutation:t})}clear(){E.V.batch((()=>{this.mutations.forEach((t=>{this.remove(t)}))}))}getAll(){return this.mutations}find(t){return void 0===t.exact&&(t.exact=!0),this.mutations.find((e=>(0,b.X7)(t,e)))}findAll(t){return this.mutations.filter((e=>(0,b.X7)(t,e)))}notify(t){E.V.batch((()=>{this.listeners.forEach((({listener:e})=>{e(t)}))}))}resumePausedMutations(){var t;return this.resuming=(null!=(t=this.resuming)?t:Promise.resolve()).then((()=>{const t=this.mutations.filter((t=>t.state.isPaused));return E.V.batch((()=>t.reduce(((t,e)=>t.then((()=>e.continue().catch(b.ZT)))),Promise.resolve())))})).then((()=>{this.resuming=void 0})),this.resuming}}var N=n(15761),R=n(96474);function A(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,o,s;const a=null==(e=t.fetchOptions)||null==(n=e.meta)?void 0:n.refetchPage,u=null==(r=t.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,c=null==u?void 0:u.pageParam,l="forward"===(null==u?void 0:u.direction),h="backward"===(null==u?void 0:u.direction),p=(null==(o=t.state.data)?void 0:o.pages)||[],f=(null==(s=t.state.data)?void 0:s.pageParams)||[];let d=f,g=!1;const y=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),m=(t,e,n,r)=>(d=r?[e,...d]:[...d,e],r?[n,...t]:[...t,n]),_=(e,n,r,i)=>{if(g)return Promise.reject("Cancelled");if(void 0===r&&!n&&e.length)return Promise.resolve(e);const o={queryKey:t.queryKey,pageParam:r,meta:t.options.meta};var s;s=o,Object.defineProperty(s,"signal",{enumerable:!0,get:()=>{var e,n;return null!=(e=t.signal)&&e.aborted?g=!0:null==(n=t.signal)||n.addEventListener("abort",(()=>{g=!0})),t.signal}});const a=y(o);return Promise.resolve(a).then((t=>m(e,r,t,i)))};let v;if(p.length)if(l){const e=void 0!==c,n=e?c:D(t.options,p);v=_(p,e,n)}else if(h){const e=void 0!==c,n=e?c:L(t.options,p);v=_(p,e,n,!0)}else{d=[];const e=void 0===t.options.getNextPageParam;v=!a||!p[0]||a(p[0],0,p)?_([],e,f[0]):Promise.resolve(m([],f[0],p[0]));for(let n=1;n<p.length;n++)v=v.then((r=>{if(!a||!p[n]||a(p[n],n,p)){const i=e?f[n]:D(t.options,r);return _(r,e,i)}return Promise.resolve(m(r,f[n],p[n]))}))}else v=_([]);return v.then((t=>({pages:t,pageParams:d})))}}}}function D(t,e){return null==t.getNextPageParam?void 0:t.getNextPageParam(e[e.length-1],e)}function L(t,e){return null==t.getPreviousPageParam?void 0:t.getPreviousPageParam(e[0],e)}var M=n(85945),k=n(3061),j=n(33969),F=n(27812),B={};!function t(e,n,r,i){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL);function s(){}function a(t){var r=n.exports.Promise,i=void 0!==r?r:e.Promise;return"function"==typeof i?new i(t):(t(s,s),null)}var u,c,l,h,p,f,d,g,y,m=(l=Math.floor(1e3/60),h={},p=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(u=function(t){var e=Math.random();return h[e]=requestAnimationFrame((function n(r){p===r||p+l-1<r?(p=r,delete h[e],t()):h[e]=requestAnimationFrame(n)})),e},c=function(t){h[t]&&cancelAnimationFrame(h[t])}):(u=function(t){return setTimeout(t,l)},c=function(t){return clearTimeout(t)}),{frame:u,cancel:c}),_=(g={},function(){if(f)return f;if(!r&&o){var e=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{f=new Worker(URL.createObjectURL(new Blob([e])))}catch(t){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("🎊 Could not load worker",t),null}!function(t){function e(e,n){t.postMessage({options:e||{},callback:n})}t.init=function(e){var n=e.transferControlToOffscreen();t.postMessage({canvas:n},[n])},t.fire=function(n,r,i){if(d)return e(n,null),d;var o=Math.random().toString(36).slice(2);return d=a((function(r){function s(e){e.data.callback===o&&(delete g[o],t.removeEventListener("message",s),d=null,i(),r())}t.addEventListener("message",s),e(n,o),g[o]=s.bind(null,{data:{callback:o}})}))},t.reset=function(){for(var e in t.postMessage({reset:!0}),g)g[e](),delete g[e]}}(f)}return f}),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(t,e,n){return function(t,e){return e?e(t):t}(t&&null!=t[e]?t[e]:v[e],n)}function w(t){return t<0?0:Math.floor(t)}function E(t){return parseInt(t,16)}function x(t){return t.map(S)}function S(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:E(e.substring(0,2)),g:E(e.substring(2,4)),b:E(e.substring(4,6))}}function I(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function C(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function O(t,e,n,o,s){var u,c,l=e.slice(),h=t.getContext("2d"),p=a((function(e){function a(){u=c=null,h.clearRect(0,0,o.width,o.height),s(),e()}u=m.frame((function e(){!r||o.width===i.width&&o.height===i.height||(o.width=t.width=i.width,o.height=t.height=i.height),o.width||o.height||(n(t),o.width=t.width,o.height=t.height),h.clearRect(0,0,o.width,o.height),l=l.filter((function(t){return function(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.wobble+=e.wobbleSpeed,e.velocity*=e.decay,e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble);var n=e.tick++/e.totalTicks,r=e.x+e.random*e.tiltCos,i=e.y+e.random*e.tiltSin,o=e.wobbleX+e.random*e.tiltCos,s=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",t.beginPath(),"circle"===e.shape)t.ellipse?t.ellipse(e.x,e.y,Math.abs(o-r)*e.ovalScalar,Math.abs(s-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):function(t,e,n,r,i,o,s,a,u){t.save(),t.translate(e,n),t.rotate(o),t.scale(r,i),t.arc(0,0,1,s,a,u),t.restore()}(t,e.x,e.y,Math.abs(o-r)*e.ovalScalar,Math.abs(s-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if("star"===e.shape)for(var a=Math.PI/2*3,u=4*e.scalar,c=8*e.scalar,l=e.x,h=e.y,p=5,f=Math.PI/p;p--;)l=e.x+Math.cos(a)*c,h=e.y+Math.sin(a)*c,t.lineTo(l,h),a+=f,l=e.x+Math.cos(a)*u,h=e.y+Math.sin(a)*u,t.lineTo(l,h),a+=f;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(i)),t.lineTo(Math.floor(o),Math.floor(s)),t.lineTo(Math.floor(r),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}(h,t)})),l.length?u=m.frame(e):a()})),c=a}));return{addFettis:function(t){return l=l.concat(t),p},canvas:t,promise:p,reset:function(){u&&m.cancel(u),c&&c()}}}function T(t,n){var r,i=!t,s=!!b(n||{},"resize"),u=b(n,"disableForReducedMotion",Boolean),c=o&&!!b(n||{},"useWorker")?_():null,l=i?I:C,h=!(!t||!c)&&!!t.__confetti_initialized,p="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function f(e,n,i){for(var o,s,a,u,c,h=b(e,"particleCount",w),p=b(e,"angle",Number),f=b(e,"spread",Number),d=b(e,"startVelocity",Number),g=b(e,"decay",Number),y=b(e,"gravity",Number),m=b(e,"drift",Number),_=b(e,"colors",x),v=b(e,"ticks",Number),E=b(e,"shapes"),S=b(e,"scalar"),I=function(t){var e=b(t,"origin",Object);return e.x=b(e,"x",Number),e.y=b(e,"y",Number),e}(e),C=h,T=[],P=t.width*I.x,N=t.height*I.y;C--;)T.push((o={x:P,y:N,angle:p,spread:f,startVelocity:d,color:_[C%_.length],shape:E[(u=0,c=E.length,Math.floor(Math.random()*(c-u))+u)],ticks:v,decay:g,gravity:y,drift:m,scalar:S},s=void 0,a=void 0,s=o.angle*(Math.PI/180),a=o.spread*(Math.PI/180),{x:o.x,y:o.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*o.startVelocity+Math.random()*o.startVelocity,angle2D:-s+(.5*a-Math.random()*a),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:o.color,shape:o.shape,tick:0,totalTicks:o.ticks,decay:o.decay,drift:o.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*o.gravity,ovalScalar:.6,scalar:o.scalar}));return r?r.addFettis(T):(r=O(t,T,l,n,i)).promise}function d(n){var o=u||b(n,"disableForReducedMotion",Boolean),d=b(n,"zIndex",Number);if(o&&p)return a((function(t){t()}));i&&r?t=r.canvas:i&&!t&&(t=function(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}(d),document.body.appendChild(t)),s&&!h&&l(t);var g={width:t.width,height:t.height};function y(){if(c){var e={getBoundingClientRect:function(){if(!i)return t.getBoundingClientRect()}};return l(e),void c.postMessage({resize:{width:e.width,height:e.height}})}g.width=g.height=null}function m(){r=null,s&&e.removeEventListener("resize",y),i&&t&&(document.body.removeChild(t),t=null,h=!1)}return c&&!h&&c.init(t),h=!0,c&&(t.__confetti_initialized=!0),s&&e.addEventListener("resize",y,!1),c?c.fire(n,g,m):f(n,g,m)}return d.reset=function(){c&&c.reset(),r&&r.reset()},d}function P(){return y||(y=T(null,{useWorker:!0,resize:!0})),y}n.exports=function(){return P().apply(this,arguments)},n.exports.reset=function(){P().reset()},n.exports.create=T}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),B,!1);var q=B.exports,U=(B.exports.create,n(35670)),$=function(t,e){return Math.random()*(e-t)+t};function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V=function(){var t=function(t){var e=(0,_.useState)(!1),n=e[0],r=e[1];return(0,_.useEffect)((function(){var e=0,n=function(n){"Escape"!==n.key?n.key===t[e]?++e===t.length&&(r(!0),e=0):e=0:r(!1)};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[]),n}(["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"]);(0,_.useEffect)((function(){if(t){var e,n,r,i,o=(e={startVelocity:25,spread:260,ticks:60,zIndex:0,particleCount:30,shapes:["star"],colors:[U.Z.colorsRefont.brand500,U.Z.colorsRefont.brandSecondary500,U.Z.colorsRefont.brandTertiary500]},n=setInterval((function(){Math.random()<.5||(q(G(G({},e),{},{origin:{x:$(.1,.3),y:Math.random()-.2}})),q(G(G({},e),{},{origin:{x:$(.7,.9),y:Math.random()-.2}})))}),350),function(){clearInterval(n)}),s=(r=Date.now(),i=function(t){Date.now()-r<25||(r=Date.now(),q({particleCount:3,spread:100,startVelocity:5,origin:{x:t.clientX/window.innerWidth,y:t.clientY/window.innerHeight}}))},window.addEventListener("mousemove",i),function(){window.removeEventListener("mousemove",i)});return function(){o(),s()}}}),[t])},Y=n(35778),Z=n(49748),H=n(27484),X=n.n(H),W=n(70178),K=n.n(W),Q=n(29387),J=n.n(Q),tt=n(16835);function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rt=/^(.*)([+-])(\d{2}):(\d{2})|(Z)$/,it=function(t,e,n){n.parseZone=function(t,e,r,i){if("string"==typeof e&&(e={format:e}),"string"!=typeof t)return n(t,e,r,i);var o=t.match(rt);if(null===o)return n(t,{$offset:0});if("Z"===o[0])return n(t,nt({utc:!0},e),r,i);var s=(0,tt.Z)(o,2)[1],a=function(t){var e=(0,tt.Z)(t,5),n=e[2],r=e[3],i=e[4],o=60*parseInt(r,10)+parseInt(i,10);return"+"===n?o:-o}(o);return n(s,nt({$offset:a},e),r,i)}},ot=(n(96023),n(55488),n(21100),n(58449)),st=n(22906),at=n(86820),ut=n(85893);function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht=new class{constructor(t={}){this.queryCache=t.queryCache||new O,this.mutationCache=t.mutationCache||new P,this.logger=t.logger||w._,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=N.j.subscribe((()=>{N.j.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=R.N.subscribe((()=>{R.N.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())})))}unmount(){var t,e;this.mountCount--,0===this.mountCount&&(null==(t=this.unsubscribeFocus)||t.call(this),this.unsubscribeFocus=void 0,null==(e=this.unsubscribeOnline)||e.call(this),this.unsubscribeOnline=void 0)}isFetching(t,e){const[n]=(0,b.I6)(t,e);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,e){var n;return null==(n=this.queryCache.find(t,e))?void 0:n.state.data}ensureQueryData(t,e,n){const r=(0,b._v)(t,e,n),i=this.getQueryData(r.queryKey);return i?Promise.resolve(i):this.fetchQuery(r)}getQueriesData(t){return this.getQueryCache().findAll(t).map((({queryKey:t,state:e})=>[t,e.data]))}setQueryData(t,e,n){const r=this.queryCache.find(t),i=null==r?void 0:r.state.data,o=(0,b.SE)(e,i);if(void 0===o)return;const s=(0,b._v)(t),a=this.defaultQueryOptions(s);return this.queryCache.build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return E.V.batch((()=>this.getQueryCache().findAll(t).map((({queryKey:t})=>[t,this.setQueryData(t,e,n)]))))}getQueryState(t,e){var n;return null==(n=this.queryCache.find(t,e))?void 0:n.state}removeQueries(t,e){const[n]=(0,b.I6)(t,e),r=this.queryCache;E.V.batch((()=>{r.findAll(n).forEach((t=>{r.remove(t)}))}))}resetQueries(t,e,n){const[r,i]=(0,b.I6)(t,e,n),o=this.queryCache,s={type:"active",...r};return E.V.batch((()=>(o.findAll(r).forEach((t=>{t.reset()})),this.refetchQueries(s,i))))}cancelQueries(t,e,n){const[r,i={}]=(0,b.I6)(t,e,n);void 0===i.revert&&(i.revert=!0);const o=E.V.batch((()=>this.queryCache.findAll(r).map((t=>t.cancel(i)))));return Promise.all(o).then(b.ZT).catch(b.ZT)}invalidateQueries(t,e,n){const[r,i]=(0,b.I6)(t,e,n);return E.V.batch((()=>{var t,e;if(this.queryCache.findAll(r).forEach((t=>{t.invalidate()})),"none"===r.refetchType)return Promise.resolve();const n={...r,type:null!=(t=null!=(e=r.refetchType)?e:r.type)?t:"active"};return this.refetchQueries(n,i)}))}refetchQueries(t,e,n){const[r,i]=(0,b.I6)(t,e,n),o=E.V.batch((()=>this.queryCache.findAll(r).filter((t=>!t.isDisabled())).map((t=>{var e;return t.fetch(void 0,{...i,cancelRefetch:null==(e=null==i?void 0:i.cancelRefetch)||e,meta:{refetchPage:r.refetchPage}})}))));let s=Promise.all(o).then(b.ZT);return null!=i&&i.throwOnError||(s=s.catch(b.ZT)),s}fetchQuery(t,e,n){const r=(0,b._v)(t,e,n),i=this.defaultQueryOptions(r);void 0===i.retry&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(t,e,n){return this.fetchQuery(t,e,n).then(b.ZT).catch(b.ZT)}fetchInfiniteQuery(t,e,n){const r=(0,b._v)(t,e,n);return r.behavior=A(),this.fetchQuery(r)}prefetchInfiniteQuery(t,e,n){return this.fetchInfiniteQuery(t,e,n).then(b.ZT).catch(b.ZT)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,e){const n=this.queryDefaults.find((e=>(0,b.yF)(t)===(0,b.yF)(e.queryKey)));n?n.defaultOptions=e:this.queryDefaults.push({queryKey:t,defaultOptions:e})}getQueryDefaults(t){if(!t)return;const e=this.queryDefaults.find((e=>(0,b.to)(t,e.queryKey)));return null==e?void 0:e.defaultOptions}setMutationDefaults(t,e){const n=this.mutationDefaults.find((e=>(0,b.yF)(t)===(0,b.yF)(e.mutationKey)));n?n.defaultOptions=e:this.mutationDefaults.push({mutationKey:t,defaultOptions:e})}getMutationDefaults(t){if(!t)return;const e=this.mutationDefaults.find((e=>(0,b.to)(t,e.mutationKey)));return null==e?void 0:e.defaultOptions}defaultQueryOptions(t){if(null!=t&&t._defaulted)return t;const e={...this.defaultOptions.queries,...this.getQueryDefaults(null==t?void 0:t.queryKey),...t,_defaulted:!0};return!e.queryHash&&e.queryKey&&(e.queryHash=(0,b.Rm)(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.useErrorBoundary&&(e.useErrorBoundary=!!e.suspense),e}defaultMutationOptions(t){return null!=t&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==t?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}({defaultOptions:{queries:{refetchOnMount:!1,staleTime:3e4}}}),pt=function(t){var e,n,i,o,a,g=t.Component,b=t.pageProps;V(),a=(0,Z.$0)((function(t){return Boolean(t.coral.session)})),(0,Z.VU)((function(t){if(a){t(),Y.cp.events.storefront.open();var e=function(){return Y.cp.events.storefront.close()},n=function(){return Y.cp.events.storefront.focus()},r=function(){return Y.cp.events.storefront.unfocus()};return addEventListener("beforeunload",e),addEventListener("focus",n),addEventListener("blur",r),function(){removeEventListener("beforeunload",e),removeEventListener("focus",n),removeEventListener("blur",r)}}}),[a]);var w=(0,m.useRouter)(),E=(0,l.Z)((function(t){return t.config})),x=(0,v.d)(),S=(0,p.f)(),I=(0,k.g)(),C=(0,h.q)(),O=(0,ot.Z)(),T=null==b?void 0:b.ssrData,P=(0,at.a)(),N=Z.O8.vouchers.useVouchers(),R=(0,st.o)(),A=(0,_.useState)(!1),D=A[0],L=A[1],M=function(){var t=(0,r.Z)(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.open(st.w.SPECIAL_COPON,{data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,_.useEffect)((function(){var t;if((null==w||null===(t=w.query)||void 0===t||!t.auth)&&!D&&N&&N.data&&N.data.length>0&&N.data.some((function(t){return t.featured&&(null==P?void 0:P.user)}))){var e=N.data.filter((function(t){return t.featured&&!t.expired})).sort((function(t,e){return t.featuredOrder-e.featuredOrder}));if(e&&e.length>0){var n=localStorage.getItem("lastOpenedTimestamp"+P.user.id),r=(new Date).getDate(),i=n?parseInt(n,10):0;i&&r===i||(L(!0),M(e))}}}),[P.user,N.data,w]),(0,_.useLayoutEffect)((function(){var t,e,n,r,i=P.token,o=null!==(t=null===(e=P.user)||void 0===e?void 0:e.id)&&void 0!==t?t:null;Y.Dp.update((function(t){t.wynd.url=E.apiUrl,t.coral.url="".concat(E.apiUrl,"/coral"),t.coral.session={token:i,userID:o},t.kaalix.url=E.kaalixUrl,t.kaalix.username=E.kaalixUsername,t.kaalix.password=E.kaalixPassword})),c.ZP.config.setConfig({apiUrl:E.apiUrl,marjaneApiKey:E.marjaneApiKey,requestMiddleware:d.d}),E.ramadanProtect&&(r=null!==(n=l.Z.getState().config.ramadanProtectKeyword)&&void 0!==n?n:"cat",new MutationObserver((function(t){t.forEach((function(t){var e=[];if(t.target){var n=t.target;e.push(n),e.push.apply(e,(0,F.Z)(n.querySelectorAll("img")))}e.forEach((function(t){if(t.src&&t.src.includes("cloudinary.com")){var e=t.getBoundingClientRect(),n=e.width,i=void 0===n?400:n,o=e.height,s=void 0===o?400:o,a=Math.floor(1e3*Math.random())+Date.now();t.src="https://loremflickr.com/".concat(i||s,"/").concat(s||i,"/").concat(r,"?cacheKey=").concat(a)}}))}))})).observe(document.body,{attributes:!0,attributeFilter:["src"],childList:!0,subtree:!0}))}),[E]),Y.Dp.update((function(t){t.wynd.url=E.apiUrl,t.coral.url="".concat(E.apiUrl,"/coral")})),(0,_.useEffect)((function(){x.init(),X().locale("fr"),X().extend(K()),X().extend(J()),X().extend(it),w.events.on("routeChangeComplete",(function(t){S.reset(),(0,f.Kz)("screen_view",{firebase_screen:t,firebase_screen_class:t})}));var t=function(){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"))};t(),addEventListener("resize",t);var e=setInterval((function(){new Date(j.X.getState().lastChange).getTime()+108e5<=(new Date).getTime()&&(I.clear(),C.reset())}),1e4);return function(){removeEventListener("resize",t),clearInterval(e)}}),[]),(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsxs)(y(),{children:[(0,ut.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1",className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])}),(0,ut.jsx)("link",{rel:"shortcut icon",href:"/favicon.png",className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])}),(0,ut.jsx)("meta",{name:"apple-itunes-app",content:"app-id=1479977535",className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])}),(0,ut.jsx)("meta",{name:"google-site-verification",content:E.googleSiteVerificationKey,className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])}),(0,ut.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])})]}),(0,ut.jsx)(g,lt(lt({},b),{},{className:s().dynamic([["3476325292",[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"]]])+" "+(b&&null!=b.className&&b.className||"")})),(0,ut.jsx)(s(),{id:"3476325292",dynamic:[null!=T&&null!==(e=T.page)&&void 0!==e&&null!==(n=e.translations)&&void 0!==n&&n.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr"],children:"body{direction:".concat(null!=T&&null!==(i=T.page)&&void 0!==i&&null!==(o=i.translations)&&void 0!==o&&o.some((function(t){return"ar-MA"===t.code}))?O.direction:"ltr",";}")})]})},ft=function(t){return(0,ut.jsx)(M.aH,{client:ht,children:(0,ut.jsx)(pt,lt({},t))})}},86820:function(t,e,n){"use strict";n.d(e,{a:function(){return b}});var r=n(50029),i=n(59499),o=n(87794),s=n.n(o),a=n(35778),u=n(96568),c=n(72929),l=n(14671),h=n(38597),p=n(44686),f=n(66369),d=n(33969),g=n(94632),y=n(4819);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={token:null,isLoggedIn:!1,user:null,currentStep:0,isLoading:!0},b=(0,l.Z)((0,h.tJ)((function(t,e){return _(_({},v),{},{login:function(n){var r=e();u.ZP.config.setConfig({token:n}),a.Dp.update((function(t){t.wynd.session={token:n},t.coral.session={token:n,userID:null}})),t(_(_({},r),{},{isLoggedIn:!0,token:n,isLoading:!1})),r.refreshUserData()},logout:(i=(0,r.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f.q.getState().reset(),d.X.getState().clear(),d.X.getState().clearPendingProducts(),d.X.getState().clearProducts(),p.Mg.getState().reset(),n.next=7,(0,y.L)();case 7:r=n.sent,u.ZP.config.setConfig({token:r}),a.Dp.update((function(t){t.wynd.session={token:r},t.coral.session={token:r,userID:null}})),t(_(_({},e()),{},{token:r,isLoggedIn:!1,isLoading:!1,user:null}));case 11:case"end":return n.stop()}}),n)}))),function(){return i.apply(this,arguments)}),refreshUserData:(n=(0,r.Z)(s().mark((function n(r){var i,o,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r){n.next=3;break}return t(_(_({},e()),{},{isLoading:!1,user:r})),n.abrupt("return");case 3:return n.prev=3,n.next=6,u.ZP.requests.registerCheck();case 6:i=n.sent,o=i.data,l=e(),o&&l.isLoggedIn&&(a.Dp.update((function(t){t.coral.session.userID=o.id})),t(_(_({},l),{},{user:o,isLoading:!1}))),l.user&&(0,g.yV)(l.user.phone),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),c.k.error(n.t0);case 16:return n.prev=16,t(_(_({},e()),{},{isLoading:!1})),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[3,13,16,19]])}))),function(t){return n.apply(this,arguments)}),setToken:function(n){u.ZP.config.setConfig({token:n}),a.Dp.update((function(t){t.wynd.session={token:n},t.coral.session={token:n,userID:null}})),t(_(_({},e()),{},{isLoading:!1,token:n}))},setCurrentStep:function(e){t({currentStep:e})},setIsLoading:function(e){t({isLoading:e})}});var n,i}),{name:"auth",version:1}))},44686:function(t,e,n){"use strict";n.d(e,{Mg:function(){return P},bQ:function(){return C},zd:function(){return O}});var r=n(59499),i=n(50029),o=n(87794),s=n.n(o),a=n(36222),u=n(92455),c=n(12747),l=n(69335),h=n(88752),p=n(96568),f=n(28610),d=n(6915),g=n(27484),y=n.n(g),m=n(14671),_=n(38597),v=n(86820),b=n(66369),w=n(22906),E=n(87228);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=function(){var t=(0,i.Z)(s().mark((function t(){var e,n,r,i,o,a,u,c,l,h,f,d,g,y;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e={address_inline:"",complement:"",street_number:"",street_name:"",postal_code:"",city:"",country:{id:12},region:null,telephone:"",mail:"",firstname:"",lastname:"",longitude:null,latitude:null},n=v.a.getState(),r=n.user,"CLICK_AND_COLLECT"!==(i=b.q.getState()).deliveryType){t.next=14;break}return t.next=6,p.ZP.requests.getStore(i.CLICK_AND_COLLECT.storeId);case 6:o=t.sent,delete(a=o.data.entity_address).id,delete a.uuid,delete a.country.vat_rates,e=S(S({},e),a),t.next=15;break;case 14:e=S(S({},e),{},{mail:null!==(u=null==r?void 0:r.email)&&void 0!==u?u:"",address_inline:i.DELIVERY.address,telephone:null!==(c=i.DELIVERY.tel)&&void 0!==c?c:r.phone,firstname:null!==(l=i.DELIVERY.firstname)&&void 0!==l?l:r.firstname,lastname:null!==(h=i.DELIVERY.lastname)&&void 0!==h?h:r.lastname,longitude:null!==(f=null===(d=i.DELIVERY.lng)||void 0===d?void 0:d.toString())&&void 0!==f?f:null,latitude:null!==(g=null===(y=i.DELIVERY.lat)||void 0===y?void 0:y.toString())&&void 0!==g?g:null});case 15:return t.abrupt("return",e);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=(0,i.Z)(s().mark((function t(){var e,n,r,i,o,a,u,l,h;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("DELIVERY_EXPRESS"!==(e=b.q.getState()).deliveryType){t.next=12;break}return t.next=4,p.ZP.requests.getMoroccoTime();case 4:return r=t.sent,t.next=7,p.ZP.requests.getLexDeliveryConfig();case 7:return i=t.sent,o=y().parseZone(r.data),a=(a=y().parseZone(r.data)).minute(null!==(n=a.minute()+i.data.lex_delivery_time)&&void 0!==n?n:60),t.abrupt("return",{start:o.format(),end:a.format()});case 12:return u=(0,c.We)(e),t.next=15,p.ZP.requests.getBookingMarjane(u.storeId,u.type);case 15:return l=t.sent,h=l.data.data[0],t.abrupt("return",{start:null==h?void 0:h.dateDebutCreneau,end:null==h?void 0:h.dateFinCreneau});case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=(0,i.Z)(s().mark((function t(){var e,n,r,i,o,a,c,l,h,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=v.a.getState(),i=r.user,o=b.q.getState(),a=u.O.getState(),t.next=5,I();case 5:return c=t.sent,t.next=8,p.ZP.requests.getDestinations();case 8:return l=t.sent,h=l.data.find((function(t){return t.code===o.deliveryType})),(f=new Date).setHours(f.getHours()+4),t.abrupt("return",{entity:{id:o.storeId},user:{id:1},channel:{id:2},device:{id:1},destination:{id:null==h?void 0:h.id},bank_account:{id:1},customer:(null==i?void 0:i.id)&&{id:i.id},content:[],pot_payment:0===a.amountUsed?void 0:a.amountUsed,order_number:"order_number",delivery_address:c,distance:+(null==o||null===(e=o.modesAvailable)||void 0===e||null===(n=e.livraisonExpress)||void 0===n?void 0:n.distance)||0});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=(0,i.Z)(s().mark((function t(){var e,n,r,i,o,a,u,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=P.getState(),n=l.DA.getState(),r=n.savePaymentMethod,i=v.a.getState(),o=i.user,t.next=5,p.ZP.requests.getOrder(e.orderUUID);case 5:return a=t.sent,u=a.data,t.next=9,(0,E.d)({customerId:o.id,orderUuid:u.uuid,type:"checkout",saveCard:r});case 9:return c=t.sent,t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=(0,m.Z)((0,_.tJ)((function(t,e){return{orderUUID:"",initialized:!1,initialize:(r=(0,i.Z)(s().mark((function n(r){var i,o,u,c,l,h,f,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e(),o=b.q.getState(),n.next=4,O();case 4:if(u=n.sent,c=S(S({},u),{},{content:(0,a.M)(r)}),i.initialized&&(!i.initialized||"DELIVERY_EXPRESS"!==o.deliveryType)){n.next=12;break}return n.next=9,C();case 9:l=n.sent,c.due_date_start=l.start,c.due_date=l.end;case 12:if(!i.initialized){n.next=19;break}return n.next=15,p.ZP.requests.updateOrder(i.orderUUID,c);case 15:f=n.sent,h=f.data,n.next=23;break;case 19:return n.next=21,p.ZP.requests.createOrder(c);case 21:d=n.sent,h=d.data;case 23:return t({initialized:!0,orderUUID:h.uuid}),n.abrupt("return",h.uuid);case 25:case"end":return n.stop()}}),n)}))),function(t){return r.apply(this,arguments)}),submit:(n=(0,i.Z)(s().mark((function t(){var n,r,i,o,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e(),r=l.DA.getState(),i=r.paymentMethod,o=w.o.getState(),!(i.type in h.K)&&i.type!==l.O6.Cash){t.next=7;break}location.href=d.Z.checkout.confirmationSuccess(n.orderUUID),t.next=14;break;case 7:return t.next=9,o.open(w.w.SAVE_CREDIT_CARD);case 9:return t.next=11,T();case 11:a=t.sent,(0,f.E)({method:"POST",url:a}).submit();case 14:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),reset:function(){u.O.getState().reset(),l.DA.getState().reset(),t({initialized:!1,orderUUID:""})}};var n,r}),{name:"checkout"}))},90362:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(11752),i=n.n(r),o=(0,n(14671).Z)((function(t){return{config:i()().publicRuntimeConfig,setConfig:function(e){return t({config:e})}}}))},8112:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(14671),i=function(t){return function(){t({current:innerWidth})}},o=(0,r.Z)((function(t){return{current:0,init:function(){i(t)(),window.addEventListener("resize",i(t))}}}))},66369:function(t,e,n){"use strict";n.d(e,{q:function(){return l}});var r=n(59499),i=n(14671),o=n(38597),s=n(44686);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={DELIVERY:{firstname:null,lastname:null,tel:null,address:null,lat:null,lng:null,addressDetails:null,storeId:null,distance:null},PENDINGDELIVERY:{firstname:null,lastname:null,tel:null,address:null,lat:null,lng:null,addressDetails:null,storeId:null,distance:null},CLICK_AND_COLLECT:{storeId:null,storeName:null},deliveryType:null,modesAvailable:null,noFoodModeAvailable:null,storeId:1,isPending:!1},l=(0,i.Z)((0,o.tJ)((function(t,e){return u(u({},c),{},{setHomeDelivery:function(n){return t(u(u({},e()),{},{DELIVERY:n}))},setPendingHomeDelivery:function(n){return t(u(u({},e()),{},{PENDINGDELIVERY:n,isPending:!0}))},setClickAndCollect:function(n){return t(u(u({},e()),{},{CLICK_AND_COLLECT:n}))},setModesAvailable:function(n){return t(u(u({},e()),{},{modesAvailable:n}))},setNoFoodModeAvailable:function(n){return t(u(u({},e()),{},{noFoodModeAvailable:n}))},reset:function(){return t(u({},c))},resetPending:function(){return t(u(u({},e()),{},{PENDINGDELIVERY:c.PENDINGDELIVERY,isPending:!1}))},setDeliveryType:function(n){var r,i,o=e(),a=o.isPending?o.PENDINGDELIVERY:o.DELIVERY,l="DELIVERY_EXPRESS"===n?null===(r=o.modesAvailable)||void 0===r?void 0:r.livraisonExpress.siteIdWynd:"DELIVERY"===n?null===(i=o.modesAvailable)||void 0===i?void 0:i.livraisonStandard.siteIdWynd:"CLICK_AND_COLLECT"===n?o.CLICK_AND_COLLECT.storeId:1;o.deliveryType!==n&&s.Mg.getState().reset(),t(u(u({},o),{},{DELIVERY:a,storeId:l,deliveryType:n,isPending:!1,PENDINGDELIVERY:c.PENDINGDELIVERY}))},setHomeDeliveryStoreAndDistance:function(n,r){var i=e();t(u(u({},i),{},{DELIVERY:u(u({},i.DELIVERY),{},{storeId:n,distance:r})}))}})}),{name:"delivery",version:2,migrate:function(t,e){return 1===e&&(t.CLICK_AND_COLLECT=t.TAKEAWAY,"TAKEAWAY"===t.deliveryType&&(t.deliveryType="CLICK_AND_COLLECT"),delete t.TAKEAWAY),t}}))},71250:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var r=n(59499),i=n(14671);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a={mobileMenuBurger:!1,deliveryDropdown:!1,expressDropdown:!1,homedeliveryDropdown:!1,menuDropdown:!1,storesMenuMap:!1,scanSearch:!1},u=(0,i.Z)((function(t,e){return s(s({},a),{},{setIsOpen:function(n,i){return t(s(s({},e()),{},(0,r.Z)({},n,i)))},reset:function(){return t(s({},a))}})}))},22906:function(t,e,n){"use strict";n.d(e,{w:function(){return u},o:function(){return l}});var r=n(27812);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(59499),s=n(22838),a=n(14671),u={REMOVE_FROM_CART:"REMOVE_FROM_CART",PRODUCT_QUANTITY_LIMIT:"PRODUCT_QUANTITY_LIMIT",SWITCH_TO_DELIVERY_STD:"SWITCH_TO_DELIVERY_STD",SWITCH_TO_DELIVERY_EXPRESS:" SWITCH_TO_DELIVERY_EXPRESS",INCOMPATIBLE_PRODUCTS:"INCOMPATIBLE_PRODUCTS",EMPTY_SHOPPING_CART:"EMPTY_SHOPPING_CART",SAVE_CREDIT_CARD:"SAVE_CREDIT_CARD",NON_FOOD_MODAL:"NON_FOOD_MODAL",NON_FOOD_AVAILABLITY:"NON_FOOD_AVAILABLITY",ORDER_CANCEL:"ORDER_CANCEL",FIDELITY_MODAL:"FIDELITY_MODAL",INFO_MODAL:"SAV_FAQ_MODAL",SAV_SEND_MESSAGE_MODAL:"SAV_SEND_MESSAGE_MODAL",SPECIAL_COPON:"SPECIAL_COPON",SECTOR_M_MAP_MODAL:"SECTOR_M_MAP_MODAL",SECTOR_M_IMAGE_MODAL:"SECTOR_M_IMAGE_MODAL",PRODUCT_DESCRIPTION:"PRODUCT_DESCRIPTION",SECTOR_M_VIDEO_MODAL:"SECTOR_M_VIDEO_MODAL",SECTOR_M_ADVANTAGES:"SECTOR_M_ADVANTAGES",SAV_CONFIRMATION_MODAL:"SAV_CONFIRMATION_MODAL",SAV_INFORMATION_MODAL:"SAV_INFORMATION_MODAL",SAV_RECLAMATION_DETAILS:"SAV_RECLAMATION_DETAILS"},c=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,o.Z)(this,"type",void 0),(0,o.Z)(this,"props",void 0),(0,o.Z)(this,"promise",void 0),(0,o.Z)(this,"resolve",void 0),(0,o.Z)(this,"reject",void 0),this.type=e,this.props=n,this.promise=new Promise((function(t,e){var n=function(){l.getState().remove(r)};r.resolve=function(){t(),n()},r.reject=function(){e(),n()}}))}var e,n,r;return e=t,n=[{key:"then",value:function(){var t;return(t=this.promise).then.apply(t,arguments)}},{key:"catch",value:function(){var t;return(t=this.promise).catch.apply(t,arguments)}},{key:"finally",value:function(){var t;return(t=this.promise).finally.apply(t,arguments)}}],n&&i(e.prototype,n),r&&i(e,r),t}(),l=(0,a.Z)((function(t,e){return{modals:[],open:function(e,n){var i=new c(e,n);return t((function(t){return{modals:[].concat((0,r.Z)(t.modals),[i])}})),(0,s.D)(i)},remove:function(e){t((function(t){return{modals:t.modals.filter((function(t){return t!==e}))}}))},close:function(t){var n=e();t.resolve(),n.remove(t)},pop:function(){var t=e();t.close(t.modals[t.modals.length-1])},closeAll:function(){var t=e();t.modals.forEach((function(e){return t.close(e)}))}}}))},63221:function(t,e,n){"use strict";n.d(e,{z:function(){return a}});var r=n(27812),i=n(59499);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=(0,n(14671).Z)((function(t,e){return{notifications:[],pushNotification:function(n,i){var o=e(),a=Date.now().toString(36)+Math.random().toString(36).substr(2);return t(s(s({},o),{},{notifications:[].concat((0,r.Z)(o.notifications),[{id:a,message:n,type:i}])})),setTimeout((function(){o.removeNotification(a)}),1e4),a},removeNotification:function(n){var r=e();t(s(s({},r),{},{notifications:r.notifications.filter((function(t){return t.id!==n}))}))}}}))},33969:function(t,e,n){"use strict";n.d(e,{X:function(){return h},Y:function(){return r}});var r,i=n(27812),o=n(59499),s=n(14671),a=n(38597);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t[t.dateTime=1]="dateTime",t[t.payment=2]="payment",t[t.confirmation=3]="confirmation"}(r||(r={}));var l={products:[],pendingProducts:[],lastChange:null,orderStep:r.dateTime},h=(0,s.Z)((0,a.tJ)((function(t,e){return c(c({},l),{},{addProduct:function(n){var r=e();t({products:[].concat((0,i.Z)(r.products),[n])})},addProducts:function(n){var r=e();t({products:[].concat((0,i.Z)(r.products),(0,i.Z)(n))})},removeProduct:function(n){var r=e();t({products:r.products.filter((function(t){return t.id!==n}))})},setQuantity:function(n,r){var i=e().products.map((function(t){return t.id!==n?t:c(c({},t),{},{quantity:r})}));t({products:i})},clearProducts:function(){t({products:[]})},addPendingProduct:function(n){var r=e();t({pendingProducts:[].concat((0,i.Z)(r.pendingProducts),[n])})},addPendingProducts:function(n){var r=e();t({pendingProducts:[].concat((0,i.Z)(r.pendingProducts),(0,i.Z)(n))})},clearPendingProducts:function(){t({pendingProducts:l.pendingProducts})},clear:function(){t({products:[],pendingProducts:[]})},setStep:function(e){t({orderStep:e})}})}),{name:"shoppingCart"}));h.subscribe((function(){var t=h.getState();(!t.lastChange||new Date(t.lastChange).getTime()+1e3<=(new Date).getTime())&&h.setState(c(c({},t),{},{lastChange:(new Date).toISOString()}))}))},35670:function(t,e){"use strict";e.Z={colors:{primaryMarjane:"#0b3787",primaryMarjaneHeader:"#074e99",primaryMarjaneLight:"#dae4ef",primaryMarket:"#FC5D00",primaryMarketFlash:"#fa632b",secondary:"#fee035",secondaryLight:"#FFFDE6",background:"#ffffff",globalBackground:"#ffffff",text:"#333333",revText:"#ffffff",textSecondary:"#6e7274",textTertiary:"#dfdfdf",shadows:"rgba(7, 78, 153, 0.16)",modalBackground:"rgba(0, 0, 0, .4)",darkModalBackground:"rgba(0, 0, 0, .75)",danger:"rgb(218, 19, 19)",warning:"#f4ac44",valid:"#096a09",neutral:"#b5b8b9",platinumGray:"#e5e4e2",lightenDark:"#e9f0ff",pastilBackground:"#FEE001"},colorsRefont:{primaryMarjane:"#0D5DAA",primaryMarjaneTitle:"#0D5DAA",primaryMarjaneMarket:"#d05012",backgroundCorporate:"#F2F5FC",backgroundCatalogue:"#F0F0F0",buttonNotTomiss:"#4db723",textColor:"#666a71",misenavant:"#DFF6FE",valid:"#01BB00",redLight:"#FEDBE1",darkRed:"#84BF56",buyButton:" #fbe036",backgroundMarjane:"#EBECF6",offresMarjane:"#005DAA",storeColor:"#007BBD",pageTitleColor:"#193D8A",modalColor:"#0E3787",imbattablesAccueil:"#B0CBF6",lightGreen:"#4ba900",buttonGray:"#E2E2E266",modesTitle:"#094E99",darkGray:"#b0b3b4",dropDownTitle:"#103987",backgroundMarjaneMarket:"#F4ECE5",backgroundRecette:"#fee1df",flecheRecette:"#CF4D18",deliveryTitle:"#74787B",deliveryModalTitle:"#0D3687",categoryTitle:"#363636",headerTitleCategory:"#1ca784",orangeCorporate:"#EC6907",orangeChiffreCles:"#c1522e",lightGray:"#ededed",gray:"#f3f3f3",shadow:"rgba(0, 0, 0, 0.16)",buttonShadows:"rgba(16, 74, 130, 0.3)",lightRed:"#CC0000",greenLignt:"#06C281",brand050:"#FBFCFD",brand100:"#F5F8FB",brand175:"#E2F1FF",brand150:"#dee7f3",brand200:"#D3E3F2",brand250:"#C4CED8",brand275:"#ABBED0",brand300:"#AABDCF",brand350:"#B5CCE2",brand400:"#5A84AC",brand425:"#0D5DBD",brand450:"#025BA8",brand500:"#0055A6",brand550:"#064F99",brand575:"#064B8C",brand600:"#00376C",brand700:"#123768",brand750:"#0C2C45",brandSecondary500:"#FFE600",brandSecondary600:"#E1CB02",brandTertiary050:"#FDF7F8",brandTertiary075:"#FFE9EF",brandTertiary100:"#FFBDCE",brandTertiary500:"#DD4C67",brandTertiary600:"#DC466D",gray100:"#DADEE3",brandTertiary200:"#D3E3F2",brandTertiary300:"#F5F8FB",brandTertiary400:"#5A84AC",ntrlMin100:"#FFFFFF",ntrlMin125:"#F5F5FA",ntrlMin150:"#F7F7FC",ntrlMin175:"#F6F8FB",ntrlMin200:"#ecebeb",ntrlMin250:"#DFDFDF",ntrlMin300:"#D3D3D3",ntrlMin400:"#B5B8B9",ntrlMin500:"#A0AEC0",ntrlMin600:"#718096",ntrlMax100:"#000000",ntrlMax125:"#333333",ntrlMax150:"#111111",ntrlMax200:"#3D3D3D",ntrlMax400:"#67666B",ntlrMax500:"#74797b",error600:"#E73F3F",warning600:"#DA5018",success400:"#54B605",success500:"#15B900",success600:"#1ACF13",success650:"#22C718",success700:"#61C213",success800:"#488F0E",success900:"#096a09",brown:"#A0770C",yellow:"#FBEA2A",customerService:{whatsAppBrand500:"#4ECC5C",cellPhoneBrand500:"#E6893C",emailPrimary500:"#83BB56",emailSecondary600:"#9747FF"},greenGardient:"linear-gradient(265.66deg, rgba(87, 173, 69, 0.8) 2.93%, rgba(11, 88, 71, 0.8) 95.08%)",orangeGardient:"linear-gradient(265.66deg, rgba(211, 78, 28, 0.8) 2.93%, rgba(1, 61, 165, 0.8) 95.08%)",advantageGardian:"linear-gradient(192.66deg, rgba(87, 173, 69, 0.8) 0%, rgba(11, 88, 71, 0.8) 40.08%);"},sizing:{topNavHeight:"86px",topNavMaxWidth:"1440px",bottomNavHeight:"42px",copyrightHeight:"74px",globalSidesPadding:"20px",topNavHeightMobile:"242px",home:{bannerWidth:1440,bannerHeight:330,bannerContentWidth:550,wrapperPadding:0}},sizingRefont:{h1:"38px",h2:"26px",h3:"16px",body1:"16px",body2:"13px",title1:"21px",title2:"16px"},breakpoints:{extraLarge:1200,large:1025,minLarge:992,medium:768,small:600,extraSmall:430,verySmall:390},orderStatus:{pending:"#FF9900",validated:"#339826"}}},87228:function(t,e,n){"use strict";n.d(e,{d:function(){return f}});var r=n(59499),i=n(50029),o=n(87794),s=n.n(o),a=n(35778),u=n(6915),c=n(90362);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=function(t,e){var n=c.Z.getState().config;switch(t){case"checkout":return{okUrl:location.origin+u.Z.checkout.confirmationSuccess(e),failUrl:location.origin+u.Z.checkout.confirmationFailure(e),callbackUrl:n.apiUrl+u.Z.checkout.callback};case"refill":return{okUrl:location.origin+u.Z.wallet.refill.success,failUrl:location.origin+u.Z.wallet.refill.error,callbackUrl:n.apiUrl+u.Z.wallet.refill.callback};case"association":return{okUrl:location.origin+u.Z.association.success,failUrl:location.origin+u.Z.association.error,callbackUrl:n.apiUrl+u.Z.association.callback};default:return{okUrl:location.origin+u.Z.account.paymentMethodsSuccess,failUrl:location.origin+u.Z.account.paymentMethodsFailure,callbackUrl:n.apiUrl+u.Z.checkout.callback}}},f=function(){var t=(0,i.Z)(s().mark((function t(e){var n,r,i,o,u,c,l,f,d,g;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.customerId,r=e.orderUuid,i=e.type,o=e.saveCard,u=p(i,r),c=u.okUrl,l=u.failUrl,f=u.callbackUrl,t.next=4,a.uZ.cmi.generatePaymentUrl({params:{customer_id:n},body:h(h(h({},i&&{urlType:"checkout"===i?"order":"balance_order"}),{},{okUrl:c,failUrl:l,callbackUrl:f,saveCard:o?1:0,lang:"fr"},i&&{order:"checkout"===i&&{uuid:r}}),i&&{balanceOrder:"checkout"!==i&&{uuid:r}})});case 4:return d=t.sent,g=d.data,t.abrupt("return",g);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},22838:function(t,e,n){"use strict";n.d(e,{D:function(){return u},f:function(){return a}});var r=n(50029),i=n(27812),o=n(87794),s=n.n(o),a=function(t,e){return function(){return t.some((function(t){return null==t}))?null:e.apply(void 0,(0,i.Z)(t)).apply(void 0,arguments)}},u=function(){var t=(0,r.Z)(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return n=t.sent,t.abrupt("return",{ok:!0,data:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{ok:!1,error:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},72929:function(t,e,n){"use strict";n.d(e,{k:function(){return o}});var r=n(90362),i=!r.Z||r.Z.getState().config.debug,o={error:function(){var t;i&&(t=console).error.apply(t,arguments)},warn:function(){var t;i&&(t=console).warn.apply(t,arguments)},log:function(){var t;i&&(t=console).log.apply(t,arguments)}}},31514:function(t,e,n){"use strict";n.d(e,{KB:function(){return u},PJ:function(){return h},S:function(){return p},de:function(){return s},e$:function(){return c},m4:function(){return l},m_:function(){return f}});var r,i=n(59499),o=n(95117),s=function(t){var e=[];return t.forEach((function(t){try{if("maxQuantityExceeded"===t.property_path)return void e.push({error:o.m.LEX_MAX_QUANTITY_EXCEEDED});if("maxWeightExceeded"===t.property_path)return void e.push({error:o.m.LEX_MAX_WEIGHT_EXCEEDED});if("order.catering.assert.product.out_of_stock"===t.error){var n=t.property_path.split("_");if(2!==n.length)return;return void e.push({error:o.m.OUT_OF_STOCK,productId:parseInt(n[0],10),maxQuantity:parseInt(n[1],10)})}if("order.catering.assert.product.disabled_in_entity"===t.error)return void e.push({error:o.m.PRODUCT_DISABLED_IN_ENTITY,productId:parseInt(t.property_path,10)});if("order.catering.assert.product.not_saleable"===t.error)return void e.push({error:o.m.NOT_SALEABLE,productId:parseInt(t.property_path,10)});if("order.catering.assert.product.not_match_destination"===t.error)return void e.push({error:o.m.NOT_AVAILABLE_FOR_DESTINATION,productId:parseInt(t.property_path,10)});if("order.catering.assert.product.not_saleable_in_entity"===t.error)return void e.push({error:o.m.NOT_SALEABLE_IN_ENTITY,productId:parseInt(t.property_path,10)});if("order.catering.assert.product_category.not_visible"===t.error)return void e.push({error:o.m.CATEGORY_NOT_VISIBLE,productId:parseInt(t.property_path,10)});e.push({error:o.m.UNKNOWN,productId:null})}catch(t){}})),e},a=(r={},(0,i.Z)(r,o.m.NOT_SALEABLE,"Le produit n'est plus vendable"),(0,i.Z)(r,o.m.NOT_AVAILABLE_FOR_DESTINATION,"Le produit n'est pas compatible avec le mode de livraison sélectionné"),(0,i.Z)(r,o.m.OUT_OF_STOCK,"La quantité souhaitée n'est pas disponible"),(0,i.Z)(r,o.m.PRODUCT_DISABLED_IN_ENTITY,"Le produit ne peut pas être acheté dans le magasin sélectionné"),(0,i.Z)(r,o.m.CATEGORY_NOT_VISIBLE,"Le produit est dans une catégorie non visible du magasin sélectionné"),(0,i.Z)(r,o.m.CATEGORY_DISABLED_IN_ENTITY,"Le produit est dans une catégorie désactivée du magasin sélectionné"),r),u=function(t){return a[t.error]||"Momentanément indisponible"},c=function(t){return t.map(u)},l=function(t,e){return e.find((function(e){return e.productId===t}))},h=function(t){return Boolean(t.find((function(t){return t.error===o.m.LEX_MAX_QUANTITY_EXCEEDED})))},p=function(t){return Boolean(t.find((function(t){return t.error===o.m.LEX_MAX_WEIGHT_EXCEEDED})))},f=function(t){return Boolean(t.find((function(t){return t.error===o.m.CATEGORY_DISABLED_IN_ENTITY||t.error===o.m.CATEGORY_NOT_VISIBLE||t.error===o.m.NOT_AVAILABLE_FOR_DESTINATION||t.error===o.m.NOT_SALEABLE||t.error===o.m.NOT_SALEABLE_IN_ENTITY||t.error===o.m.OUT_OF_STOCK||t.error===o.m.PRODUCT_DISABLED_IN_ENTITY})))}},21370:function(t,e,n){"use strict";n.d(e,{SN:function(){return l},T4:function(){return r},cf:function(){return h},k9:function(){return i},mX:function(){return c},o$:function(){return u},z:function(){return o}});var r=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=parseFloat(null===(e=t)||void 0===e?void 0:e.toString()),t=null!=n&&n.noDecimal?Math.floor(+t):t.toFixed(2),"".concat(t," DH").replace(".",",")},i=function(t){var e=o(t);return 0===e||e<0?t.toString():"+"+t},o=function(t){return"number"==typeof t?t:t.includes(",")||t.includes("DH")?parseFloat(t.replace(",",".").split(" DH")[0]):parseFloat(t)},s=function(t){return{price_ttc:null==t?void 0:t.amount,vat_rate:parseFloat(null==t?void 0:t.vat_rate)}},a=function(t){return{price_ttc:t.price_ttc,vat_rate:parseFloat(t.vat_rate)}},u=function(t){var e,n,r,i,o,a,u,c=null===(e=t.prices)||void 0===e?void 0:e.main,l=s(c),h=s({amount:null!==(n=null===(r=t.prices)||void 0===r||null===(i=r.discount)||void 0===i?void 0:i.amount)&&void 0!==n?n:0,vat_rate:null!==(o=null===(a=t.prices)||void 0===a||null===(u=a.discount)||void 0===u?void 0:u.vat_rate)&&void 0!==o?o:"0"});return h.price_ttc>0?{price:h,origPrice:l}:{price:l,origPrice:null}},c=function(t){var e,n,r,i,o,s,u=null===(e=t.prices)||void 0===e?void 0:e.find((function(t){return t.is_default})),c=null===(n=t.prices)||void 0===n?void 0:n.find((function(t){return!t.is_default})),l=a(u),h=a({price_ttc:null!==(r=null!==(i=null==c?void 0:c.price_ttc)&&void 0!==i?i:null===(o=t.rewards)||void 0===o?void 0:o.new_price)&&void 0!==r?r:0,vat_rate:null!==(s=null==c?void 0:c.vat_rate)&&void 0!==s?s:"0"});return h.price_ttc>0?{price:h,origPrice:l}:{price:l,origPrice:null}},l=function(t){var e,n,r,i,o=u(t),s=o.price,a=o.origPrice,c=null!==(e=null==t||null===(n=t.prices)||void 0===n?void 0:n.pot_amount)&&void 0!==e?e:0;return{price:null!==(r=null==s?void 0:s.price_ttc)&&void 0!==r?r:0,origPrice:null!==(i=null==a?void 0:a.price_ttc)&&void 0!==i?i:0,potGain:c}},h=function(t){var e,n,r,i,o=c(t),s=o.price,a=o.origPrice,u=null!==(e=null===(n=t.rewards)||void 0===n?void 0:n.pot_amount)&&void 0!==e?e:0;return{price:null!==(r=null==s?void 0:s.price_ttc)&&void 0!==r?r:0,origPrice:null!==(i=null==a?void 0:a.price_ttc)&&void 0!==i?i:0,potGain:u}}},85486:function(t,e,n){"use strict";n.d(e,{k:function(){return r}});var r=function(){return new Promise((function(t){!function e(){var n=document.documentElement.scrollTop||document.body.scrollTop;n>0?(window.requestAnimationFrame(e),window.scrollTo(0,n-n/8)):t()}()}))}},81341:function(t,e,n){"use strict";n.d(e,{RR:function(){return r},kk:function(){return i},pv:function(){return s}});var r=function(t){return null==t?void 0:t.split(/[^0-9]/g,1)[0]},i=function(t,e,n){return n?t+"-"+o(e)+"?categoryLevel="+n:t+"-"+o(e)},o=function(t){return t.trim().replace(/(?: - |'|\/|\\|,|\?|&)/g,"").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()},s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,n,r){var i,o;return null!==(i=n)&&void 0!==i&&i.endsWith("/")||!(r<e.length-1)||null!==(o=e[r+1])&&void 0!==o&&o.startsWith("/")||(n+="/"),t+n}),"")}},85988:function(t,e,n){"use strict";n.d(e,{Rw:function(){return s},gK:function(){return o},vV:function(){return r},yf:function(){return i}});var r=function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},i=function(t){return t=t.toString(),/^\+?\d+$/.test(t)&&t.length>=11},o=function(t){return t=t.toString(),/^\+?\d+$/.test(t)&&t.length>=9},s=function(t){return null==t}},91933:function(t,e,n){"use strict";n.d(e,{CW:function(){return g},Fh:function(){return p},I3:function(){return m},Kx:function(){return h},O4:function(){return c},Rr:function(){return u},So:function(){return l},i3:function(){return f},jU:function(){return y},lR:function(){return a},oh:function(){return d},xC:function(){return _}});var r,i,o=n(59499),s=n(35778);!function(t){t.default="default",t.label_ascending="label_ascending",t.label_descending="label_descending",t.price_ascending="price_ascending",t.price_descending="price_descending",t.brand_ascending="brand_ascending",t.pertinence="pertinence",t.priority_descending="priority_descending"}(i||(i={}));var a=[s.uZ.catalog.shared.SortKeys.LABEL_ASCENDING,s.uZ.catalog.shared.SortKeys.LABEL_DESCENDING,s.uZ.catalog.shared.SortKeys.PRICE_ASCENDING,s.uZ.catalog.shared.SortKeys.PRICE_DESCENDING,s.uZ.catalog.shared.SortKeys.BRAND_ASCENDING,s.uZ.catalog.shared.SortKeys.DEFAULT,s.uZ.catalog.shared.SortKeys.PERTINENCE,s.uZ.catalog.shared.SortKeys.PRIORITY_DESCENDING],u=(r={},(0,o.Z)(r,i.label_ascending,"Nom du produit : de A à Z"),(0,o.Z)(r,i.label_descending,"Nom du produit : de Z à A"),(0,o.Z)(r,i.price_ascending,"Prix : du moins cher au plus cher"),(0,o.Z)(r,i.price_descending,"Prix : du plus cher au moins cher"),(0,o.Z)(r,i.brand_ascending,"Trier par marque"),(0,o.Z)(r,i.default,"Trier par défaut"),(0,o.Z)(r,i.pertinence,"Trier par pertinence"),(0,o.Z)(r,i.priority_descending,"Trier par priorité"),r),c=10,l=20,h=100,p=20,f=100,d="LEX",g="STD",y=20,m="BLACK",_=10485760},95117:function(t,e,n){"use strict";var r;n.d(e,{m:function(){return r}}),function(t){t.PRODUCT_DISABLED_IN_ENTITY="PRODUCT_DISABLED_IN_ENTITY",t.CATEGORY_DISABLED_IN_ENTITY="CATEGORY_DISABLED_IN_ENTITY",t.NOT_AVAILABLE_FOR_DESTINATION="NOT_AVAILABLE_FOR_DESTINATION",t.OUT_OF_STOCK="OUT_OF_STOCK",t.NOT_SALEABLE="NOT_SALEABLE",t.NOT_SALEABLE_IN_ENTITY="NOT_SALEABLE_IN_ENTITY",t.CATEGORY_NOT_VISIBLE="CATEGORY_NOT_VISIBLE",t.LEX_MAX_WEIGHT_EXCEEDED="LEX_MAX_WEIGHT_EXCEEDED",t.LEX_MAX_QUANTITY_EXCEEDED="LEX_MAX_QUANTITY_EXCEEDED",t.UNKNOWN="UNKNOWN"}(r||(r={}))},89021:function(t,e,n){"use strict";n.d(e,{tw:function(){return Tn},TK:function(){return Pn},yV:function(){return Fn},Kz:function(){return jn},fl:function(){return Mn}});var r=n(50029),i=n(87794),o=n.n(i),s=n(34155);const a=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],o=e+1<t.length,s=o?t[e+1]:0,a=e+2<t.length,u=a?t[e+2]:0,c=i>>2,l=(3&i)<<4|s>>4;let h=(15&s)<<2|u>>6,p=63&u;a||(p=64,o||(h=64)),r.push(n[c],n[l],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const s=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==o||null==s||null==a)throw new c;const u=i<<2|o>>4;if(r.push(u),64!==s){const t=o<<4&240|s>>2;if(r.push(t),64!==a){const t=s<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(t){return function(t){const e=a(t);return u.encodeByteArray(e,!0)}(t).replace(/\./g,"")},h=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const p=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return p()||(()=>{if(void 0===s||void 0===s.env)return;const t=s.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&h(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},d=()=>{var t;return null===(t=f())||void 0===t?void 0:t.config};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function y(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){try{return"object"==typeof indexedDB}catch(t){return!1}}function _(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function v(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class b extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],o=i?function(t,e){return t.replace(E,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",s=`${this.serviceName}: ${o} (${r}).`;return new b(r,s,n)}}const E=/\{\$([^}]+)}/g;function x(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],o=e[i];if(S(n)&&S(o)){if(!x(n,o))return!1}else if(n!==o)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function S(t){return null!==t&&"object"==typeof t}const I=1e3,C=2,O=144e5,T=.5;function P(t,e=I,n=C){const r=e*Math.pow(n,t),i=Math.round(T*r*(Math.random()-.5)*2);return Math.min(O,r+i)}function N(t){return t&&t._delegate?t._delegate:t}class R{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const A="[DEFAULT]";class D{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new g;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=A){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=A){return this.instances.has(t)}getOptions(t=A){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===A?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=A){return this.component?this.component.multipleInstances?t:A:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new D(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const M=[];var k;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(k||(k={}));const j={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},F=k.INFO,B={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},q=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=B[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class U{constructor(t){this.name=t,this._logLevel=F,this._logHandler=q,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in k))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?j[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...t),this._logHandler(this,k.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...t),this._logHandler(this,k.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,k.INFO,...t),this._logHandler(this,k.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,k.WARN,...t),this._logHandler(this,k.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...t),this._logHandler(this,k.ERROR,...t)}}const $=(t,e)=>e.some((e=>t instanceof e));let z,G;const V=new WeakMap,Y=new WeakMap,Z=new WeakMap,H=new WeakMap,X=new WeakMap;let W={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Y.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Z.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function K(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(tt(this),e),J(V.get(this))}:function(...e){return J(t.apply(tt(this),e))}:function(e,...n){const r=t.call(tt(this),e,...n);return Z.set(r,e.sort?e.sort():[e]),J(r)}}function Q(t){return"function"==typeof t?K(t):(t instanceof IDBTransaction&&function(t){if(Y.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));Y.set(t,e)}(t),$(t,z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,W):t)}function J(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(J(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&V.set(e,t)})).catch((()=>{})),X.set(e,t),e}(t);if(H.has(t))return H.get(t);const e=Q(t);return e!==t&&(H.set(t,e),X.set(e,t)),e}const tt=t=>X.get(t);const et=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],rt=new Map;function it(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(rt.get(e))return rt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!et.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return rt.set(e,o),o}W=(t=>({...t,get:(e,n,r)=>it(e,n)||t.get(e,n,r),has:(e,n)=>!!it(e,n)||t.has(e,n)}))(W);class ot{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const st="@firebase/app",at="0.9.13",ut=new U("@firebase/app"),ct="[DEFAULT]",lt={[st]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,pt=new Map;function ft(t,e){try{t.container.addComponent(e)}catch(n){ut.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dt(t){const e=t.name;if(pt.has(e))return ut.debug(`There were multiple attempts to register component ${e}.`),!1;pt.set(e,t);for(const e of ht.values())ft(e,t);return!0}function gt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const yt=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new R("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}function _t(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const r=Object.assign({name:ct,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw yt.create("bad-app-name",{appName:String(i)});if(n||(n=d()),!n)throw yt.create("no-options");const o=ht.get(i);if(o){if(x(n,o.options)&&x(r,o.config))return o;throw yt.create("duplicate-app",{appName:i})}const s=new L(i);for(const t of pt.values())s.addComponent(t);const a=new mt(n,r,s);return ht.set(i,a),a}function vt(t,e,n){var r;let i=null!==(r=lt[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const t=[`Unable to register library "${i}" with version "${e}":`];return o&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&t.push("and"),s&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ut.warn(t.join(" "))}dt(new R(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const bt="firebase-heartbeat-database",wt=1,Et="firebase-heartbeat-store";let xt=null;function St(){return xt||(xt=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=J(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(J(s.result),t.oldVersion,t.newVersion,J(s.transaction),t)})),n&&s.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(bt,wt,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Et)}}).catch((t=>{throw yt.create("idb-open",{originalErrorMessage:t.message})}))),xt}async function It(t,e){try{const n=(await St()).transaction(Et,"readwrite"),r=n.objectStore(Et);await r.put(e,Ct(t)),await n.done}catch(t){if(t instanceof b)ut.warn(t.message);else{const e=yt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});ut.warn(e.message)}}}function Ct(t){return`${t.name}!${t.options.appId}`}class Ot{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Pt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Tt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Tt(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),Nt(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Tt(){return(new Date).toISOString().substring(0,10)}class Pt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!m()&&_().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await St();return await e.transaction(Et).objectStore(Et).get(Ct(t))}catch(t){if(t instanceof b)ut.warn(t.message);else{const e=yt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});ut.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return It(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return It(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Nt(t){return l(JSON.stringify({version:2,heartbeats:t})).length}var Rt;Rt="",dt(new R("platform-logger",(t=>new ot(t)),"PRIVATE")),dt(new R("heartbeat",(t=>new Ot(t)),"PRIVATE")),vt(st,at,Rt),vt(st,at,"esm2017"),vt("fire-js","");const At=(t,e)=>e.some((e=>t instanceof e));let Dt,Lt;const Mt=new WeakMap,kt=new WeakMap,jt=new WeakMap,Ft=new WeakMap,Bt=new WeakMap;let qt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return kt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||jt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function Ut(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Lt||(Lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Gt(this),e),zt(Mt.get(this))}:function(...e){return zt(t.apply(Gt(this),e))}:function(e,...n){const r=t.call(Gt(this),e,...n);return jt.set(r,e.sort?e.sort():[e]),zt(r)}}function $t(t){return"function"==typeof t?Ut(t):(t instanceof IDBTransaction&&function(t){if(kt.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));kt.set(t,e)}(t),At(t,Dt||(Dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,qt):t)}function zt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(zt(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&Mt.set(e,t)})).catch((()=>{})),Bt.set(e,t),e}(t);if(Ft.has(t))return Ft.get(t);const e=$t(t);return e!==t&&(Ft.set(t,e),Bt.set(e,t)),e}const Gt=t=>Bt.get(t);const Vt=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],Zt=new Map;function Ht(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Zt.get(e))return Zt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Yt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vt.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return Zt.set(e,o),o}!function(t){qt=t(qt)}((t=>({...t,get:(e,n,r)=>Ht(e,n)||t.get(e,n,r),has:(e,n)=>!!Ht(e,n)||t.has(e,n)})));const Xt="@firebase/installations",Wt="0.6.4",Kt=1e4,Qt=`w:${Wt}`,Jt="FIS_v2",te="https://firebaseinstallations.googleapis.com/v1",ee=36e5,ne=new w("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function re(t){return t instanceof b&&t.code.includes("request-failed")}function ie({projectId:t}){return`${te}/projects/${t}/installations`}function oe(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function se(t,e){const n=(await e.json()).error;return ne.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ae({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ue(t,{refreshToken:e}){const n=ae(t);return n.append("Authorization",function(t){return`${Jt} ${t}`}(e)),n}async function ce(t){const e=await t();return e.status>=500&&e.status<600?t():e}function le(t){return new Promise((e=>{setTimeout(e,t)}))}const he=/^[cdef][\w-]{21}$/,pe="";function fe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return he.test(e)?e:pe}catch(t){return pe}}function de(t){return`${t.appName}!${t.appId}`}const ge=new Map;function ye(t,e){const n=de(t);me(n,e),function(t,e){const n=ve();n&&n.postMessage({key:t,fid:e});be()}(n,e)}function me(t,e){const n=ge.get(t);if(n)for(const t of n)t(e)}let _e=null;function ve(){return!_e&&"BroadcastChannel"in self&&(_e=new BroadcastChannel("[Firebase] FID Change"),_e.onmessage=t=>{me(t.data.key,t.data.fid)}),_e}function be(){0===ge.size&&_e&&(_e.close(),_e=null)}const we="firebase-installations-database",Ee=1,xe="firebase-installations-store";let Se=null;function Ie(){return Se||(Se=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=zt(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(zt(s.result),t.oldVersion,t.newVersion,zt(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}(we,Ee,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(xe)}})),Se}async function Ce(t,e){const n=de(t),r=(await Ie()).transaction(xe,"readwrite"),i=r.objectStore(xe),o=await i.get(n);return await i.put(e,n),await r.done,o&&o.fid===e.fid||ye(t,e.fid),e}async function Oe(t){const e=de(t),n=(await Ie()).transaction(xe,"readwrite");await n.objectStore(xe).delete(e),await n.done}async function Te(t,e){const n=de(t),r=(await Ie()).transaction(xe,"readwrite"),i=r.objectStore(xe),o=await i.get(n),s=e(o);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||o&&o.fid===s.fid||ye(t,s.fid),s}async function Pe(t){let e;const n=await Te(t.appConfig,(n=>{const r=function(t){const e=t||{fid:fe(),registrationStatus:0};return Ae(e)}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ne.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ie(t),i=ae(t),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={fid:n,authVersion:Jt,appId:t.appId,sdkVersion:Qt},a={method:"POST",headers:i,body:JSON.stringify(s)},u=await ce((()=>fetch(r,a)));if(u.ok){const t=await u.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:oe(t.authToken)}}throw await se("Create Installation",u)}(t,e);return Ce(t.appConfig,n)}catch(n){throw re(n)&&409===n.customData.serverCode?await Oe(t.appConfig):await Ce(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ne(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}));return n.fid===pe?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Ne(t){let e=await Re(t.appConfig);for(;1===e.registrationStatus;)await le(100),e=await Re(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Pe(t);return n||e}return e}function Re(t){return Te(t,(t=>{if(!t)throw ne.create("installation-not-found");return Ae(t)}))}function Ae(t){return 1===(e=t).registrationStatus&&e.registrationTime+Kt<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function De({appConfig:t,heartbeatServiceProvider:e},n){const r=function(t,{fid:e}){return`${ie(t)}/${e}/authTokens:generate`}(t,n),i=ue(t,n),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const s={installation:{sdkVersion:Qt,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},u=await ce((()=>fetch(r,a)));if(u.ok){return oe(await u.json())}throw await se("Generate Auth Token",u)}async function Le(t,e=!1){let n;const r=await Te(t.appConfig,(r=>{if(!ke(r))throw ne.create("not-registered");const i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ee}(t)}(i))return r;if(1===i.requestStatus)return n=async function(t,e){let n=await Me(t.appConfig);for(;1===n.authToken.requestStatus;)await le(100),n=await Me(t.appConfig);const r=n.authToken;return 0===r.requestStatus?Le(t,e):r}(t,e),r;{if(!navigator.onLine)throw ne.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await De(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ce(t.appConfig,r),n}catch(n){if(!re(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ce(t.appConfig,n)}else await Oe(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function Me(t){return Te(t,(t=>{if(!ke(t))throw ne.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+Kt<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function ke(t){return void 0!==t&&2===t.registrationStatus}async function je(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await Pe(t);e&&await e}(n);return(await Le(n,e)).token}function Fe(t){return ne.create("missing-app-config-values",{valueName:t})}const Be="installations",qe=t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Fe("App Configuration");if(!t.name)throw Fe("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fe(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:gt(e,"heartbeat"),_delete:()=>Promise.resolve()}},Ue=t=>{const e=gt(t.getProvider("app").getImmediate(),Be).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await Pe(e);return r?r.catch(console.error):Le(e).catch(console.error),n.fid}(e),getToken:t=>je(e,t)}};dt(new R(Be,qe,"PUBLIC")),dt(new R("installations-internal",Ue,"PRIVATE")),vt(Xt,Wt),vt(Xt,Wt,"esm2017");const $e="analytics",ze="firebase_id",Ge="origin",Ve=6e4,Ye="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ze="https://www.googletagmanager.com/gtag/js",He=new U("@firebase/analytics"),Xe=new w("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function We(t){if(!t.startsWith(Ze)){const e=Xe.create("invalid-gtag-resource",{gtagURL:t});return He.warn(e.message),""}return t}function Ke(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function Qe(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:We}),r=document.createElement("script"),i=`${Ze}?l=${t}&id=${e}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Je(t,e,n,r){return async function(i,...o){try{if("event"===i){const[r,i]=o;await async function(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=await Ke(n);for(const n of t){const t=r.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(t){He.error(t)}}(t,e,n,r,i)}else if("config"===i){const[i,s]=o;await async function(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const t=(await Ke(n)).find((t=>t.measurementId===i));t&&await e[t.appId]}}catch(t){He.error(t)}t("config",i,o)}(t,e,n,r,i,s)}else if("consent"===i){const[e]=o;t("consent","update",e)}else if("get"===i){const[e,n,r]=o;t("get",e,n,r)}else if("set"===i){const[e]=o;t("set",e)}else t(i,...o)}catch(t){He.error(t)}}}const tn=30;const en=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function nn(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function rn(t,e=en,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Xe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Xe.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sn;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Ve),on({appId:r,apiKey:i,measurementId:o},s,a,e)}async function on(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=en){var o;const{appId:s,measurementId:a}=t;try{await function(t,e){return new Promise(((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(o),r(Xe.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(r,e)}catch(t){if(a)return He.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:s,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:nn(r)},o=Ye.replace("{app-id}",n),s=await fetch(o,i);if(200!==s.status&&304!==s.status){let t="";try{const n=await s.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw Xe.create("config-fetch-failed",{httpStatus:s.status,responseMessage:t})}return s.json()}(t);return i.deleteThrottleMetadata(s),e}catch(e){const u=e;if(!function(t){if(!(t instanceof b&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(s),a)return He.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==u?void 0:u.message}]`),{appId:s,measurementId:a};throw e}const c=503===Number(null===(o=null==u?void 0:u.customData)||void 0===o?void 0:o.httpStatus)?P(n,i.intervalMillis,tn):P(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(s,l),He.debug(`Calling attemptFetch again in ${c} millis`),on(t,l,r,i)}}class sn{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let an,un;function cn(t){un=t}function ln(t){an=t}async function hn(t,e,n,r,i,o,s){var a;const u=rn(t);u.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&He.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>He.error(t))),e.push(u);const c=async function(){if(!m())return He.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await _()}catch(t){return He.warn(Xe.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?r.getId():void 0)),[l,h]=await Promise.all([u,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ze)&&n.src.includes(t))return n;return null})(o)||Qe(o,l.measurementId),un&&(i("consent","default",un),cn(void 0)),i("js",new Date);const p=null!==(a=null==s?void 0:s.config)&&void 0!==a?a:{};return p[Ge]="firebase",p.update=!0,null!=h&&(p[ze]=h),i("config",l.measurementId,p),an&&(i("set",an),ln(void 0)),l.measurementId}class pn{constructor(t){this.app=t}_delete(){return delete fn[this.app.options.appId],Promise.resolve()}}let fn={},dn=[];const gn={};let yn,mn,_n="dataLayer",vn="gtag",bn=!1;function wn(t,e,n){!function(){const t=[];if(y()&&t.push("This is a browser extension environment."),v()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Xe.create("invalid-analytics-context",{errorInfo:e});He.warn(n.message)}}();const r=t.options.appId;if(!r)throw Xe.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Xe.create("no-api-key");He.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fn[r])throw Xe.create("already-exists",{id:r});if(!bn){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(_n);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let o=function(...t){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=Je(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(fn,dn,gn,_n,vn);mn=t,yn=e,bn=!0}fn[r]=hn(t,dn,gn,e,yn,_n,n);return new pn(t)}function En(t=function(t=ct){const e=ht.get(t);if(!e&&t===ct&&d())return _t();if(!e)throw yt.create("no-app",{appName:t});return e}()){const e=gt(t=N(t),$e);return e.isInitialized()?e.getImmediate():function(t,e={}){const n=gt(t,$e);if(n.isInitialized()){const t=n.getImmediate();if(x(e,n.getOptions()))return t;throw Xe.create("already-initialized")}const r=n.initialize({options:e});return r}(t)}async function xn(){if(y())return!1;if(!v())return!1;if(!m())return!1;try{return await _()}catch(t){return!1}}function Sn(t,e,n){t=N(t),async function(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();t("config",await e,{update:!0,user_id:n})}(mn,fn[t.app.options.appId],e,n).catch((t=>He.error(t)))}function In(t,e,n,r){t=N(t),async function(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=await e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(mn,fn[t.app.options.appId],e,n,r).catch((t=>He.error(t)))}const Cn="@firebase/analytics",On="0.10.0";dt(new R($e,((t,{options:e})=>wn(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),dt(new R("analytics-internal",(function(t){try{const e=t.getProvider($e).getImmediate();return{logEvent:(t,n,r)=>In(e,t,n,r)}}catch(t){throw Xe.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),vt(Cn,On),vt(Cn,On,"esm2017");var Tn,Pn,Nn=n(22838),Rn=n(11752),An=n.n(Rn),Dn=n(72929),Ln=function(){var t=An()().publicRuntimeConfig;if("development"===t.nodeEnv)return null;var e={apiKey:t.firebaseApiKey,authDomain:t.firebaseAuthDomain,databaseURL:t.firebaseDatabaseURL,projectId:t.firebaseProjectId,storageBucket:t.firebaseStorageBucket,messagingSenderId:t.firebaseSenderId,appId:t.firebaseAppId,measurementId:t.firebaseMeasurementId};try{if(!Object.values(e).every((function(t){return void 0!==t})))throw new Error("Firebase secrets are not properly defined");return _t(e)}catch(t){return Dn.k.warn(t),null}}();!function(t){t.BUTTON_PRESSED="button_pressed",t.CATEGORY_PRESSED="category_pressed",t.CREATE_CART="create_cart",t.ADD_TO_CART="add_to_cart",t.REMOVE_FROM_CART="remove_from_cart",t.DELETE_FROM_CART="delete_from_cart",t.CLICK_ADD_CART_TO_MEMO="click_add_cart_to_memo",t.HOME_BANNER="home_banner",t.SEARCH="search",t.CLICK_PRODUCT_SEARCH="click_product_search",t.PURCHASE="purchase",t.OFFRIR_BON_ACHAT="offrir_bon_achat",t.RECHARGE_CARD="recharge_card",t.BALANCE_HISTORY="balance_history",t.VIEW_FIDELITY_CARD="view_fidelity_card",t.PIN_CODE="pin_code",t.CLICK_PRE_FIRST_ADD_TO_CART="click_pre_first_add_to_cart",t.CLICK_CATALOGUE_DETAILS="click_catalogue_details",t.CLICK_CATALOGUE_MARKET_DOWNLOAD="click_catalogue_market_download",t.CLICK_ADD_TO_MEMO="click_add_to_memo",t.CLICK_PRODUCT_SIMILAR="click_product_similar",t.DELIVERY_ADDRESS_CHOICE="delivery_address_choice",t.DELIVERY_ADDRESS_CHOSEN="delivery_address_chosen",t.HOME_DELIVERY_ADDRESS_CHOSEN="home_delivery_address_chosen",t.DELIVERY_CONTACT_INFORMATION="delivery_contact_information",t.DELIVERY_MODE_CHOSEN="delivery_mode_chosen",t.CLICK_BANNER="click_banner",t.VIEW_BANNER="view_banner",t.CLICK_COURSES_EN_LIGNE="click_courses_en_ligne",t.CLICK_VIEW_ALL_COURSES_EN_LIGNE="click_view_all_courses_en_ligne",t.CLICK_LOGIN_HOME="click_login_home",t.CLICK_CART="click_cart",t.CHOIX_DE_CRENEAU_CHECKOUT="choix_de_creneau_checkout",t.PAYMENT_METHOD_CHECKOUT="payment_method_checkout",t.CONFIRM_PAYMENT_CHECKOUT="confirm_payment_checkout",t.DETAILED_PURCHASE="detailed_purchase",t.CREATE_ACCOUNT="create_account",t.AUTHENTIFICATION_CHECKOUT="authentication_checkout",t.ACCOUNT_CREATED_SUCCESS="account_created_success",t.CHANGE_PHONE_NUMBER="change_phone_number",t.CLICK_PRODUCT_PROMO="click_product_promo",t.OFFRIR_BON_ACHAT_SUCCESS="offrir_bon_achat_success",t.CHECKOUT_ERROR="checkout_error",t.TOGGLE_DELIVERY_MODE="toggle_delivery_mode",t.CLICK_SECTOR_M_CATEGORY_VIDEO="click_sector_m_category_video",t.CLICK_SECTOR_M_CATEGORY_PRODUCERS="click_sector_m_category_producers",t.CLICK_SECTOR_M_PRODUCT_VIDEO="click_sector_m_product_video",t.CLICK_SECTOR_M_PRODUCT_PRODUCERS="click_sector_m_product_producers",t.CLICK_HEADER_TAPS_SECTOR_M="click_header_taps_sector_m",t.SECTOR_M_CATEGORY_PRESSED="sector_m_category_pressed",t.CLIC_BLOC_MON_COMPTE="clic_bloc_mon_compte",t.CLIC_RUBRIQUE_MON_COMPTE="clic_rubrique_mon_compte",t.CLIC_VISUALISER_CARTE_FIDELITE="clic_visualiser_carte_fidelite",t.CLIC_CASHBACK="clic_cashback",t.CLIC_VOIR_PROMOTIONS="clic_voir_promotions",t.CLIC_COUPONS_REDUCTION="clic_coupons_reduction",t.CLIC_SUBMIT_RECHARGE="clic_submit_recharge",t.HELP_PRESSED="help_pressed",t.FOOTER_HELP_PRESSED="footer_help_pressed",t.CLICK_HELP_ASS="click_help_ass",t.CLICK_ASS_REQUEST_VALIDATED="click_ass_request_validated",t.CLICK_ASS_REQUEST_VISITED="click_ass_request_visited"}(Tn||(Tn={})),function(t){t.DEFAULT="Default",t.HOME="Home",t.PROMOTIONS="Promotions",t.SHOPPING_LISTS="Shopping Lists",t.ONLINE_SHOPPING="Online shopping",t.PRODUCT_DETAILS="Product Details",t.CUSTOM_PRODUCTS_LISTS="Custom Products Lists",t.SHOPPING_CART="Shopping Cart",t.SIMILAR_PRODUCTS="Similar Products",t.COURSES_EN_LIGNE=" CoursesEnLigne"}(Pn||(Pn={}));var Mn="transferMethod",kn=(0,Nn.f)([Ln],(function(t){return(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn().then((function(e){return e?En(t):null}));case 2:if(!(n=e.sent)){e.next=6;break}return n.app.automaticDataCollectionEnabled=!0,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))})),jn=(0,Nn.f)([kn()],(function(t){return function(){var e=(0,r.Z)(o().mark((function e(n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.t0=In,e.next=4,t;case 4:e.t1=e.sent,e.t2=n,e.t3=r,(0,e.t0)(e.t1,e.t2,e.t3);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})),Fn=(0,Nn.f)([kn()],(function(t){return function(){var e=(0,r.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.t0=Sn,e.next=4,t;case 4:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))},94632:function(t,e,n){"use strict";n.d(e,{Kz:function(){return r.Kz},TK:function(){return r.TK},fl:function(){return r.fl},tw:function(){return r.tw},yV:function(){return r.yV}});var r=n(89021)},887:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(16835),i=function(t,e){var n=e.find((function(e){return(0,r.Z)(e,1)[0]===t}));return n?n[1]:null}},28610:function(t,e,n){"use strict";n.d(e,{E:function(){return r}});var r=function(t){var e=t.url,n=t.method,r=void 0===n?"POST":n,i=document.createElement("form");return i.setAttribute("style","opacity: 0; position: fixed; bottom: 100%; right: 100%;"),i.setAttribute("aria-hidden","true"),i.method=r,i.action=e,document.body.appendChild(i),i}},6915:function(t,e,n){"use strict";var r=n(11163),i=n.n(r),o=n(81341),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true",n=new URL((arguments.length>2?arguments[2]:void 0)||i().asPath,location.origin);return n.searchParams.has(t)?n.searchParams.delete(t):n.searchParams.append(t,e),n.href},a={home:"/",market:{home:"/market",application:"/market/application",loyaltyCard:"/market/loyalty-card",loyaltyNearYou:"/market/near-you",fresh:"/market/fresh",discounts:"/market/discounts",openedStore:"/market/opened-store"},marjaneMarket:{home:"/marjane-market/cette-semaine-chez-marjane-market"},marjane:{home:"/marjane/cette-semaine-chez-marjane",root:"/marjane"},search:function(t){return"/search/".concat(t?encodeURIComponent(t):"[text]")},homeProducts:function(t,e,n){return n&&t?"/product?firstLevel="+(0,o.kk)(t,n):e&&n?"/product?secondLevel="+(0,o.kk)(e,n):"/product"},shopFinder:"/shop-finder",deliveryMode:{root:"/delivery-mode",atHome:"/delivery-mode/at-home",atAShop:"/delivery-mode/at-a-shop"},nonFoodcategory:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[idCategory]",n=arguments.length>2?arguments[2]:void 0;return"/non-food/".concat((0,o.kk)(t,e,n))},nonFoodproduct:function(t,e,n,r){return"/non-food/".concat((0,o.kk)(t,e),"/").concat((0,o.kk)(n,r))},category:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[idCategory]",n=arguments.length>2?arguments[2]:void 0;return"/product/".concat((0,o.kk)(t,e,n))},product:function(t,e,n,r,i){return"/product/".concat((0,o.kk)(t,e),"/").concat((0,o.kk)(n,r)).concat(i?"?NAL=true":"")},productSearch:function(t,e){return"/product/search/".concat((0,o.kk)(t,e))},catalog:"/catalog",favoriteProducts:"/product/favorite-products",topPromotions:"/product/top-promotions",promotions:"/promotions",topSales:"top-sales",categoryProduct:"/product/",toggleFindStores:function(t,e){return function(t,e){var n=new URL(i().asPath,location.origin);return e&&(n.searchParams.has("findStores")?(n.searchParams.delete("findStores"),n.searchParams.delete("store")):n.searchParams.append("findStores","add"===e?"add":"true")),t&&("close"===t?n.searchParams.delete("store"):(n.searchParams.has("store")&&n.searchParams.delete("store"),n.searchParams.append("store",t))),n.href}(null==e?void 0:e.toString(),t)},toggleFindStoresMarket:function(){return s("findStoresMarket")},cart:"/cart",toggleCartDonation:function(){return s("donationCart")},toggleAuth:function(t){return s("auth",void 0,t)},toggleDonationValidation:function(t){return s("donationValidation",void 0,t)},toggleOrderConfirmation:function(t){return s("orderConfirmation",void 0,t)},toggleOrder:function(t){return s("order_number",t,"/account/orders")},checkout:{root:"/checkout",confirmationSuccess:function(t){return"/checkout/confirmation/success?oid=".concat(t)},confirmationFailure:function(t){return"/checkout/confirmation/failure?oid=".concat(t)},callback:"/payment/cmi/callback/card_register"},healthNBio:"/health-n-bio",faq:"/faq",wallet:{root:"/wallet",offers:"/wallet/offers",transfer:"/wallet/transfer",coupons:"/wallet/coupons",success:"/wallet/success",refill:{root:"/wallet/refill",myBalance:"/wallet/refill/my-balance",aFriendsBalance:"/wallet/refill/a-friends-balance",success:"/wallet/refill/success",error:"/wallet/refill/error",callback:"/payment/cmi/callback/balance_transfer/v2"}},refill:{root:"/wallet/refill",myBalance:"/wallet/refill/my-balance",aFriendsBalance:"/wallet/refill/a-friends-balance",success:"/wallet/refill/success",error:"/wallet/refill/error"},account:{root:"/account",notebook:"/account/notebook",personal:"/account/personal",phoneRecharges:"/account/phone-recharges",orders:"/account/orders",order:function(t){return"/account/orders?".concat(t)},shoppingList:"/account/shopping-list",favoriteShops:"/account/favorite-shops",favoriteProducts:"/product/favorite-products?fromPage=productsList",favoriteProductsAccount:"/product/favorite-products?fromPage=account",addresses:"/account/addresses",paymentMethods:"/account/payment-methods",paymentMethodsSuccess:"/account/payment-methods?success=true",paymentMethodsFailure:"/account/payment-methods?failure=true"},services:"/contenu/garantie-sav",comparator:"/comparator",tips:{root:"/tips",tip:function(t){return"/tips/".concat(t)}},loyaltyBenefits:"/loyalty-benefits",whoAreWe:{root:"/who-are-we",presentation:"/who-are-we/presentation",keyDates:"/who-are-we/key-dates",commitment:"/who-are-we/commitment",gcuGcs:"/who-are-we/gcu-gcs",state:"/who-are-we/state",vacationValue:"/who-are-we/vacation-value",legalMention:"/who-are-we/legal-mention"},getCurrentRoute:function(){return t=new URL(location.href),e=t.pathname,n=t.search,"".concat(e).concat("/"!==e.slice(-1)?"/":"").concat(n);var t,e,n},association:{root:"/association/",associations:"/association/associations",project:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[idProjet]";return"/association/associations/".concat((0,o.kk)(t,e))},success:"/association/success",error:"/association/error",callback:"/payment/cmi/callback/balance_transfer/v2"},findStore:"/?findStores=true",onlineShopping:"/product",orderCard:function(t){return"/account/orders?order_number=".concat(t)},customerService:{root:"/customer-service",faq:"/customer-service/faq",contact:"/customer-service/contact",requests:"/customer-service/request",afterSalesService:"/customer-service/after-sales-service",newReclamation:"/customer-service/after-sales-service/new-reclamation",request:function(t){return"/customer-service/request/".concat(t)}},sectorM:{root:"/sector-m",category:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[idCategory]";return"/sector-m/".concat((0,o.kk)(t,e))},categories:"/sector-m/categories",product:function(t,e,n,r){return"/sector-m/".concat((0,o.kk)(t,e),"/").concat((0,o.kk)(n,r))}},advantages:"/sector-m/advantages",process:"/sector-m/process"};e.Z=a},4819:function(t,e,n){"use strict";n.d(e,{L:function(){return f},d:function(){return g}});var r=n(50029),i=n(87794),o=n.n(i),s=n(35778),a=n(96568),u=n(86820),c=n(90362),l=n(63221),h=n(72929),p={init:function(){var t=this;this.pending=new Promise((function(e,n){t.resolve=e,t.reject=n}))},pending:null,resolve:null,reject:null},f=function(){var t=(0,r.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.ZP.requests.authenticateApp({username:"public_api",password:"cAcxwpDbrqc8NErP",context:"public_api"});case 2:return e=t.sent,t.abrupt("return",e.data.token);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=null,g=function(){var t=(0,r.Z)(o().mark((function t(e,n){var i,g,y,m;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("auth/authenticate"!==n&&"auth/check_token"!==n){t.next=3;break}return e(),t.abrupt("return");case 3:if(i=u.a.getState(),g=c.Z.getState().config,y=function(){var t=(0,r.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:e=t.sent,i.setToken(e),a.ZP.config.setConfig({token:e}),s.Dp.update((function(t){t.wynd.session={token:e},t.coral.session={token:e,userID:null},t.directus.url="".concat(g.apiUrl,"/cms/v2")}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=(0,r.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.token){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,a.ZP.requests.getTokenState(i.token);case 4:if(e=t.sent,!e.data.is_valid){t.next=11;break}a.ZP.config.setConfig({token:i.token}),s.Dp.update((function(t){var e,n;t.wynd.session={token:i.token},t.coral.session={token:i.token,userID:null!==(e=null===(n=i.user)||void 0===n?void 0:n.id)&&void 0!==e?e:null},t.directus.url="".concat(g.apiUrl,"/cms/v2")})),t.next=14;break;case 11:return i.logout(),t.next=14,y();case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=7,!p.pending){t.next=11;break}return t.next=11,p.pending;case 11:if(d&&!(d-1e4<=Date.now()-864e5)){t.next=22;break}if(p.init(),d=Date.now(),null==i||!i.token){t.next=19;break}return t.next=17,m();case 17:t.next=21;break;case 19:return t.next=21,y();case 21:i.setIsLoading(!1);case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t.catch(7),h.k.error(t.t0),l.z.getState().pushNotification("Une erreur est survenue au cours de l'authentification du site.","error"),t.abrupt("return");case 29:return t.prev=29,p.resolve(),t.finish(29);case 32:(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=12;break;case 5:if(t.prev=5,t.t0=t.catch(0),!(t.t0 instanceof Response)){t.next=12;break}if(!i.token){t.next=12;break}if(401!==t.t0.status){t.next=12;break}return t.next=12,m();case 12:case"end":return t.stop()}}),t,null,[[0,5]])})))();case 33:case"end":return t.stop()}}),t,null,[[7,24,29,32]])})));return function(e,n){return t.apply(this,arguments)}}()},96086:function(t){"use strict";var e=Object.assign.bind(Object);t.exports=e,t.exports.default=t.exports},6840:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(25018)}])},55488:function(){},21100:function(){},9008:function(t,e,n){t.exports=n(11597)},11163:function(t,e,n){t.exports=n(21996)},24244:function(t){"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},20609:function(t,e,n){"use strict";var r=n(4289),i=n(55559),o=n(24244),s=n(75624),a=n(52281),u=i(s(),Object);r(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},75624:function(t,e,n){"use strict";var r=n(24244);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},52281:function(t,e,n){"use strict";var r=n(75624),i=n(4289);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},18987:function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(21414),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),r=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=c&&n;if(a&&t.length>0&&!i.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(r&&t.length>0)for(var y=0;y<t.length;++y)p.push(String(y));else for(var m in t)d&&"prototype"===m||!i.call(t,m)||p.push(String(m));if(u)for(var _=function(t){if("undefined"==typeof window||!f)return h(t);try{return h(t)}catch(t){return!1}}(t),v=0;v<l.length;++v)_&&"constructor"===l[v]||!i.call(t,l[v])||p.push(l[v]);return p}}t.exports=r},82215:function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(21414),o=Object.keys,s=o?function(t){return o(t)}:n(18987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(r.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},21414:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},11895:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,u=0,c=a-1;u<a;c=u++){var l=e[n+2*u+0],h=e[n+2*u+1],p=e[n+2*c+0],f=e[n+2*c+1];h>o!=f>o&&i<(p-l)*(o-h)/(f-h)+l&&(s=!s)}return s}},26960:function(t,e,n){var r=n(11895),i=n(88139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},88139:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,u=0,c=a-1;u<a;c=u++){var l=e[u+n][0],h=e[u+n][1],p=e[c+n][0],f=e[c+n][1];h>o!=f>o&&i<(p-l)*(o-h)/(f-h)+l&&(s=!s)}return s}},32676:function(t,e,n){var r=n(34155);t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){for(var r=new i(null,null),o=r,s=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,null===(e=u).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(u=e.right,e.right=u.left,u.left=e,null===(e=u).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var o=new i(t,e);if(null===n)return o.left=o.right=null,o;var a=r(t,(n=s(t,n,r)).key);return a<0?(o.left=n.left,o.right=n,n.left=null):a>=0&&(o.right=n.right,o.left=n,n.right=null),o}function u(t,e,n){var r=null,i=null;if(e){var o=n((e=s(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function c(t,e,n){return null===e?t:(null===t||((e=s(t.key,e,n)).left=t),e)}function l(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&l(t.left,o,!1,r,i),t.right&&l(t.right,o,!0,r,i)}}var h=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=s(t,this._root,r),a=r(t,o.key);return 0===a?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=s(t,e,n)).key)?(null===e.left?r=e.right:(r=s(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&m(t,e,0,r-1,i),null===this._root)this._root=p(t,e,0,r),this._size=r;else{var o=y(this.toList(),f(t,e),i);r=this._size+r,this._root=g({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=u(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=a(e,n,s,r):o=a(e,n,o,r),this._root=c(o,s,r)},t.prototype.split=function(t){return u(t,this._root,this._comparator)},t}();function p(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],u=e[s],c=new i(a,u);return c.left=p(t,e,n,s),c.right=p(t,e,s+1,r),c}return null}function f(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}function d(t){for(var e=t,n=[],r=!1,o=new i(null,null),s=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}function g(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=g(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=g(t,i+1,n),s}return null}function y(t,e,n){for(var r=new i(null,null),o=r,s=t,a=e;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function m(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}m(t,e,n,a,i),m(t,e,a+1,r,i)}}var _=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},v=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var w=b*b,E=function(t,e){if(-b<t&&t<b&&-b<e&&e<b)return 0;var n=t-e;return n*n<w*t*e?0:t<e?-1:1},x=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new S,this.yRounder=new S}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),S=function(){function e(){t(this,e),this.tree=new h,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===E(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===E(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),I=new x,C=function(t,e){return t.x*e.y-t.y*e.x},O=function(t,e){return t.x*e.x+t.y*e.y},T=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=C(r,i);return E(o,0)},P=function(t){return Math.sqrt(O(t,t))},N=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return C(i,r)/P(i)/P(r)},R=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return O(i,r)/P(i)/P(r)},A=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},D=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},L=function(t,e,n,r){if(0===e.x)return D(n,r,t.x);if(0===r.x)return D(t,e,n.x);if(0===e.y)return A(n,r,t.y);if(0===r.y)return A(t,e,n.y);var i=C(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=C(o,e)/i,a=C(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}},M=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:j.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:N(e.point,t.point,i.point),cosine:R(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,c=a.cosine;return o>=0&&u>=0?s<c?1:s>c?-1:0:o<0&&u<0?s<c?-1:s>c?1:0:u<o?-1:u>o?1:0}}}]),e}(),k=0,j=function(){function e(n,r,i,o){t(this,e),this.id=++k,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<c)return-1;if(s>a&&s>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var y=u-s,m=i-n,_=c-a,v=o-r;if(y>m&&_<v)return 1;if(y<m&&_>v)return-1}return i>o?1:i<o||u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=v(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=_(e,s)&&0===this.comparePoint(s),c=_(n,i)&&0===t.comparePoint(i),l=_(e,a)&&0===this.comparePoint(a),h=_(n,o)&&0===t.comparePoint(o);if(c&&u)return h&&!l?o:!h&&l?a:null;if(c)return l&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&l)return null;if(h)return o;if(l)return a;var p=L(i,this.vector(),s,t.vector());return null===p?null:_(r,p)?I.round(p.x,p.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new M(t,!0),o=new M(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return M.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),M.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var c=r.rings[a],l=r.windings[a],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(l)):n.windings[h]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var c=[],l=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var f=e[h],d=f.poly;if(-1===l.indexOf(d))if(f.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=c.indexOf(f.poly);-1!==g&&c.splice(g,1)}}for(var y=0,m=c.length;y<m;y++){var _=c[y].multiPoly;-1===r.indexOf(_)&&r.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Z.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Z.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Z.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=M.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,s=-1}return new e(new M(i,!0),new M(o,!1),[r],[s])}}]),e}(),F=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=I.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,u=n.length;a<u;a++){if("number"!=typeof n[a][0]||"number"!=typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=I.round(n[a][0],n[a][1]);c.x===s.x&&c.y===s.y||(this.segments.push(j.fromRing(s,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),s=c)}o.x===s.x&&o.y===s.y||this.segments.push(j.fromRing(s,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new F(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),q=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new B(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,c=[a],l=a.point,h=[];s=a,a=u,c.push(a),a.point!==l;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var f=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var g=null,y=0,m=h.length;y<m;y++)if(h[y].point===a.point){g=y;break}if(null===g){h.push({index:c.length,point:a.point});var _=a.getLeftmostComparator(s);u=p.sort(_)[0].otherSE;break}var v=h.splice(g)[0],b=c.splice(v.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}n.push(new e(c))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==T(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===T(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,h=[],p=c;p!=l;p+=u)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];M.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),$=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),z=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new $(i));else{var o=i.enclosingRing();o.poly||e.push(new $(o)),o.poly.addInterior(i)}}return e}}]),e}(),G=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.compare;t(this,e),this.queue=n,this.tree=new h(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var c=s.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!s.isAnEndpoint(c)))for(var l=this._splitSafely(s,c),h=0,p=l.length;h<p;h++)n.push(l[h])}var f=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,m=g.length;y<m;y++)n.push(g[y])}if(null!==u||null!==f){var _=null;_=null===u?f:null===f||M.comparePoints(u,f)<=0?u:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(_),b=0,w=v.length;b<w;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var E=s.getIntersection(a);if(null!==E){if(!s.isAnEndpoint(E))for(var x=this._splitSafely(s,E),S=0,I=x.length;S<I;S++)n.push(x[S]);if(!a.isAnEndpoint(E))for(var C=this._splitSafely(a,E),O=0,T=C.length;O<T;O++)n.push(C[O])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),V=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Z=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){Z.type=t,I.reset();for(var r=[new q(e,!0)],i=0,o=n.length;i<o;i++)r.push(new q(n[i],!1));if(Z.numMultiPolys=r.length,"difference"===Z.type)for(var s=r[0],a=1;a<r.length;)null!==v(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Z.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],p=u+1,f=r.length;p<f;p++)if(null===v(l.bbox,r[p].bbox))return[];for(var d=new h(M.compare),g=0,y=r.length;g<y;g++)for(var m=r[g].getSweepEvents(),_=0,b=m.length;_<b;_++)if(d.insert(m[_]),d.size>V)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new G(d),E=d.size,x=d.pop();x;){var S=x.key;if(d.size===E){var C=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>V)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>Y)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O=w.process(S),T=0,P=O.length;T<P;T++){var N=O[T];void 0===N.consumedBy&&d.insert(N)}E=d.size,x=d.pop()}I.reset();var R=U.factory(w.segments);return new z(R).getGeom()}}]),e}()),H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Z.run("union",t,n)},X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Z.run("intersection",t,n)},W=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Z.run("xor",t,n)},K=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Z.run("difference",t,n)};return{union:H,intersection:X,xor:W,difference:K}}()},34155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&p())}function p(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},48166:function(t){t.exports=function(){"use strict";function t(t,n,i,o,s){e(t,n,i||0,o||t.length-1,s||r)}function e(t,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=r-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(a-l)/a)*(u-a/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*l/a+h)),Math.min(o,Math.floor(r+(a-u)*l/a+h)),s)}var p=t[r],f=i,d=o;for(n(t,i,r),s(t[o],p)>0&&n(t,i,o);f<d;){for(n(t,f,d),f++,d--;s(t[f],p)<0;)f++;for(;s(t[d],p)>0;)d--}0===s(t[i],p)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},65510:function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(48166);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(s=e+Math.ceil((n-e)/i/2)*i,r(t,s,e,n,o),a.push(e,s,s,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!d(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],d(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],d(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,s,a=this.data,u=this.toBBox(t),c=[],l=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=l.pop(),s=!0),a.leaf&&-1!==(i=o(t,a.children,e)))return a.children.splice(i,1),c.push(a),this._condense(c),this;s||a.leaf||!f(a,u)?r?(n++,a=r.children[n],s=!1):a=null:(c.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return s(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=g([])).leaf=!1,i.height=r;var u,c,l,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,f,this.compareMinX),u=e;u<=n;u+=f)for(y(t,u,l=Math.min(u+f-1,n),p,this.compareMinY),c=u;c<=l;c+=p)h=Math.min(c+p-1,l),i.children.push(this._build(t,c,h,r-1));return s(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,p,f,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=h(s=e.children[i]),f=t,d=s,(c=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u)<p?(p=c,l=u<l?u:l,a=s):c===p&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),u(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,u,c,l,p,f,d,g,y,m,_;for(c=l=1/0,r=e;r<=n-e;r++)i=a(t,0,r,this.toBBox),o=a(t,r,n,this.toBBox),f=i,d=o,g=void 0,y=void 0,m=void 0,_=void 0,g=Math.max(f.minX,d.minX),y=Math.max(f.minY,d.minY),m=Math.min(f.maxX,d.maxX),_=Math.min(f.maxY,d.maxY),s=Math.max(0,m-g)*Math.max(0,_-y),u=h(i)+h(o),s<c?(c=s,p=r,l=u<l?u:l):s===c&&u<l&&(l=u,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,c=a(t,0,e,s),l=a(t,n-e,n,s),h=p(c)+p(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?s(o):o),h+=p(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?s(o):o),h+=p(l);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},88639:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){let o,s,a,u,c=e[0],l=r[0],h=0,p=0;l>c==l>-c?(o=c,c=e[++h]):(o=l,l=r[++p]);let f=0;if(h<t&&p<n)for(l>c==l>-c?(a=o-((s=c+o)-c),c=e[++h]):(a=o-((s=l+o)-l),l=r[++p]),o=s,0!==a&&(i[f++]=a);h<t&&p<n;)l>c==l>-c?(a=o-((s=o+c)-(u=s-o))+(c-u),c=e[++h]):(a=o-((s=o+l)-(u=s-o))+(l-u),l=r[++p]),o=s,0!==a&&(i[f++]=a);for(;h<t;)a=o-((s=o+c)-(u=s-o))+(c-u),c=e[++h],o=s,0!==a&&(i[f++]=a);for(;p<n;)a=o-((s=o+l)-(u=s-o))+(l-u),l=r[++p],o=s,0!==a&&(i[f++]=a);return 0===o&&0!==f||(i[f++]=o),f}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,u=i(4),c=i(8),l=i(12),h=i(16),p=i(4);t.orient2d=function(t,i,f,d,g,y){const m=(i-y)*(f-g),_=(t-g)*(d-y),v=m-_;if(0===m||0===_||m>0!=_>0)return v;const b=Math.abs(m+_);return Math.abs(v)>=o*b?v:-function(t,i,o,f,d,g,y){let m,_,v,b,w,E,x,S,I,C,O,T,P,N,R,A,D,L;const M=t-d,k=o-d,j=i-g,F=f-g;w=(R=(S=M-(x=(E=e*M)-(E-M)))*(C=F-(I=(E=e*F)-(E-F)))-((N=M*F)-x*I-S*I-x*C))-(O=R-(D=(S=j-(x=(E=e*j)-(E-j)))*(C=k-(I=(E=e*k)-(E-k)))-((A=j*k)-x*I-S*I-x*C))),u[0]=R-(O+w)+(w-D),w=(P=N-((T=N+O)-(w=T-N))+(O-w))-(O=P-A),u[1]=P-(O+w)+(w-A),w=(L=T+O)-T,u[2]=T-(L-w)+(O-w),u[3]=L;let B=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,u),q=s*y;if(B>=q||-B>=q)return B;if(m=t-(M+(w=t-M))+(w-d),v=o-(k+(w=o-k))+(w-d),_=i-(j+(w=i-j))+(w-g),b=f-(F+(w=f-F))+(w-g),0===m&&0===_&&0===v&&0===b)return B;if(q=a*y+n*Math.abs(B),(B+=M*b+F*m-(j*v+k*_))>=q||-B>=q)return B;w=(R=(S=m-(x=(E=e*m)-(E-m)))*(C=F-(I=(E=e*F)-(E-F)))-((N=m*F)-x*I-S*I-x*C))-(O=R-(D=(S=_-(x=(E=e*_)-(E-_)))*(C=k-(I=(E=e*k)-(E-k)))-((A=_*k)-x*I-S*I-x*C))),p[0]=R-(O+w)+(w-D),w=(P=N-((T=N+O)-(w=T-N))+(O-w))-(O=P-A),p[1]=P-(O+w)+(w-A),w=(L=T+O)-T,p[2]=T-(L-w)+(O-w),p[3]=L;const U=r(4,u,4,p,c);w=(R=(S=M-(x=(E=e*M)-(E-M)))*(C=b-(I=(E=e*b)-(E-b)))-((N=M*b)-x*I-S*I-x*C))-(O=R-(D=(S=j-(x=(E=e*j)-(E-j)))*(C=v-(I=(E=e*v)-(E-v)))-((A=j*v)-x*I-S*I-x*C))),p[0]=R-(O+w)+(w-D),w=(P=N-((T=N+O)-(w=T-N))+(O-w))-(O=P-A),p[1]=P-(O+w)+(w-A),w=(L=T+O)-T,p[2]=T-(L-w)+(O-w),p[3]=L;const $=r(U,c,4,p,l);w=(R=(S=m-(x=(E=e*m)-(E-m)))*(C=b-(I=(E=e*b)-(E-b)))-((N=m*b)-x*I-S*I-x*C))-(O=R-(D=(S=_-(x=(E=e*_)-(E-_)))*(C=v-(I=(E=e*v)-(E-v)))-((A=_*v)-x*I-S*I-x*C))),p[0]=R-(O+w)+(w-D),w=(P=N-((T=N+O)-(w=T-N))+(O-w))-(O=P-A),p[1]=P-(O+w)+(w-A),w=(L=T+O)-T,p[2]=T-(L-w)+(O-w),p[3]=L;const z=r($,l,4,p,h);return h[z-1]}(t,i,f,d,g,y,b)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},58052:function(t,e,n){"use strict";var r=n(12296),i=n(31044)(),o=n(25972).functionsHaveConfigurableNames(),s=TypeError;t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!o||(i?r(t,"name",e,!0,!0):r(t,"name",e)),t}},85697:function(t){"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},97035:function(t,e,n){"use strict";var r=n(85697),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-->0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],s=t.length,a=t[0].length>0,u=t[Math.floor(Math.random()*s)];a&&u.join("_");for(r.push(u);r.length<e;){for(var c=[],l=r.length,h=0,p=[],f=0;f<s;f++){for(var d=1/0,g=0;g<l;g++){var y=n(t[f],r[g]);y<=d&&(d=y)}c[f]=d}for(var m=0;m<s;m++)h+=c[m];for(var _=0;_<s;_++)p[_]={i:_,v:t[_],pr:c[_]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var v=1;v<s;v++)p[v].cs=p[v-1].cs+p[v].pr;for(var b=Math.random(),w=0;w<s-1&&p[w++].cs<b;);r.push(p[w-1].v)}return r}}},21160:function(t,e,n){"use strict";var r=n(85697),i=n(97035),o=r.eudist,s=(r.mandist,r.dist,i.kmrand),a=i.kmpp;function u(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],c=[],l=[],h=[],p=!1,f=r||1e4,d=t.length,g=t[0].length,y=g>0,m=[];if(n)i="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n;else for(var _={};i.length<e;){var v=Math.floor(Math.random()*d);_[v]||(_[v]=!0,i.push(t[v]))}do{u(e,0,m);for(var b=0;b<d;b++){for(var w=1/0,E=0,x=0;x<e;x++){(h=y?o(t[b],i[x]):Math.abs(t[b]-i[x]))<=w&&(w=h,E=x)}l[b]=E,m[E]++}for(var S=[],I=(c=[],0);I<e;I++)S[I]=y?u(g,0,S[I]):0,c[I]=i[I];if(y){for(var C=0;C<e;C++)i[C]=[];for(var O=0;O<d;O++)for(var T=S[l[O]],P=t[O],N=0;N<g;N++)T[N]+=P[N];p=!0;for(var R=0;R<e;R++){for(var A=i[R],D=S[R],L=c[R],M=m[R],k=0;k<g;k++)A[k]=D[k]/M||0;if(p)for(var j=0;j<g;j++)if(L[j]!=A[j]){p=!1;break}}}else{for(var F=0;F<d;F++){S[l[F]]+=t[F]}for(var B=0;B<e;B++)i[B]=S[B]/m[B]||0;p=!0;for(var q=0;q<e;q++)if(c[q]!=i[q]){p=!1;break}}p=p||--f<=0}while(!p);return{it:1e4-f,k:e,idxs:l,centroids:i}}},43842:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return r}});class r{constructor(t=[],e=i){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const s=r+1;if(s<this.length&&n(e[s],o)<0&&(r=s,o=e[s]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},20675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?Lt:t.color}function a(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var _=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},b={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,b);var w=function(){},E=function(){},x=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},I={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new _("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new _("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[w,E,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},I.DimensionalComparator.get=function(){return C},I.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},I.NULL_ORDINATE.get=function(){return v.NaN},I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},Object.defineProperties(S,I);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new _("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,r=e,i=C.compare(n.x,r.x);if(0!==i)return i;var o=C.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,r.z)},C.prototype.interfaces_=function(){return[x]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var O=function(){};O.prototype.create=function(){},O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O};var T=function(){},P={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.toLocationSymbol=function(t){switch(t){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new _("Unknown location value: "+t)},P.INTERIOR.get=function(){return 0},P.BOUNDARY.get=function(){return 1},P.EXTERIOR.get=function(){return 2},P.NONE.get=function(){return-1},Object.defineProperties(T,P);var N=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},R=function(){},A={LOG_10:{configurable:!0}};R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.log10=function(t){var e=Math.log(t);return v.isInfinite(e)||v.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},R.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},R.wrap=function(t,e){return t<0?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},R.average=function(t,e){return(t+e)/2},A.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(R,A);var D=function(t){this.str=t};D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var L=function(t){this.value=t};L.prototype.intValue=function(){return this.value},L.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},L.isNaN=function(t){return Number.isNaN(t)};var M=function(){};M.isWhitespace=function(t){return t<=32&&t>=0||127===t},M.toUpperCase=function(t){return t.toUpperCase()};var k=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},j={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};k.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},k.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=k.magnitude(n._hi),i=k.TEN.pow(r);(n=n.divide(i)).gt(k.TEN)?(n=n.divide(k.TEN),r+=1):n.lt(k.ONE)&&(n=n.multiply(k.TEN),r-=1);for(var o=r+1,s=new D,a=k.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,s.append(h),n=n.subtract(k.valueOf(c)).multiply(k.TEN),l&&n.selfAdd(k.TEN);var p=!0,f=k.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},k.prototype.sqr=function(){return this.multiply(this)},k.prototype.doubleValue=function(){return this._hi+this._lo},k.prototype.subtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},k.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},k.prototype.isZero=function(){return 0===this._hi&&0===this._lo},k.prototype.selfSubtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},k.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},k.prototype.min=function(t){return this.le(t)?this:t},k.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,h=null;return u=this._hi/n,h=(i=(c=k.SPLIT*u)-(i=c-u))*(s=(h=k.SPLIT*n)-(s=h-n))-(l=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,h=u+(c=(this._hi-l-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+c,this}},k.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},k.prototype.divide=function(){if(arguments[0]instanceof k){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=k.SPLIT*o)-(e=s-o)),u=e*(r=(u=k.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new k(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return v.isNaN(c)?k.createNaN():k.copy(this).selfDivide(c,0)}},k.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},k.prototype.pow=function(t){if(0===t)return k.valueOf(1);var e=new k(this),n=k.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},k.prototype.ceil=function(){if(this.isNaN())return k.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new k(t,e)},k.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},k.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},k.prototype.setValue=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},k.prototype.max=function(t){return this.ge(t)?this:t},k.prototype.sqrt=function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=k.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},k.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,p=null,f=null,d=null,g=null,y=null;f=this._hi+u,h=this._lo+c,d=f-(g=f-this._hi),p=h-(y=h-this._lo);var m=(l=f+(g=(d=u-g+(this._hi-d))+h))+(g=(p=c-y+(this._lo-p))+(g+(f-l))),_=g+(l-m);return this._hi=m,this._lo=_,this}},k.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=k.SPLIT*this._hi)-this._hi,c=k.SPLIT*n,i=u-i,o=this._hi-i,s=c-n;var l=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},k.prototype.selfSqr=function(){return this.selfMultiply(this)},k.prototype.floor=function(){if(this.isNaN())return k.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new k(t,e)},k.prototype.negate=function(){return this.isNaN()?this:new k(-this._hi,-this._lo)},k.prototype.clone=function(){},k.prototype.multiply=function(){if(arguments[0]instanceof k){var t=arguments[0];return t.isNaN()?k.createNaN():k.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?k.createNaN():k.copy(this).selfMultiply(e,0)}},k.prototype.isNaN=function(){return v.isNaN(this._hi)},k.prototype.intValue=function(){return Math.trunc(this._hi)},k.prototype.toString=function(){var t=k.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},k.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+k.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+k.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},k.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=k.SPLIT*i)-(t=o-i)),n=(a=k.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new k(u,i-u+o)},k.prototype.toSciNotation=function(){if(this.isZero())return k.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=k.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},k.prototype.abs=function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)},k.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},k.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},k.prototype.add=function(){if(arguments[0]instanceof k){var t=arguments[0];return k.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return k.copy(this).selfAdd(e)}},k.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof k){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},k.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},k.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},k.prototype.trunc=function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()},k.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},k.prototype.interfaces_=function(){return[e,w,E]},k.prototype.getClass=function(){return k},k.sqr=function(t){return k.valueOf(t).selfMultiply(t)},k.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return k.parse(t)}if("number"==typeof arguments[0])return new k(arguments[0])},k.sqrt=function(t){return k.valueOf(t).sqrt()},k.parse=function(t){for(var e=0,n=t.length;M.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new k,s=0,a=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,M.isDigit(c)){var l=c-"0";o.selfMultiply(k.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=L.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var d=k.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=k.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},k.createNaN=function(){return new k(v.NaN,v.NaN)},k.copy=function(t){return new k(t)},k.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},k.stringOfChar=function(t,e){for(var n=new D,r=0;r<e;r++)n.append(t);return n.toString()},j.PI.get=function(){return new k(3.141592653589793,12246467991473532e-32)},j.TWO_PI.get=function(){return new k(6.283185307179586,24492935982947064e-32)},j.PI_2.get=function(){return new k(1.5707963267948966,6123233995736766e-32)},j.E.get=function(){return new k(2.718281828459045,14456468917292502e-32)},j.NaN.get=function(){return new k(v.NaN,v.NaN)},j.EPS.get=function(){return 123259516440783e-46},j.SPLIT.get=function(){return 134217729},j.MAX_PRINT_DIGITS.get=function(){return 32},j.TEN.get=function(){return k.valueOf(10)},j.ONE.get=function(){return k.valueOf(1)},j.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},j.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(k,j);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var r=F.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=k.valueOf(e.x).selfAdd(-t.x),o=k.valueOf(e.y).selfAdd(-t.y),s=k.valueOf(n.x).selfAdd(-e.x),a=k.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},F.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,r){var i=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(e.x).selfSubtract(t.x)),o=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),u=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=k.valueOf(t.x).selfAdd(k.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=k.valueOf(e.x).selfSubtract(t.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),p=k.valueOf(e.y).selfSubtract(t.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=k.valueOf(n.y).selfAdd(k.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new S(l,d)},F.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return F.signum(s);r=i+o}else{if(!(i<0))return F.signum(s);if(o>=0)return F.signum(s);r=-i-o}var a=F.DP_SAFE_EPSILON*r;return s>=a||-s>=a?F.signum(s):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var q=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},q.prototype.setOrdinate=function(t,e,n){},q.prototype.size=function(){},q.prototype.getOrdinate=function(t,e){},q.prototype.getCoordinate=function(){},q.prototype.getCoordinateCopy=function(t){},q.prototype.getDimension=function(){},q.prototype.getX=function(t){},q.prototype.clone=function(){},q.prototype.expandEnvelope=function(t){},q.prototype.copy=function(){},q.prototype.getY=function(t){},q.prototype.toCoordinateArray=function(){},q.prototype.interfaces_=function(){return[E]},q.prototype.getClass=function(){return q},Object.defineProperties(q,U);var $=function(){},z=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),G=function(){};G.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},G.getProperty=function(t){return{"line.separator":"\n"}[t]};var V=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,m=h.x*p.y-p.x*h.y,_=f.y-d.y,v=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-v*m,this.y=_*m-g*b,this.w=g*v-_*y}};V.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new z;return t},V.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new z;return t},V.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},V.prototype.interfaces_=function(){return[]},V.prototype.getClass=function(){return V},V.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-a*o,h=(o*c-u*s)/l,p=(a*s-i*c)/l;if(v.isNaN(h)||v.isInfinite(h)||v.isNaN(p)||v.isInfinite(p))throw new z;return new S(h,p)};var Y=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Z={serialVersionUID:{configurable:!0}};Y.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Y.prototype.equals=function(t){if(!(t instanceof Y))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Y.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Y;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Y(e,r,n,i)},Y.prototype.isNull=function(){return this._maxx<this._minx},Y.prototype.getMaxX=function(){return this._maxx},Y.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Y){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Y.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Y.prototype.getMinY=function(){return this._miny},Y.prototype.getMinX=function(){return this._minx},Y.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Y.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Y.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Y.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Y.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Y.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Y.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Y.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Y.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Y.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Y.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Y.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Y.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Y.prototype.getMaxY=function(){return this._maxy},Y.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Y.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},Y.prototype.interfaces_=function(){return[w,e]},Y.prototype.getClass=function(){return Y},Y.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u||l<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),c>u||l<a))}},Z.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Y,Z);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},X=function(t){this.geometryFactory=t||new me};X.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},X.prototype.write=function(t){return this.extractGeometry(t)},X.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!W[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+W[e].apply(this,[t])+")"};var W={coordinate:function(t){return t.x+" "+t.y},point:function(t){return W.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+W.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+W.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+W.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(H.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(H.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new X(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var J=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(J),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Y(this._inputLines[0][0],this._inputLines[0][1]),n=new Y(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Y.intersects(n,r,e)&&0===at.orientationIndex(n,r,e)&&0===at.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=V.intersection(t,n,r,i)}catch(s){if(!(s instanceof z))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=F.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);G.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&G.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),s=new S(n),a=new S(r),u=new S;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Y.intersects(e,n,r),s=Y.intersects(e,n,i),a=Y.intersects(r,i,e),u=Y.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>c?o:c)+(a<h?a:h))/2,d=((s>l?s:l)+(u<p?u:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Y.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,r),s=at.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(r,i,e),u=at.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===s?this._intPt[0]=new S(i):0===a?this._intPt[0]=new S(e):0===u&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=at.distancePointLine(t,n,r),s=at.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(r,i,o,s)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ot.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==T.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof S&&N(arguments[1],q)){for(var t=arguments[1],e=new st(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var u=o[a],c=o[a-1];if(s.countSegment(u,c),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(N(arguments[0],q)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new S,c=new S,l=new S;s.getCoordinate(0,c),s.getCoordinate(1,l);var h=c.x;l.x-=h;for(var p=0,f=1;f<a-1;f++)u.y=c.y,c.x=l.x,c.y=l.y,s.getCoordinate(f+1,l),l.x-=h,p+=c.x*(u.y-l.y);return p/2}},at.distanceLineLine=function(t,e,n,r){if(t.equals(e))return at.distancePointLine(t,n,r);if(n.equals(r))return at.distancePointLine(r,t,e);var i=!1;if(Y.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?R.min(at.distancePointLine(t,n,r),at.distancePointLine(e,n,r),at.distancePointLine(n,t,e),at.distancePointLine(r,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==T.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new _("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=at.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=at.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},at.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return at.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return at.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new _("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Y(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[E,w,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(lt,ht);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>1},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var wt=function(){};wt.prototype.hasNext=function(){},wt.prototype.next=function(){},wt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var xt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Et),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(wt),It=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],u);else for(var l=a.length-1;l>=0;l--)this.add(a[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],_=1;y>m&&(_=-1);for(var v=y;v!==m;v+=_)this.add(d[v],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(xt),Ct=function(){},Ot={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ot.ForwardComparator.get=function(){return Tt},Ot.BidirectionalComparator.get=function(){return Pt},Ot.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ct.indexOf(r,e)<0)return r}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);G.arraycopy(t,n,r,0,t.length-n),G.arraycopy(t,0,r,t.length-n,n),G.arraycopy(r,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new It,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new It(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new S(r[i+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ct.envelope=function(t){for(var e=new Y,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=R.clamp(e,0,t.length);var r=(n=R.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Ct,Ot);var Tt=function(){};Tt.prototype.compare=function(t,e){return Ct.compare(t,e)},Tt.prototype.interfaces_=function(){return[x]},Tt.prototype.getClass=function(){return Tt};var Pt=function(){};Pt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ct.compare(n,r);return Ct.isEqualReversed(n,r)?0:i},Pt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ct.increasingDirection(n),o=Ct.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},Pt.prototype.interfaces_=function(){return[x]},Pt.prototype.getClass=function(){return Pt};var Nt=function(){};Nt.prototype.get=function(){},Nt.prototype.put=function(){},Nt.prototype.size=function(){},Nt.prototype.values=function(){},Nt.prototype.entrySet=function(){};var Rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var At=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(wt),Lt=0;(h.prototype=new Rt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===c(a(a(t)))){var e=l(a(a(t)));1===s(e)?(u(a(t),Lt),u(e,Lt),u(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateLeft(t)),u(a(t),Lt),u(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=c(a(a(t)));1===s(n)?(u(a(t),Lt),u(n,Lt),u(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateRight(t)),u(a(t),Lt),u(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Lt},h.prototype.values=function(){var t=new xt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new At,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Mt=function(){};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new kt(this)};var kt=function(t){this.treeSet_=t,this.position_=0};kt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},kt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},kt.prototype.remove=function(){throw new i};var jt=function(){};jt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},jt.asList=function(t){for(var e=new xt,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new _("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(M.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new _("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var qt=function(){};qt.prototype.filter=function(t){},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var $t=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Y,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(jt.asList(this._geometries)),n=new f(jt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),c=i.getGeometryN(a),l=u.compareToSameClass(c,r);if(0!==l)return l;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(N(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(N(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],qt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(N(arguments[0],ct)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),zt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Mt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}($t),Gt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Gt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Gt.prototype.getBoundary=function(){return this._geom instanceof Xt?this.boundaryLineString(this._geom):this._geom instanceof zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Gt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gt.prototype.computeBoundaryCoordinates=function(t){var e=new xt;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Gt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Vt,this._endpointMap.put(t,e)),e.count++},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.getBoundary=function(){return 1===arguments.length?new Gt(arguments[0]).getBoundary():2===arguments.length?new Gt(arguments[0],arguments[1]).getBoundary():void 0};var Vt=function(){this.count=null};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Yt=function(){},Zt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Yt.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Yt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Yt.split=function(t,e){for(var n=e.length,r=new xt,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Yt.toString=function(){if(1===arguments.length){var t=arguments[0];return Yt.SIMPLE_ORDINATE_FORMAT.format(t)}},Yt.spaces=function(t){return Yt.chars(" ",t)},Zt.NEWLINE.get=function(){return G.getProperty("line.separator")},Zt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Yt,Zt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,q.X)===t.getOrdinate(e-1,q.X)&&t.getOrdinate(0,q.Y)===t.getOrdinate(e-1,q.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Ht.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ht.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ht.copy(e,i-1,r,o,1);return r},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ht.swap(t,r,e-r)},Ht.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ht.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,n,r+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new D;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Yt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,q.X)===e.getOrdinate(n-1,q.X)&&e.getOrdinate(0,q.Y)===e.getOrdinate(n-1,q.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ht.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ht.copy(e,0,r,o,1);return r};var Xt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Y:this._points.expandEnvelope(new Y)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(N(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(N(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],qt)||N(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Mt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Y;var t=new Y;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(N(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],qt)||N(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var Jt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new _("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new _("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o==(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);jt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);G.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ct.minCoordinate(e.getCoordinates());Ct.scroll(r,i),G.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],at.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var u=this.getNumInteriorRing(),c=i.getNumInteriorRing(),l=0;l<u&&l<c;){var h=this.getInteriorRingN(l),p=i.getInteriorRingN(l),f=h.compareToSameClass(p,r);if(0!==f)return f;l++}return l<u?1:l<c?-1:0}},e.prototype.apply=function(t){if(N(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(N(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(N(t,qt))t.filter(this);else if(N(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}($t),ee=function(t){function e(e,n){e instanceof S&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Xt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new xt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}($t),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof $t?this.editGeometryCollection(t,e):t instanceof Jt?this.editPolygon(t,e):t instanceof Kt||t instanceof Xt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new xt,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===zt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new xt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Xt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Xt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(N(arguments[0],q)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new S}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case q.X:this._coordinates[t].x=n;break;case q.Y:this._coordinates[t].y=n;break;case q.Z:this._coordinates[t].z=n;break;default:throw new _("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case q.X:return this._coordinates[t].x;case q.Y:return this._coordinates[t].y;case q.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[q,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(N(arguments[0],q))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},le.prototype.interfaces_=function(){return[O,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new le},Object.defineProperties(le,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new xt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new At;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Nt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new L(n).compareTo(new L(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,w]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ye),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var me=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?N(arguments[0],O)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_e={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Xt(this.getCoordinateSequenceFactory().create(t),this):N(t,q)?new Xt(t,this):void 0:new Xt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Jt)return this.createMultiPolygon(me.toPolygonArray(t));if(a instanceof Xt)return this.createMultiLineString(me.toLineStringArray(t));if(a instanceof Kt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],q))return new Kt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Jt(null,null,this);if(1===arguments.length){if(N(arguments[0],q)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Jt(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new $t(null,this):1===arguments.length?new $t(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],q))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],q)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Ht.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return le.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_e.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,_e);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!we[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?we[n].apply(this,[e.coordinates]):"GeometryCollection"===n?we[n].apply(this,[e.geometries]):we[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var we={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!we[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=we.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=we.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(we.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=we.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=we.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(we.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ee.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ee.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ee.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ee[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},xe=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};xe.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},xe.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new be(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ie=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.opposite=function(t){return t===Ie.LEFT?Ie.RIGHT:t===Ie.RIGHT?Ie.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Ie,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new Et).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Oe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Oe.prototype.getCoordinate=function(){return this._minCoord},Oe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Oe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=at.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===at.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Oe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ie.LEFT;return n[e].y<n[e+1].y&&(r=Ie.RIGHT),r},Oe.prototype.getEdge=function(){return this._orientedDe},Oe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Oe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Oe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ie.LEFT&&(this._orientedDe=this._minDe.getSym())},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Te=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(J),Pe=function(){this.array_=[]};Pe.prototype.addLast=function(t){this.array_.push(t)},Pe.prototype.removeFirst=function(){return this.array_.shift()},Pe.prototype.isEmpty=function(){return 0===this.array_.length};var Ne=function(){this._finder=null,this._dirEdgeList=new xt,this._nodes=new xt,this._rightMostCoord=null,this._env=null,this._finder=new Oe};Ne.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ne.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ne.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Te("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ne.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ie.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ne.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ne.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ie.RIGHT)>=1&&e.getDepth(Ie.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ne.prototype.computeDepths=function(t){var e=new At,n=new Pe,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ne.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ne.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Y,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ne.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ne.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ie.LEFT,t.getDepth(Ie.RIGHT)),e.setDepth(Ie.RIGHT,t.getDepth(Ie.LEFT))},Ne.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ne.prototype.getNodes=function(){return this._nodes},Ne.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ne.prototype.interfaces_=function(){return[w]},Ne.prototype.getClass=function(){return Ne};var Re=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ie.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Ie.ON]=o,this.location[Ie.LEFT]=s,this.location[Ie.RIGHT]=a}};Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==T.NONE)return!1;return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===T.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ie.ON]=this.location[Ie.ON],e[Ie.LEFT]=T.NONE,e[Ie.RIGHT]=T.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ie.LEFT];this.location[Ie.LEFT]=this.location[Ie.RIGHT],this.location[Ie.RIGHT]=t},Re.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(T.toLocationSymbol(this.location[Ie.LEFT])),t.append(T.toLocationSymbol(this.location[Ie.ON])),this.location.length>1&&t.append(T.toLocationSymbol(this.location[Ie.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,n){this.location[Ie.ON]=t,this.location[Ie.LEFT]=e,this.location[Ie.RIGHT]=n},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:T.NONE},Re.prototype.isArea=function(){return this.location.length>1},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===T.NONE)return!0;return!1},Re.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ie.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(T.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ae=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Re(e),this.elt[1]=new Re(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Re(n.elt[0]),this.elt[1]=new Re(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Re(T.NONE),this.elt[1]=new Re(T.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Re(o,s,a),this.elt[1]=new Re(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new Re(T.NONE,T.NONE,T.NONE),this.elt[1]=new Re(T.NONE,T.NONE,T.NONE),this.elt[u].setLocations(c,l,h)}};Ae.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ae.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ae.prototype.isNull=function(t){return this.elt[t].isNull()},Ae.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ae.prototype.isLine=function(t){return this.elt[t].isLine()},Ae.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Ae.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ae.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ie.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ae.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ae.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ae.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ae.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ie.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Ae.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ae.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ae.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.toLineLabel=function(t){for(var e=new Ae(T.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new xt,this._pts=new xt,this._label=new Ae(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new xt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Te("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Te("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ie.RIGHT);if(n===T.NONE)return null;if(this._label.getLocation(e)===T.NONE)return this._label.setLocation(e,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Le=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Me=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new xt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Le(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),ke=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ke.prototype.setVisited=function(t){this._isVisited=t},ke.prototype.setInResult=function(t){this._isInResult=t},ke.prototype.isCovered=function(){return this._isCovered},ke.prototype.isCoveredSet=function(){return this._isCoveredSet},ke.prototype.setLabel=function(t){this._label=t},ke.prototype.getLabel=function(){return this._label},ke.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ke.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ke.prototype.isInResult=function(){return this._isInResult},ke.prototype.isVisited=function(){return this._isVisited},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var je=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ae(0,T.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=T.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==T.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ae(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===T.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=T.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case T.BOUNDARY:n=T.INTERIOR;break;case T.INTERIOR:default:n=T.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),Fe=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new xt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===T.BOUNDARY&&e.add(r)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},qe={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new _("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},qe.NE.get=function(){return 0},qe.NW.get=function(){return 1},qe.SW.get=function(){return 2},qe.SE.get=function(){return 3},Object.defineProperties(Be,qe);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[w]},Ue.prototype.getClass=function(){return Ue};var $e=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Te("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ie.LEFT)===T.INTERIOR&&this._label.getLocation(e,Ie.RIGHT)===T.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ie.LEFT]+"/"+this._depth[Ie.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ie.LEFT&&(r=-1);var i=Ie.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===T.EXTERIOR&&e===T.INTERIOR?1:t===T.INTERIOR&&e===T.EXTERIOR?-1:0},e}(Ue),ze=function(){};ze.prototype.createNode=function(t){return new je(t,null)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Ge=function(){if(this._edges=new xt,this._nodes=null,this._edgeEndList=new xt,0===arguments.length)this._nodes=new Fe(new ze);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};Ge.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ge.prototype.find=function(t){return this._nodes.find(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},Ge.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ge.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ge.prototype.debugPrintln=function(t){G.out.println(t)},Ge.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===T.BOUNDARY},Ge.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ge.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&at.computeOrientation(t,e,r)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Ge.prototype.getEdgeEnds=function(){return this._edgeEndList},Ge.prototype.debugPrint=function(t){G.out.print(t)},Ge.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ge.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ge.prototype.insertEdge=function(t){this._edges.add(t)},Ge.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ge.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new $e(n,!0),i=new $e(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ge.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ge.prototype.getNodes=function(){return this._nodes.values()},Ge.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ve=function(){this._geometryFactory=null,this._shellList=new xt;var t=arguments[0];this._geometryFactory=t};Ve.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ve.prototype.computePolygons=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ve.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Te("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ve.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new xt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Ve.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ve.prototype.buildMaximalEdgeRings=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Me(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ve.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ve.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ve.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&at.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=u)}return o},Ve.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ve.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ge.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new xt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ye=function(){};Ye.prototype.getBounds=function(){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ze=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ze.prototype.getItem=function(){return this._item},Ze.prototype.getBounds=function(){return this._bounds},Ze.prototype.interfaces_=function(){return[Ye,e]},Ze.prototype.getClass=function(){return Ze};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new xt,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Xe=function(){};Xe.prototype.visitItem=function(t){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){};We.prototype.insert=function(t,e){},We.prototype.remove=function(t,e){},We.prototype.query=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ke=function(){if(this._childBoundables=new xt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Ye,e]},Ke.prototype.getClass=function(){return Ke},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Qe);var Je=function(){};Je.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Je.min=function(t){return Je.sort(t),t.get(0)},Je.sort=function(t,e){var n=t.toArray();e?jt.sort(n,e):jt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Je.singletonList=function(t){var e=new xt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[w]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new xt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof Ze&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ze&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new xt:t}if(1===arguments.length){for(var e=arguments[0],n=new xt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ze?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ze(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new xt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ke?this.boundablesAtLevel(n,s,i):(et.isTrue(s instanceof Ze),-1===n&&i.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new xt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(N(arguments[2],Xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var u=s.get(a);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Ke?this.query(i,u,o):u instanceof Ze?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(N(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var c=arguments[0],l=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),c)&&(f instanceof Ke?this.query(c,f,l):f instanceof Ze?l.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ke&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new xt;n.add(this.createNode(e));var r=new xt(t);Je.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new xt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new xt;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(N(arguments[2],Xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(N(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new xt(t);Je.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(N(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&N(arguments[1],on)){var i=arguments[0],o=arguments[1],s=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=null,l=new He;for(l.add(a);!l.isEmpty()&&u>0;){var h=l.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,c=h):h.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new Ze(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[We,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return an},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[x]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[x]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Y(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[w]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new It;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new xt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new L(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new L(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new S(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new S(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new J("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new J("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new _("Cannot compute the octant for two identical points "+i);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new xt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return at.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=v.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return V.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof z))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new S(n-u,r+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[w,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var mn=function(){this.tempEnv1=new Y,this.tempEnv2=new Y,this._overlapSeg1=new gn,this._overlapSeg2=new gn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_n.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_n.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},_n.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_n.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_n.prototype.setId=function(t){this._id=t},_n.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_n.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Y(t,e)}return this._env},_n.prototype.getEndIndex=function(){return this._end},_n.prototype.getStartIndex=function(){return this._start},_n.prototype.getContext=function(){return this._context},_n.prototype.getId=function(){return this._id},_n.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new xt;n.add(new L(e));do{var r=vn.findChainEnd(t,e);n.add(new L(r)),e=r}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new xt,i=vn.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new _n(e,i[o],i[o+1],n);r.add(s)}return r}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var wn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};wn.prototype.setSegmentIntersector=function(t){this._segInt=t},wn.prototype.interfaces_=function(){return[bn]},wn.prototype.getClass=function(){return wn};var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new xt,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new xn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return xn},Object.defineProperties(e,n),e}(wn),xn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},In={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},In.CAP_ROUND.get=function(){return 1},In.CAP_FLAT.get=function(){return 2},In.CAP_SQUARE.get=function(){return 3},In.JOIN_ROUND.get=function(){return 1},In.JOIN_MITRE.get=function(){return 2},In.JOIN_BEVEL.get=function(){return 3},In.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},In.DEFAULT_MITRE_LIMIT.get=function(){return 5},In.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,In);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},On={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Cn.prototype.isShallowConcavity=function(t,e,n,r){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<r},Cn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,r){return at.distancePointLine(e,t,n)<r},Cn.prototype.collapseLine=function(){for(var t=new It,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},On.INIT.get=function(){return 0},On.DELETE.get=function(){return 1},On.KEEP.get=function(){return 1},On.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,On);var Tn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new xt},Pn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Tn.prototype.getCoordinates=function(){return this._ptList.toArray(Tn.COORDINATE_ARRAY_TYPE)},Tn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Tn.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Tn.prototype.revere=function(){},Tn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Tn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Tn.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},Tn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Tn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Pn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Tn,Pn);var Nn=function(){},Rn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.toDegrees=function(t){return 180*t/Math.PI},Nn.normalize=function(t){for(;t>Math.PI;)t-=Nn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Nn.PI_TIMES_2;return t},Nn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Nn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Nn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Nn.interiorAngle=function(t,e,n){var r=Nn.angle(e,t),i=Nn.angle(e,n);return Math.abs(i-r)},Nn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Nn.PI_TIMES_2;t>=Nn.PI_TIMES_2&&(t=0)}else{for(;t>=Nn.PI_TIMES_2;)t-=Nn.PI_TIMES_2;t<0&&(t=0)}return t},Nn.angleBetween=function(t,e,n){var r=Nn.angle(e,t),i=Nn.angle(e,n);return Nn.diff(r,i)},Nn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Nn.toRadians=function(t){return t*Math.PI/180},Nn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Nn.COUNTERCLOCKWISE:n<0?Nn.CLOCKWISE:Nn.NONE},Nn.angleBetweenOriented=function(t,e,n){var r=Nn.angle(e,t),i=Nn.angle(e,n)-r;return i<=-Math.PI?i+Nn.PI_TIMES_2:i>Math.PI?i-Nn.PI_TIMES_2:i},Rn.PI_TIMES_2.get=function(){return 2*Math.PI},Rn.PI_OVER_2.get=function(){return Math.PI/2},Rn.PI_OVER_4.get=function(){return Math.PI/4},Rn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Rn.CLOCKWISE.get=function(){return at.CLOCKWISE},Rn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Nn,Rn);var An=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};An.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),r=n===at.CLOCKWISE&&this._side===Ie.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Ie.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},An.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ie.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ie.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var u=new S;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new S(r.p1.x+u.x,r.p1.y+u.y),l=new S(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},An.prototype.getCoordinates=function(){return this._segList.getCoordinates()},An.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=V.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof z))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},An.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===at.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},An.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*An.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},An.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},An.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},An.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},An.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},An.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},An.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Nn.angle(i,this._seg0.p0),s=Nn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Nn.normalize(o+s),u=Nn.normalize(a+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(s)),h=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),f=new S(h,p),d=new gn(i,f),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===Ie.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},An.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ie.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},An.prototype.addFilletArc=function(t,e,n,r,i){var o=r===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new S;c<s;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},An.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},An.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},An.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},An.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Tn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},An.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},An.prototype.closeRing=function(){this._segList.closeRing()},An.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(An,Dn);var Ln=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ln.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ct.reverse(o),o},Ln.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Cn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Ln.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ie.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ln.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ie.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Cn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ie.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ln.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},Ln.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Ln.prototype.getBufferParameters=function(){return this._bufParams},Ln.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ln.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ln.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ln.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Cn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ie.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Ln.prototype.getSegGen=function(t){return new An(this._precisionModel,this._bufParams,t)},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Mn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},kn={DepthSegment:{configurable:!0}};Mn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new xt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],Et)&&arguments[0]instanceof S&&arguments[1]instanceof $e){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var l=s.getDepth(Ie.LEFT);this._seg.p0.equals(u[c])||(l=s.getDepth(Ie.RIGHT));var h=new jn(this._seg,l);a.add(h)}}else if(N(arguments[2],Et)&&arguments[0]instanceof S&&N(arguments[1],Et))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Mn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Je.min(e)._leftDepth},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},kn.DepthSegment.get=function(){return jn},Object.defineProperties(Mn,kn);var jn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};jn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jn.prototype.toString=function(){return this._upwardSeg.toString()},jn.prototype.interfaces_=function(){return[w]},jn.prototype.getClass=function(){return jn};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new _("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,r){return t*r-e*n},Fn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,h=t.x-i,p=t.y-o,f=(c*h-a*p)/l,d=(-u*h+s*p)/l;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},Fn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Fn.isAcute=function(t,e,n){return!!Nn.isAcute(t,e,n)&&!!Nn.isAcute(e,n,t)&&!!Nn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*Fn.det(o,s,a,u),l=Fn.det(s,o*o+s*s,u,a*a+u*u),h=Fn.det(o,o*o+s*s,a,a*a+u*u);return new S(r-l/c,i+h/c)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new V(t.x+n/2,t.y+r/2,1),o=new V(t.x-r+n/2,t.y+n+r/2,1);return new V(i,o)},Fn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new S(t.x+i*o,t.y+i*s)},Fn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,h=r*a-i*s,p=c*c+l*l+h*h;return Math.sqrt(p)/2},Fn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},Fn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new S(a,u)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new xt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ie.LEFT;this._distance<0&&(e=-this._distance,n=Ie.RIGHT);var r=t.getExteriorRing(),i=Ct.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,T.EXTERIOR,T.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Ct.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ie.opposite(n),T.INTERIOR,T.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),r=n.inCentre();return at.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Ae(0,T.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=r,n=Ie.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Jt?this.addPolygon(t):t instanceof Xt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof zt||t instanceof ne||t instanceof $t)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var qn=function(){};qn.prototype.locate=function(t){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof $t?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[wt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof $t)};var $n=function(){this._geom=null;var t=arguments[0];this._geom=t};$n.prototype.locate=function(t){return $n.locate(t,this._geom)},$n.prototype.interfaces_=function(){return[qn]},$n.prototype.getClass=function(){return $n},$n.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},$n.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!$n.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if($n.isPointInRing(t,i))return!1}return!0},$n.containsPoint=function(t,e){if(e instanceof Jt)return $n.containsPointInPolygon(t,e);if(e instanceof $t)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&$n.containsPoint(t,r))return!0}return!1},$n.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:$n.containsPoint(t,e)?T.INTERIOR:T.EXTERIOR};var zn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]};zn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},zn.prototype.propagateSideLabels=function(t){for(var e=T.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ie.LEFT)!==T.NONE&&(e=r.getLocation(t,Ie.LEFT))}if(e===T.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ie.ON)===T.NONE&&a.setLocation(t,Ie.ON,i),a.isArea(t)){var u=a.getLocation(t,Ie.LEFT),c=a.getLocation(t,Ie.RIGHT);if(c!==T.NONE){if(c!==i)throw new Te("side location conflict",s.getCoordinate());u===T.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else et.isTrue(a.getLocation(t,Ie.LEFT)===T.NONE,"found single null side"),a.setLocation(t,Ie.RIGHT,i),a.setLocation(t,Ie.LEFT,i)}}},zn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},zn.prototype.print=function(t){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},zn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ie.LEFT);et.isTrue(r!==T.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ie.LEFT),u=s.getLocation(t,Ie.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},zn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},zn.prototype.iterator=function(){return this.getEdges().iterator()},zn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new xt(this._edgeMap.values())),this._edgeList},zn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===T.NONE&&(this._ptInAreaLocation[t]=$n.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},zn.prototype.toString=function(){var t=new D;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},zn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},zn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===T.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=T.NONE;if(e[u])c=T.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},zn.prototype.getDegree=function(){return this._edgeMap.size()},zn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Gn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Te("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new xt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ie.LEFT),r=t.getDepth(Ie.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Te("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(Ie.RIGHT,s),s=u.getDepth(Ie.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=T.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=T.INTERIOR;break}if(r.isInResult()){t=T.EXTERIOR;break}}}if(t===T.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===T.INTERIOR):(s.isInResult()&&(i=T.EXTERIOR),a.isInResult()&&(i=T.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ae(T.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==T.INTERIOR&&o!==T.BOUNDARY||this._label.setLocation(i,T.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zn),Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new je(t,new Gn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Yn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Yn.prototype.compareTo=function(t){var e=t;return Yn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Yn.prototype.interfaces_=function(){return[w]},Yn.prototype.getClass=function(){return Yn},Yn.orientation=function(t){return 1===Ct.increasingDirection(t)},Yn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===s,p=(c+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Zn=function(){this._edges=new xt,this._ocaMap=new h};Zn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Zn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Zn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Zn.prototype.iterator=function(){return this._edges.iterator()},Zn.prototype.getEdges=function(){return this._edges},Zn.prototype.get=function(t){return this._edges.get(t)},Zn.prototype.findEqualEdge=function(t){var e=new Yn(t.getCoordinates());return this._ocaMap.get(e)},Zn.prototype.add=function(t){this._edges.add(t);var e=new Yn(t.getCoordinates());this._ocaMap.put(e,t)},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,r){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Xn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Xn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Xn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Xn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Xn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Xn.prototype.getLineIntersector=function(){return this._li},Xn.prototype.hasProperIntersection=function(){return this._hasProper},Xn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Xn.prototype.hasIntersection=function(){return this._hasIntersection},Xn.prototype.isDone=function(){return!1},Xn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Xn.prototype.interfaces_=function(){return[Hn]},Xn.prototype.getClass=function(){return Xn},Xn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Wn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};Wn.prototype.getSegmentIndex=function(){return this.segmentIndex},Wn.prototype.getCoordinate=function(){return this.coord},Wn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Wn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Wn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Wn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Wn.prototype.getDistance=function(){return this.dist},Wn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Wn.prototype.interfaces_=function(){return[w]},Wn.prototype.getClass=function(){return Wn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new S(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new nr(o,new Ae(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Wn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new xt;n.add(new L(e));do{var r=this.findChainEnd(t,e);n.add(new L(r)),e=r}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Jn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Y,this.env2=new Y;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};Jn.prototype.getCoordinates=function(){return this.pts},Jn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Jn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Jn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,c),g<u&&this.computeIntersectsForChain(i,d,s,g,u,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<u&&this.computeIntersectsForChain(d,o,s,g,u,c))}},Jn.prototype.getStartIndexes=function(){return this.startIndex},Jn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ie.RIGHT]-this._depth[t][Ie.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?T.EXTERIOR:T.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==T.EXTERIOR&&r!==T.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===T.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===T.EXTERIOR?0:t===T.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ae.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Jn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Y;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new D;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ie.ON),e.getLocation(1,Ie.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ie.LEFT),e.getLocation(1,Ie.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ie.RIGHT),e.getLocation(1,Ie.RIGHT),2))},e}(ke),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Zn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ae(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new xt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Mn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new xt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ne;i.create(r),e.add(i)}}return Je.sort(e,Je.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new En,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Xn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Ln(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ge(new Vn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ve(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new nr(i.getCoordinates(),new Ae(s));this.insertUniqueEdge(a)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ie.LEFT),n=t.getLocation(0,Ie.RIGHT);return e===T.INTERIOR&&n===T.EXTERIOR?1:e===T.EXTERIOR&&n===T.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new xt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(N(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&G.out.println(n)}},ir.prototype.scale=function(){if(N(arguments[0],bt)){for(var t=arguments[0],e=new xt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new S(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Ct.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sr={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new J("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(l===p&&h===f)return null;var d=l.getCoordinates()[h],g=l.getCoordinates()[h+1],y=p.getCoordinates()[f],m=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new J("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new J("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},sr.fact.get=function(){return new me},Object.defineProperties(or,sr);var ar=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ar.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ar.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},ar.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ar.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ar.prototype.getCoordinate=function(){return this._originalPt},ar.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ar.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ar.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Y(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ar.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ar.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},ar.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ar,ur);var cr=function(){this.tempEnv1=new Y,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Xe]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(lr,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new xt};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Hn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof $))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(N(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new ar(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ar(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Te))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof J))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=R.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},yr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},yr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},yr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var mr=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var _r=function(){};_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},_r.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof Xt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mr&&arguments[0]instanceof Jt&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1],u=arguments[2];_r.computeDistance(s.getExteriorRing(),a,u);for(var c=0;c<s.getNumInteriorRing();c++)_r.computeDistance(s.getInteriorRingN(c),a,u)}else if(arguments[2]instanceof mr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var l=arguments[0],h=arguments[1],p=arguments[2];if(l instanceof Xt)_r.computeDistance(l,h,p);else if(l instanceof Jt)_r.computeDistance(l,h,p);else if(l instanceof $t)for(var f=l,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);_r.computeDistance(g,h,p)}else p.setMinimum(l.getCoordinate(),h)}else if(arguments[2]instanceof mr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var vr=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vr.prototype.computeMaxMidpointDistance=function(t){var e=new Er(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.computeMaxVertexDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vr.prototype.getDistancePoints=function(){return this._maxPtDist},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},br.MaxPointDistanceFilter.get=function(){return wr},br.MaxMidpointDistanceFilter.get=function(){return Er},Object.defineProperties(vr,br);var wr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};wr.prototype.filter=function(t){this._minPtDist.initialize(),_r.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[ft]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};Er.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_r.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Er.prototype.isDone=function(){return!1},Er.prototype.isGeometryChanged=function(){return!1},Er.prototype.getMaxPointDistance=function(){return this._maxPtDist},Er.prototype.interfaces_=function(){return[Ut]},Er.prototype.getClass=function(){return Er};var xr=function(t){this._comps=t||null};xr.prototype.filter=function(t){t instanceof Jt&&this._comps.add(t)},xr.prototype.interfaces_=function(){return[qt]},xr.prototype.getClass=function(){return xr},xr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return xr.getPolygons(t,new xt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof $t&&e.apply(new xr(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Xt&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ct]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(N(arguments[0],bt)&&N(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,e)}return e}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new xt;return i.apply(new Sr(s,o)),s}if(arguments[0]instanceof lt&&N(arguments[1],bt)){var a=arguments[0],u=arguments[1];return a instanceof Xt?u.add(a):a.apply(new Sr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],bt)&&N(arguments[1],bt)){for(var c=arguments[1],l=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Sr.getLines(p,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&N(arguments[1],bt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new Sr(f,d)),f}}};var Ir=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new _("Rule must be non-null");this._boundaryRule=t}};Ir.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return T.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===T.EXTERIOR)return T.EXTERIOR;if(r===T.BOUNDARY)return T.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===T.INTERIOR)return T.EXTERIOR;if(s===T.BOUNDARY)return T.BOUNDARY}return T.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Xt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return T.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?at.isOnLine(a,c)?T.INTERIOR:T.EXTERIOR:T.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?T.INTERIOR:T.EXTERIOR}},Ir.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):T.EXTERIOR},Ir.prototype.intersects=function(t,e){return this.locate(t,e)!==T.EXTERIOR},Ir.prototype.updateLocationInfo=function(t){t===T.INTERIOR&&(this._isIn=!0),t===T.BOUNDARY&&this._numBoundaries++},Ir.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Xt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof zt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof $t)for(var u=new Un(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Ir.prototype.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:e instanceof Xt||e instanceof Jt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?T.BOUNDARY:this._numBoundaries>0||this._isIn?T.INTERIOR:T.EXTERIOR)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Cr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Or={INSIDE_AREA:{configurable:!0}};Cr.prototype.isInsideArea=function(){return this._segIndex===Cr.INSIDE_AREA},Cr.prototype.getCoordinate=function(){return this._pt},Cr.prototype.getGeometryComponent=function(){return this._component},Cr.prototype.getSegmentIndex=function(){return this._segIndex},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Or.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cr,Or);var Tr=function(t){this._pts=t||null};Tr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Tr.prototype.interfaces_=function(){return[qt]},Tr.prototype.getClass=function(){return Tr},Tr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Je.singletonList(t):Tr.getPoints(t,new xt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof $t&&e.apply(new Tr(n)),n}};var Pr=function(){this._locations=null;var t=arguments[0];this._locations=t};Pr.prototype.filter=function(t){(t instanceof Kt||t instanceof Xt||t instanceof Jt)&&this._locations.add(new Cr(t,0,t.getCoordinate()))},Pr.prototype.interfaces_=function(){return[qt]},Pr.prototype.getClass=function(){return Pr},Pr.getLocations=function(t){var e=new xt;return t.apply(new Pr(e)),e};var Nr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ir,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Nr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=xr.getPolygons(this._geom[e]);if(i.size()>0){var o=Pr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],Et)&&N(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var l=s.get(c),h=0;h<a.size();h++)if(this.computeContainmentDistance(l,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cr&&arguments[1]instanceof Jt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(T.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Cr(f,g),null}},Nr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Nr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Tr.getPoints(this._geom[0]),i=Tr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Nr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Nr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Nr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Nr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Xt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=at.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Cr(t,o,a),n[1]=new Cr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xt&&arguments[1]instanceof Xt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=c.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(h[f],h[f+1]),m=new gn(p[d],p[d+1]),_=y.closestPoints(m);l[0]=new Cr(u,f,_[0]),l[1]=new Cr(c,d,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Nr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Cr(i,0,i.getCoordinate()),n[1]=new Cr(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Nr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Nr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.distance=function(t,e){return new Nr(t,e).distance()},Nr.isWithinDistance=function(t,e,n){return new Nr(t,e,n).distance()<=n},Nr.nearestPoints=function(t,e){return new Nr(t,e).nearestPoints()};var Rr=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0};Rr.prototype.getCoordinates=function(){return this._pt},Rr.prototype.getCoordinate=function(t){return this._pt[t]},Rr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Rr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Rr.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Rr.prototype.getDistance=function(){return this._distance},Rr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr};var Ar=function(){};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.computeDistance=function(){if(arguments[2]instanceof Rr&&arguments[0]instanceof Xt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof Jt&&arguments[1]instanceof S){var a=arguments[0],u=arguments[1],c=arguments[2];Ar.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)Ar.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Xt)Ar.computeDistance(h,p,f);else if(h instanceof Jt)Ar.computeDistance(h,p,f);else if(h instanceof $t)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Ar.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Rr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[1],_=arguments[2],v=arguments[0].closestPoint(m);_.setMinimum(v,m)}};var Dr=function(){this._g0=null,this._g1=null,this._ptDist=new Rr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Lr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dr.prototype.computeOrientedDistance=function(t,e,n){var r=new Mr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new kr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(){if(2===arguments.length)return new Dr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Lr.MaxPointDistanceFilter.get=function(){return Mr},Lr.MaxDensifiedByFractionDistanceFilter.get=function(){return kr},Object.defineProperties(Dr,Lr);var Mr=function(){this._maxPtDist=new Rr,this._minPtDist=new Rr,this._euclideanDist=new Ar,this._geom=null;var t=arguments[0];this._geom=t};Mr.prototype.filter=function(t){this._minPtDist.initialize(),Ar.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mr.prototype.interfaces_=function(){return[ft]},Mr.prototype.getClass=function(){return Mr};var kr=function(){this._maxPtDist=new Rr,this._minPtDist=new Rr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};kr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new S(a,u);this._minPtDist.initialize(),Ar.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},kr.prototype.isDone=function(){return!1},kr.prototype.isGeometryChanged=function(){return!1},kr.prototype.getMaxPointDistance=function(){return this._maxPtDist},kr.prototype.interfaces_=function(){return[Ut]},kr.prototype.getClass=function(){return kr};var jr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jr.prototype.checkMaximumDistance=function(t,e,n){var r=new Dr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},jr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),jr.VERBOSE&&G.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Jt||this._input instanceof ne||this._input instanceof $t))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jr.prototype.getErrorIndicator=function(){return this._errorIndicator},jr.prototype.checkMinimumDistance=function(t,e,n){var r=new Nr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},jr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jr.prototype.getErrorLocation=function(){return this._errorLocation},jr.prototype.getPolygonLines=function(t){for(var e=new xt,n=new Sr(e),r=xr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},jr.prototype.getErrorMessage=function(){return this._errMsg},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},Fr.VERBOSE.get=function(){return!1},Fr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jr,Fr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},qr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Y(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Y(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new jr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Jt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;G.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},qr.VERBOSE.get=function(){return!1},qr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,qr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},Ur.prototype.interfaces_=function(){return[pn]},Ur.prototype.getClass=function(){return Ur};var $r=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new xt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};$r.prototype.getInteriorIntersection=function(){return this._interiorIntersection},$r.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},$r.prototype.getIntersectionSegments=function(){return this._intSegments},$r.prototype.count=function(){return this._intersectionCount},$r.prototype.getIntersections=function(){return this._intersections},$r.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},$r.prototype.setKeepIntersections=function(t){this._keepIntersections=t},$r.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},$r.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},$r.prototype.hasIntersection=function(){return null!==this._interiorIntersection},$r.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},$r.prototype.interfaces_=function(){return[Hn]},$r.prototype.getClass=function(){return $r},$r.createAllIntersectionsFinder=function(t){var e=new $r(t);return e.setFindAllIntersections(!0),e},$r.createAnyIntersectionFinder=function(t){return new $r(t)},$r.createIntersectionCounter=function(t){var e=new $r(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var zr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};zr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},zr.prototype.getIntersections=function(){return this._segInt.getIntersections()},zr.prototype.isValid=function(){return this.execute(),this._isValid},zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new $r(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new En;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},zr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Te(this.getErrorMessage(),this._segInt.getInteriorIntersection())},zr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.computeIntersections=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Gr=function t(){this._nv=null;var e=arguments[0];this._nv=new zr(t.toSegmentStrings(e))};Gr.prototype.checkValid=function(){this._nv.checkValid()},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.toSegmentStrings=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Gr.checkValid=function(t){new Gr(t).checkValid()};var Vr=function(t){this._mapOp=t};Vr.prototype.map=function(t){for(var e=new xt,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.map=function(t,e){return new Vr(e).map(t)};var Yr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new xt,this._resultLineList=new xt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Yr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Yr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ci.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Yr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Yr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Yr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ci.isResultOfOp(r,e)&&e===Ci.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var Zr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new xt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Zr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Zr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ci.INTERSECTION)){var r=n.getLabel();Ci.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Zr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Hr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new xt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new xt;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Hr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hr.prototype.getInputGeometry=function(){return this._inputGeom},Hr.prototype.transformMultiLineString=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformMultiPoint=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformMultiPolygon=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.copy=function(t){return t.copy()},Hr.prototype.transformGeometryCollection=function(t,e){for(var n=new xt,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Hr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Xt)return this.transformLineString(t,null);if(t instanceof zt)return this.transformMultiLineString(t,null);if(t instanceof Jt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof $t)return this.transformGeometryCollection(t,null);throw new _("Unknown Geometry subtype: "+t.getClass().getName())},Hr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Xr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Xt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Xr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Xr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Xr.prototype.snapTo=function(t){var e=new It(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Xr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Xr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Xr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Wr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Wr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qr(e,n).transform(this._srcGeom)},Wr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qr(t,n,!0).transform(this._srcGeom),i=r;return e&&N(i,Qt)&&(i=r.buffer(0)),i},Wr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Wr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Wr.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Wr(t);r[0]=i.snapTo(e,n);var o=new Wr(e);return r[1]=o.snapTo(r[0],n),r},Wr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Wr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Wr.computeOverlaySnapTolerance(i),Wr.computeOverlaySnapTolerance(o))}},Wr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Wr.SNAP_PRECISION_FACTOR},Wr.snapToSelf=function(t,e,n){return new Wr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Wr,Kr);var Qr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Xr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),Jr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Jr.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Jr.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Jr.signExpBits(this._commonBits),this._isFirst=!1,null):Jr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Jr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Jr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Jr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Jr.signExpBits=function(t){return t>>52},Jr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Jr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Jr.getBit(t,r)!==Jr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Jr,this._commonBitsY=new Jr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Wr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ci.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||G.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Wr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Wr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ci.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ci.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ci.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ci.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ci.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof J))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof J?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ci.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ci.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ci.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[w]},ai.prototype.getClass=function(){return ai},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(ai,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new xt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Je.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&N(arguments[0],Et)&&N(arguments[1],Et)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&N(arguments[0],Et)&&arguments[1]instanceof li){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new si(n,i),s=new ai(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ai(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return Q.toLineString(new S(this._min,0),new S(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[x]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(){this._leaves=new xt,this._root=null,this._level=0};mi.prototype.buildTree=function(){Je.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new xt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){G.out.println(Q.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var _i=function(){this._items=new xt};_i.prototype.visitItem=function(t){this._items.add(t)},_i.prototype.getItems=function(){return this._items},_i.prototype.interfaces_=function(){return[Xe]},_i.prototype.getClass=function(){return _i};var vi=function(){this._index=null;var t=arguments[0];if(!N(t,Qt))throw new _("Argument must be Polygonal");this._index=new Ei(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vi.prototype.locate=function(t){var e=new st(t),n=new wi(e);return this._index.query(t.y,t.y,n),e.getLocation()},vi.prototype.interfaces_=function(){return[qn]},vi.prototype.getClass=function(){return vi},bi.SegmentVisitor.get=function(){return wi},bi.IntervalIndexedGeometry.get=function(){return Ei},Object.defineProperties(vi,bi);var wi=function(){this._counter=null;var t=arguments[0];this._counter=t};wi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},wi.prototype.interfaces_=function(){return[Xe]},wi.prototype.getClass=function(){return wi};var Ei=function(){this._index=new mi;var t=arguments[0];this.init(t)};Ei.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ei.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Ei.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new _i;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var xi=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ir,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;T.NONE,r.getLocation(t,Ie.ON)===T.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new li(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Jt||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,T.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,T.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),T.EXTERIOR,T.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,T.INTERIOR,T.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],T.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],T.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Ae(this._argIndex,T.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===T.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ct.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;at.isCCW(r)&&(i=n,o=e);var s=new nr(r,new Ae(this._argIndex,T.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],T.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Ae(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Jt)this.addPolygon(e);else if(e instanceof Xt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof zt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof $t))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return N(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?T.BOUNDARY:T.INTERIOR},e}(Ge),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new xi(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xi(0,e,r),this._arg[1]=new xi(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new xi(0,i,s),this._arg[1]=new xi(1,o,s)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.map=function(){if(arguments[0]instanceof lt&&N(arguments[1],Ii.MapOp)){for(var t=arguments[0],e=arguments[1],n=new xt,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(N(arguments[0],bt)&&N(arguments[1],Ii.MapOp)){for(var o=arguments[0],s=arguments[1],a=new xt,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},Ii.MapOp=function(){};var Ci=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ir,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Zn,this._resultPolyList=new xt,this._resultLineList=new xt,this._resultPointList=new xt,this._graph=new Ge(new Vn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ae(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new xt;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==T.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new xt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new xt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ve(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Yr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Zr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ie.RIGHT),i.getLocation(1,Ie.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ie.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ie.LEFT,r.getLocation(i,Ie.LEFT)),et.isTrue(!r.isNull(i,Ie.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ie.RIGHT,r.getLocation(i,Ie.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ci.overlayOp=function(t,e,n){return new Ci(t,e).getResultGeometry(n)},Ci.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ci.createEmptyResult(Ci.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Vr.map(t,{interfaces_:function(){return[Ii.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.INTERSECTION)},Ci.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},Ci.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ci.INTERSECTION:o=Math.min(r,i);break;case Ci.UNION:o=Math.max(r,i);break;case Ci.DIFFERENCE:o=r;break;case Ci.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ci.createEmptyResult=function(t,e,n,r){var i=null;switch(Ci.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ci.difference=function(t,e){return t.isEmpty()?Ci.createEmptyResult(Ci.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.DIFFERENCE))},Ci.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ci.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===T.BOUNDARY&&(i=T.INTERIOR),o===T.BOUNDARY&&(o=T.INTERIOR),s){case Ci.INTERSECTION:return i===T.INTERIOR&&o===T.INTERIOR;case Ci.UNION:return i===T.INTERIOR||o===T.INTERIOR;case Ci.DIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR;case Ci.SYMDIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR||i!==T.INTERIOR&&o===T.INTERIOR}return!1}},Ci.INTERSECTION=1,Ci.UNION=2,Ci.DIFFERENCE=3,Ci.SYMDIFFERENCE=4;var Oi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ir,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Oi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Oi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?T.BOUNDARY:this._ptLocator.locate(t,this._g)},Oi.prototype.extractLinework=function(t){var e=new Ti;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var Ti=function(){this._linework=null,this._linework=new xt};Ti.prototype.getLinework=function(){return this._linework},Ti.prototype.filter=function(t){if(t instanceof Jt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ti.prototype.interfaces_=function(){return[qt]},Ti.prototype.getClass=function(){return Ti};var Pi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Pi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pi.prototype.getPoints=function(t){for(var e=new xt,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Pi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new S(c-u,l+a);r.add(h)}if(this._doRight){var p=new S(c+u,l-a);r.add(p)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Ni=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new xt;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Oi(this._geom[0],this._boundaryDistanceTolerance),new Oi(this._geom[1],this._boundaryDistanceTolerance),new Oi(this._geom[2],this._boundaryDistanceTolerance)]},Ri={TOLERANCE:{configurable:!0}};Ni.prototype.reportResult=function(t,e,n){G.out.println("Overlay result invalid - A:"+T.toLocationSymbol(e[0])+" B:"+T.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+T.toLocationSymbol(e[2]))},Ni.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ni.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ni.hasLocation(this._location,T.BOUNDARY)||this.isValidResult(r,this._location)}},Ni.prototype.addTestPts=function(t){var e=new Pi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ni.prototype.isValidResult=function(t,e){var n=Ci.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===T.INTERIOR);return r||this.reportResult(t,e,n),r},Ni.prototype.getInvalidLocation=function(){return this._invalidLocation},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ni.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Wr.computeSizeBasedSnapTolerance(t),Wr.computeSizeBasedSnapTolerance(e))},Ni.isValid=function(t,e,n,r){return new Ni(t,e,r).isValid(n)},Ri.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ni,Ri);var Ai=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ai.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ai.prototype.combine=function(){for(var t=new xt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.combine=function(){if(1===arguments.length)return new Ai(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ai(Ai.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ai(Ai.createList(n,r,i)).combine()}},Ai.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ai.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xt;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new xt;return s.add(r),s.add(i),s.add(o),s}};var Di=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new xt)},Li={STRTREE_NODE_CAPACITY:{configurable:!0}};Di.prototype.reduceToGeometries=function(t){for(var e=new xt,n=t.iterator();n.hasNext();){var r=n.next(),i=null;N(r,Et)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},Di.prototype.extractByEnvelope=function(t,e,n){for(var r=new xt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Di.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ai.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Di.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Di.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Di.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Di.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Di.getGeometry(e,n),Di.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Di.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Di.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Di.prototype.unionActual=function(t,e){return Di.restrictToPolygons(t.union(e))},Di.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Di.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new xt,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Ai.combine(r)},Di.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.restrictToPolygons=function(t){if(N(t,Qt))return t;var e=xr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Di.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Di.union=function(t){return new Di(t).union()},Li.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Di,Li);var Mi=function(){};Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.UNION)},t.GeoJSONReader=xe,t.GeoJSONWriter=Se,t.OverlayOp=Ci,t.UnionOp=Mi,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},53250:function(t,e,n){"use strict";var r=n(67294);var i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,l=r[1];return a((function(){i.value=n,i.getSnapshot=e,c(i)&&l({inst:i})}),[t,n,e]),s((function(){return c(i)&&l({inst:i}),t((function(){c(i)&&l({inst:i})}))}),[t]),u(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},50139:function(t,e,n){"use strict";var r=n(67294),i=n(61688);var o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=i.useSyncExternalStore,a=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var h=a(null);if(null===h.current){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=c((function(){function t(t){if(!u){if(u=!0,s=t,t=r(t),void 0!==i&&p.hasValue){var e=p.value;if(i(e,t))return a=e}return a=t}if(e=a,o(s,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(s=t,a=n)}var s,a,u=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,n,r,i]);var f=s(t,h[0],h[1]);return u((function(){p.hasValue=!0,p.value=f}),[f]),l(f),f}},61688:function(t,e,n){"use strict";t.exports=n(53250)},52798:function(t,e,n){"use strict";t.exports=n(50139)},14671:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(67294);function i(t){let e;const n=new Set,r=(t,r)=>{const i="function"==typeof t?t(e):t;if(i!==e){const t=e;e=r?i:Object.assign({},e,i),n.forEach((n=>n(e,t)))}},i=()=>e,o={setState:r,getState:i,subscribe:(t,r,o)=>r||o?((t,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(e);function a(){const n=r(e);if(!o(s,n)){const e=s;t(s=n,e)}}return n.add(a),()=>n.delete(a)})(t,r,o):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(r,i,o),o}const o="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;function s(t){const e="function"==typeof t?i(t):t,n=(t=e.getState,n=Object.is)=>{const[,i]=(0,r.useReducer)((t=>t+1),0),s=e.getState(),a=(0,r.useRef)(s),u=(0,r.useRef)(t),c=(0,r.useRef)(n),l=(0,r.useRef)(!1),h=(0,r.useRef)();let p;void 0===h.current&&(h.current=t(s));let f=!1;(a.current!==s||u.current!==t||c.current!==n||l.current)&&(p=t(s),f=!n(h.current,p)),o((()=>{f&&(h.current=p),a.current=s,u.current=t,c.current=n,l.current=!1}));const d=(0,r.useRef)(s);o((()=>{const t=()=>{try{const t=e.getState(),n=u.current(t);c.current(h.current,n)||(a.current=t,h.current=n,i())}catch(t){l.current=!0,i()}},n=e.subscribe(t);return e.getState()!==d.current&&t(),n}),[]);const g=f?p:h.current;return(0,r.useDebugValue)(g),g};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[n,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},n}},38597:function(t,e,n){"use strict";n.d(e,{tJ:function(){return l}});Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var r=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,e,n)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))o.call(e,n)&&a(t,n,e[n]);if(i)for(var n of i(e))s.call(e,n)&&a(t,n,e[n]);return t};const c=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(t){return c(t)(n)},catch(t){return this}}}catch(t){return{then(t){return this},catch(e){return c(e)(t)}}}},l=(t,e)=>(n,r,i)=>{let o=u({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:t=>t,version:0,merge:(t,e)=>u(u({},e),t)},e);(o.blacklist||o.whitelist)&&console.warn(`The ${o.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let s=!1;const a=new Set,l=new Set;let h;try{h=o.getStorage()}catch(t){}if(!h)return t(((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...t)}),r,i);h.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${o.name}' does not contain a 'removeItem' method, which will be required in v4.`);const p=c(o.serialize),f=()=>{const t=o.partialize(u({},r()));let e;o.whitelist&&Object.keys(t).forEach((e=>{var n;!(null==(n=o.whitelist)?void 0:n.includes(e))&&delete t[e]})),o.blacklist&&o.blacklist.forEach((e=>delete t[e]));const n=p({state:t,version:o.version}).then((t=>h.setItem(o.name,t))).catch((t=>{e=t}));if(e)throw e;return n},d=i.setState;i.setState=(t,e)=>{d(t,e),f()};const g=t(((...t)=>{n(...t),f()}),r,i);let y;const m=()=>{var t;if(!h)return;s=!1,a.forEach((t=>t(r())));const e=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,r()))||void 0;return c(h.getItem.bind(h))(o.name).then((t=>{if(t)return o.deserialize(t)})).then((t=>{if(t){if("number"!=typeof t.version||t.version===o.version)return t.state;if(o.migrate)return o.migrate(t.state,t.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((t=>{var e;return y=o.merge(t,null!=(e=r())?e:g),n(y,!0),f()})).then((()=>{null==e||e(y,void 0),s=!0,l.forEach((t=>t(y)))})).catch((t=>{null==e||e(void 0,t)}))};return i.persist={setOptions:t=>{o=u(u({},o),t),t.getStorage&&(h=t.getStorage())},clearStorage:()=>{var t;null==(t=null==h?void 0:h.removeItem)||t.call(h,o.name)},rehydrate:()=>m(),hasHydrated:()=>s,onHydrate:t=>(a.add(t),()=>{a.delete(t)}),onFinishHydration:t=>(l.add(t),()=>{l.delete(t)})},m(),y||g}},89394:function(t,e,n){"use strict";n.d(e,{cp:function(){return lg},e2:function(){return eg},z2:function(){return hg},lo:function(){return wg},hF:function(){return Sg},Ku:function(){return Ig},kg:function(){return ga},Dp:function(){return _a},uZ:function(){return Yd},WR:function(){return ag},h:function(){return pa}});var r,i,o={};n.r(o),n.d(o,{Decoder:function(){return Sr},Encoder:function(){return Er},PacketType:function(){return wr},protocol:function(){return br}}),function(t){t.assertEqual=t=>t,t.assertIs=function(t){},t.assertNever=function(t){throw new Error},t.arrayToEnum=t=>{const e={};for(const n of t)e[n]=n;return e},t.getValidEnumValues=e=>{const n=t.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const t of n)r[t]=e[t];return t.objectValues(r)},t.objectValues=e=>t.objectKeys(e).map((function(t){return e[t]})),t.objectKeys="function"==typeof Object.keys?t=>Object.keys(t):t=>{const e=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},t.find=(t,e)=>{for(const n of t)if(e(n))return n},t.isInteger="function"==typeof Number.isInteger?t=>Number.isInteger(t):t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t,t.joinValues=function(t,e=" | "){return t.map((t=>"string"==typeof t?`'${t}'`:t)).join(e)},t.jsonStringifyReplacer=(t,e)=>"bigint"==typeof e?e.toString():e}(r||(r={})),function(t){t.mergeShapes=(t,e)=>({...t,...e})}(i||(i={}));const s=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),a=t=>{switch(typeof t){case"undefined":return s.undefined;case"string":return s.string;case"number":return isNaN(t)?s.nan:s.number;case"boolean":return s.boolean;case"function":return s.function;case"bigint":return s.bigint;case"symbol":return s.symbol;case"object":return Array.isArray(t)?s.array:null===t?s.null:t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch?s.promise:"undefined"!=typeof Map&&t instanceof Map?s.map:"undefined"!=typeof Set&&t instanceof Set?s.set:"undefined"!=typeof Date&&t instanceof Date?s.date:s.object;default:return s.unknown}},u=r.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class c extends Error{constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const e=t||function(t){return t.message},n={_errors:[]},r=t=>{for(const i of t.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(e(i));else{let t=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(t[n]=t[n]||{_errors:[]},t[n]._errors.push(e(i))):t[n]=t[n]||{_errors:[]},t=t[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,r.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=(t=>t.message)){const e={},n=[];for(const r of this.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):n.push(t(r));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}c.create=t=>new c(t);const l=(t,e)=>{let n;switch(t.code){case u.invalid_type:n=t.received===s.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case u.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,r.jsonStringifyReplacer)}`;break;case u.unrecognized_keys:n=`Unrecognized key(s) in object: ${r.joinValues(t.keys,", ")}`;break;case u.invalid_union:n="Invalid input";break;case u.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${r.joinValues(t.options)}`;break;case u.invalid_enum_value:n=`Invalid enum value. Expected ${r.joinValues(t.options)}, received '${t.received}'`;break;case u.invalid_arguments:n="Invalid function arguments";break;case u.invalid_return_type:n="Invalid function return type";break;case u.invalid_date:n="Invalid date";break;case u.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:r.assertNever(t.validation):n="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case u.too_small:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case u.too_big:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case u.custom:n="Invalid input";break;case u.invalid_intersection_types:n="Intersection results could not be merged";break;case u.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case u.not_finite:n="Number must be finite";break;default:n=e.defaultError,r.assertNever(t)}return{message:n}};let h=l;function p(){return h}const f=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],s={...i,path:o};let a="";const u=r.filter((t=>!!t)).slice().reverse();for(const t of u)a=t(s,{data:e,defaultError:a}).message;return{...i,path:o,message:i.message||a}};function d(t,e){const n=f({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,p(),l].filter((t=>!!t))});t.common.issues.push(n)}class g{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const r of e){if("aborted"===r.status)return y;"dirty"===r.status&&t.dirty(),n.push(r.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const t of e)n.push({key:await t.key,value:await t.value});return g.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const r of e){const{key:e,value:i}=r;if("aborted"===e.status)return y;if("aborted"===i.status)return y;"dirty"===e.status&&t.dirty(),"dirty"===i.status&&t.dirty(),"__proto__"===e.value||void 0===i.value&&!r.alwaysSet||(n[e.value]=i.value)}return{status:t.value,value:n}}}const y=Object.freeze({status:"aborted"}),m=t=>({status:"dirty",value:t}),_=t=>({status:"valid",value:t}),v=t=>"aborted"===t.status,b=t=>"dirty"===t.status,w=t=>"valid"===t.status,E=t=>"undefined"!=typeof Promise&&t instanceof Promise;var x;!function(t){t.errToObj=t=>"string"==typeof t?{message:t}:t||{},t.toString=t=>"string"==typeof t?t:null==t?void 0:t.message}(x||(x={}));class S{constructor(t,e,n,r){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const I=(t,e)=>{if(w(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new c(t.common.issues);return this._error=e,this._error}}};function C(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(e)return{errorMap:e,description:i};return{errorMap:(t,e)=>"invalid_type"!==t.code?{message:e.defaultError}:void 0===e.data?{message:null!=r?r:e.defaultError}:{message:null!=n?n:e.defaultError},description:i}}class O{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return a(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new g,ctx:{common:t.parent.common,data:t.data,parsedType:a(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(E(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){var n;const r={common:{issues:[],async:null!==(n=null==e?void 0:e.async)&&void 0!==n&&n,contextualErrorMap:null==e?void 0:e.errorMap},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:a(t)},i=this._parseSync({data:t,path:r.path,parent:r});return I(r,i)}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:null==e?void 0:e.errorMap,async:!0},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:a(t)},r=this._parse({data:t,path:n.path,parent:n}),i=await(E(r)?r:Promise.resolve(r));return I(n,i)}refine(t,e){const n=t=>"string"==typeof e||void 0===e?{message:e}:"function"==typeof e?e(t):e;return this._refinement(((e,r)=>{const i=t(e),o=()=>r.addIssue({code:u.custom,...n(e)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((t=>!!t||(o(),!1))):!!i||(o(),!1)}))}refinement(t,e){return this._refinement(((n,r)=>!!t(n)||(r.addIssue("function"==typeof e?e(n,r):e),!1)))}_refinement(t){return new dt({schema:this,typeName:Ct.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return gt.create(this,this._def)}nullable(){return yt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this,this._def)}promise(){return ft.create(this,this._def)}or(t){return Q.create([this,t],this._def)}and(t){return nt.create(this,t,this._def)}transform(t){return new dt({...C(this._def),schema:this,typeName:Ct.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e="function"==typeof t?t:()=>t;return new mt({...C(this._def),innerType:this,defaultValue:e,typeName:Ct.ZodDefault})}brand(){return new wt({typeName:Ct.ZodBranded,type:this,...C(this._def)})}catch(t){const e="function"==typeof t?t:()=>t;return new _t({...C(this._def),innerType:this,catchValue:e,typeName:Ct.ZodCatch})}describe(t){return new(0,this.constructor)({...this._def,description:t})}pipe(t){return Et.create(this,t)}readonly(){return xt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const T=/^c[^\s-]{8,}$/i,P=/^[a-z][a-z0-9]*$/,N=/^[0-9A-HJKMNP-TV-Z]{26}$/,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,A=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let D;const L=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,M=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class k extends O{_parse(t){this._def.coerce&&(t.data=String(t.data));if(this._getType(t)!==s.string){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.string,received:e.parsedType}),y}const e=new g;let n;for(const s of this._def.checks)if("min"===s.kind)t.data.length<s.value&&(n=this._getOrReturnCtx(t,n),d(n,{code:u.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),e.dirty());else if("max"===s.kind)t.data.length>s.value&&(n=this._getOrReturnCtx(t,n),d(n,{code:u.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),e.dirty());else if("length"===s.kind){const r=t.data.length>s.value,i=t.data.length<s.value;(r||i)&&(n=this._getOrReturnCtx(t,n),r?d(n,{code:u.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&d(n,{code:u.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),e.dirty())}else if("email"===s.kind)A.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"email",code:u.invalid_string,message:s.message}),e.dirty());else if("emoji"===s.kind)D||(D=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),D.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"emoji",code:u.invalid_string,message:s.message}),e.dirty());else if("uuid"===s.kind)R.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"uuid",code:u.invalid_string,message:s.message}),e.dirty());else if("cuid"===s.kind)T.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"cuid",code:u.invalid_string,message:s.message}),e.dirty());else if("cuid2"===s.kind)P.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"cuid2",code:u.invalid_string,message:s.message}),e.dirty());else if("ulid"===s.kind)N.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"ulid",code:u.invalid_string,message:s.message}),e.dirty());else if("url"===s.kind)try{new URL(t.data)}catch(r){n=this._getOrReturnCtx(t,n),d(n,{validation:"url",code:u.invalid_string,message:s.message}),e.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{validation:"regex",code:u.invalid_string,message:s.message}),e.dirty())}else if("trim"===s.kind)t.data=t.data.trim();else if("includes"===s.kind)t.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(t,n),d(n,{code:u.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),e.dirty());else if("toLowerCase"===s.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===s.kind)t.data=t.data.toUpperCase();else if("startsWith"===s.kind)t.data.startsWith(s.value)||(n=this._getOrReturnCtx(t,n),d(n,{code:u.invalid_string,validation:{startsWith:s.value},message:s.message}),e.dirty());else if("endsWith"===s.kind)t.data.endsWith(s.value)||(n=this._getOrReturnCtx(t,n),d(n,{code:u.invalid_string,validation:{endsWith:s.value},message:s.message}),e.dirty());else if("datetime"===s.kind){((a=s).precision?a.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}Z$`):0===a.precision?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(t.data)||(n=this._getOrReturnCtx(t,n),d(n,{code:u.invalid_string,validation:"datetime",message:s.message}),e.dirty())}else"ip"===s.kind?(i=t.data,("v4"!==(o=s.version)&&o||!L.test(i))&&("v6"!==o&&o||!M.test(i))&&(n=this._getOrReturnCtx(t,n),d(n,{validation:"ip",code:u.invalid_string,message:s.message}),e.dirty())):r.assertNever(s);var i,o,a;return{status:e.value,value:t.data}}_regex(t,e,n){return this.refinement((e=>t.test(e)),{validation:e,code:u.invalid_string,...x.errToObj(n)})}_addCheck(t){return new k({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...x.errToObj(t)})}url(t){return this._addCheck({kind:"url",...x.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...x.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...x.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...x.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...x.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...x.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...x.errToObj(t)})}datetime(t){var e;return"string"==typeof t?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,offset:null!==(e=null==t?void 0:t.offset)&&void 0!==e&&e,...x.errToObj(null==t?void 0:t.message)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...x.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:null==e?void 0:e.position,...x.errToObj(null==e?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...x.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...x.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...x.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...x.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...x.errToObj(e)})}nonempty(t){return this.min(1,x.errToObj(t))}trim(){return new k({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new k({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new k({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((t=>"datetime"===t.kind))}get isEmail(){return!!this._def.checks.find((t=>"email"===t.kind))}get isURL(){return!!this._def.checks.find((t=>"url"===t.kind))}get isEmoji(){return!!this._def.checks.find((t=>"emoji"===t.kind))}get isUUID(){return!!this._def.checks.find((t=>"uuid"===t.kind))}get isCUID(){return!!this._def.checks.find((t=>"cuid"===t.kind))}get isCUID2(){return!!this._def.checks.find((t=>"cuid2"===t.kind))}get isULID(){return!!this._def.checks.find((t=>"ulid"===t.kind))}get isIP(){return!!this._def.checks.find((t=>"ip"===t.kind))}get minLength(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}function j(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(t.toFixed(i).replace(".",""))%parseInt(e.toFixed(i).replace(".",""))/Math.pow(10,i)}k.create=t=>{var e;return new k({checks:[],typeName:Ct.ZodString,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...C(t)})};class F extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){this._def.coerce&&(t.data=Number(t.data));if(this._getType(t)!==s.number){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.number,received:e.parsedType}),y}let e;const n=new g;for(const i of this._def.checks)if("int"===i.kind)r.isInteger(t.data)||(e=this._getOrReturnCtx(t,e),d(e,{code:u.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty());else if("min"===i.kind){(i.inclusive?t.data<i.value:t.data<=i.value)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?t.data>i.value:t.data>=i.value)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else"multipleOf"===i.kind?0!==j(t.data,i.value)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):"finite"===i.kind?Number.isFinite(t.data)||(e=this._getOrReturnCtx(t,e),d(e,{code:u.not_finite,message:i.message}),n.dirty()):r.assertNever(i);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,x.toString(e))}gt(t,e){return this.setLimit("min",t,!1,x.toString(e))}lte(t,e){return this.setLimit("max",t,!0,x.toString(e))}lt(t,e){return this.setLimit("max",t,!1,x.toString(e))}setLimit(t,e,n,r){return new F({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:x.toString(r)}]})}_addCheck(t){return new F({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:x.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:x.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:x.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find((t=>"int"===t.kind||"multipleOf"===t.kind&&r.isInteger(t.value)))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===e||n.value>e)&&(e=n.value):"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}F.create=t=>new F({checks:[],typeName:Ct.ZodNumber,coerce:(null==t?void 0:t.coerce)||!1,...C(t)});class B extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){this._def.coerce&&(t.data=BigInt(t.data));if(this._getType(t)!==s.bigint){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.bigint,received:e.parsedType}),y}let e;const n=new g;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?t.data<i.value:t.data<=i.value)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?t.data>i.value:t.data>=i.value)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?t.data%i.value!==BigInt(0)&&(e=this._getOrReturnCtx(t,e),d(e,{code:u.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):r.assertNever(i);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,x.toString(e))}gt(t,e){return this.setLimit("min",t,!1,x.toString(e))}lte(t,e){return this.setLimit("max",t,!0,x.toString(e))}lt(t,e){return this.setLimit("max",t,!1,x.toString(e))}setLimit(t,e,n,r){return new B({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:x.toString(r)}]})}_addCheck(t){return new B({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:x.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}B.create=t=>{var e;return new B({checks:[],typeName:Ct.ZodBigInt,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...C(t)})};class q extends O{_parse(t){this._def.coerce&&(t.data=Boolean(t.data));if(this._getType(t)!==s.boolean){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.boolean,received:e.parsedType}),y}return _(t.data)}}q.create=t=>new q({typeName:Ct.ZodBoolean,coerce:(null==t?void 0:t.coerce)||!1,...C(t)});class U extends O{_parse(t){this._def.coerce&&(t.data=new Date(t.data));if(this._getType(t)!==s.date){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.date,received:e.parsedType}),y}if(isNaN(t.data.getTime())){return d(this._getOrReturnCtx(t),{code:u.invalid_date}),y}const e=new g;let n;for(const i of this._def.checks)"min"===i.kind?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),d(n,{code:u.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),e.dirty()):"max"===i.kind?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),d(n,{code:u.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),e.dirty()):r.assertNever(i);return{status:e.value,value:new Date(t.data.getTime())}}_addCheck(t){return new U({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:x.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:x.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return null!=t?new Date(t):null}}U.create=t=>new U({checks:[],coerce:(null==t?void 0:t.coerce)||!1,typeName:Ct.ZodDate,...C(t)});class $ extends O{_parse(t){if(this._getType(t)!==s.symbol){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.symbol,received:e.parsedType}),y}return _(t.data)}}$.create=t=>new $({typeName:Ct.ZodSymbol,...C(t)});class z extends O{_parse(t){if(this._getType(t)!==s.undefined){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.undefined,received:e.parsedType}),y}return _(t.data)}}z.create=t=>new z({typeName:Ct.ZodUndefined,...C(t)});class G extends O{_parse(t){if(this._getType(t)!==s.null){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.null,received:e.parsedType}),y}return _(t.data)}}G.create=t=>new G({typeName:Ct.ZodNull,...C(t)});class V extends O{constructor(){super(...arguments),this._any=!0}_parse(t){return _(t.data)}}V.create=t=>new V({typeName:Ct.ZodAny,...C(t)});class Y extends O{constructor(){super(...arguments),this._unknown=!0}_parse(t){return _(t.data)}}Y.create=t=>new Y({typeName:Ct.ZodUnknown,...C(t)});class Z extends O{_parse(t){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.never,received:e.parsedType}),y}}Z.create=t=>new Z({typeName:Ct.ZodNever,...C(t)});class H extends O{_parse(t){if(this._getType(t)!==s.undefined){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.void,received:e.parsedType}),y}return _(t.data)}}H.create=t=>new H({typeName:Ct.ZodVoid,...C(t)});class X extends O{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),r=this._def;if(e.parsedType!==s.array)return d(e,{code:u.invalid_type,expected:s.array,received:e.parsedType}),y;if(null!==r.exactLength){const t=e.data.length>r.exactLength.value,i=e.data.length<r.exactLength.value;(t||i)&&(d(e,{code:t?u.too_big:u.too_small,minimum:i?r.exactLength.value:void 0,maximum:t?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&e.data.length<r.minLength.value&&(d(e,{code:u.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&e.data.length>r.maxLength.value&&(d(e,{code:u.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map(((t,n)=>r.type._parseAsync(new S(e,t,e.path,n))))).then((t=>g.mergeArray(n,t)));const i=[...e.data].map(((t,n)=>r.type._parseSync(new S(e,t,e.path,n))));return g.mergeArray(n,i)}get element(){return this._def.type}min(t,e){return new X({...this._def,minLength:{value:t,message:x.toString(e)}})}max(t,e){return new X({...this._def,maxLength:{value:t,message:x.toString(e)}})}length(t,e){return new X({...this._def,exactLength:{value:t,message:x.toString(e)}})}nonempty(t){return this.min(1,t)}}function W(t){if(t instanceof K){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=gt.create(W(r))}return new K({...t._def,shape:()=>e})}return t instanceof X?new X({...t._def,type:W(t.element)}):t instanceof gt?gt.create(W(t.unwrap())):t instanceof yt?yt.create(W(t.unwrap())):t instanceof rt?rt.create(t.items.map((t=>W(t)))):t}X.create=(t,e)=>new X({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ct.ZodArray,...C(e)});class K extends O{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const t=this._def.shape(),e=r.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==s.object){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.object,received:e.parsedType}),y}const{status:e,ctx:n}=this._processInputParams(t),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Z&&"strip"===this._def.unknownKeys))for(const t in n.data)i.includes(t)||o.push(t);const a=[];for(const t of i){const e=r[t],i=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new S(n,i,n.path,t)),alwaysSet:t in n.data})}if(this._def.catchall instanceof Z){const t=this._def.unknownKeys;if("passthrough"===t)for(const t of o)a.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===t)o.length>0&&(d(n,{code:u.unrecognized_keys,keys:o}),e.dirty());else if("strip"!==t)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const t=this._def.catchall;for(const e of o){const r=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new S(n,r,n.path,e)),alwaysSet:e in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const t=[];for(const e of a){const n=await e.key;t.push({key:n,value:await e.value,alwaysSet:e.alwaysSet})}return t})).then((t=>g.mergeObjectSync(e,t))):g.mergeObjectSync(e,a)}get shape(){return this._def.shape()}strict(t){return x.errToObj,new K({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,i,o,s;const a=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,e,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(s=x.errToObj(t).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new K({...this._def,unknownKeys:"strip"})}passthrough(){return new K({...this._def,unknownKeys:"passthrough"})}extend(t){return new K({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new K({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ct.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new K({...this._def,catchall:t})}pick(t){const e={};return r.objectKeys(t).forEach((n=>{t[n]&&this.shape[n]&&(e[n]=this.shape[n])})),new K({...this._def,shape:()=>e})}omit(t){const e={};return r.objectKeys(this.shape).forEach((n=>{t[n]||(e[n]=this.shape[n])})),new K({...this._def,shape:()=>e})}deepPartial(){return W(this)}partial(t){const e={};return r.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];t&&!t[n]?e[n]=r:e[n]=r.optional()})),new K({...this._def,shape:()=>e})}required(t){const e={};return r.objectKeys(this.shape).forEach((n=>{if(t&&!t[n])e[n]=this.shape[n];else{let t=this.shape[n];for(;t instanceof gt;)t=t._def.innerType;e[n]=t}})),new K({...this._def,shape:()=>e})}keyof(){return lt(r.objectKeys(this.shape))}}K.create=(t,e)=>new K({shape:()=>t,unknownKeys:"strip",catchall:Z.create(),typeName:Ct.ZodObject,...C(e)}),K.strictCreate=(t,e)=>new K({shape:()=>t,unknownKeys:"strict",catchall:Z.create(),typeName:Ct.ZodObject,...C(e)}),K.lazycreate=(t,e)=>new K({shape:t,unknownKeys:"strip",catchall:Z.create(),typeName:Ct.ZodObject,...C(e)});class Q extends O{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;if(e.common.async)return Promise.all(n.map((async t=>{const n={...e,common:{...e.common,issues:[]},parent:null};return{result:await t._parseAsync({data:e.data,path:e.path,parent:n}),ctx:n}}))).then((function(t){for(const e of t)if("valid"===e.result.status)return e.result;for(const n of t)if("dirty"===n.result.status)return e.common.issues.push(...n.ctx.common.issues),n.result;const n=t.map((t=>new c(t.ctx.common.issues)));return d(e,{code:u.invalid_union,unionErrors:n}),y}));{let t;const r=[];for(const i of n){const n={...e,common:{...e.common,issues:[]},parent:null},o=i._parseSync({data:e.data,path:e.path,parent:n});if("valid"===o.status)return o;"dirty"!==o.status||t||(t={result:o,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(t)return e.common.issues.push(...t.ctx.common.issues),t.result;const i=r.map((t=>new c(t)));return d(e,{code:u.invalid_union,unionErrors:i}),y}}get options(){return this._def.options}}Q.create=(t,e)=>new Q({options:t,typeName:Ct.ZodUnion,...C(e)});const J=t=>t instanceof ut?J(t.schema):t instanceof dt?J(t.innerType()):t instanceof ct?[t.value]:t instanceof ht?t.options:t instanceof pt?Object.keys(t.enum):t instanceof mt?J(t._def.innerType):t instanceof z?[void 0]:t instanceof G?[null]:null;class tt extends O{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==s.object)return d(e,{code:u.invalid_type,expected:s.object,received:e.parsedType}),y;const n=this.discriminator,r=e.data[n],i=this.optionsMap.get(r);return i?e.common.async?i._parseAsync({data:e.data,path:e.path,parent:e}):i._parseSync({data:e.data,path:e.path,parent:e}):(d(e,{code:u.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,n){const r=new Map;for(const n of e){const e=J(n.shape[t]);if(!e)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const i of e){if(r.has(i))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(i)}`);r.set(i,n)}}return new tt({typeName:Ct.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:r,...C(n)})}}function et(t,e){const n=a(t),i=a(e);if(t===e)return{valid:!0,data:t};if(n===s.object&&i===s.object){const n=r.objectKeys(e),i=r.objectKeys(t).filter((t=>-1!==n.indexOf(t))),o={...t,...e};for(const n of i){const r=et(t[n],e[n]);if(!r.valid)return{valid:!1};o[n]=r.data}return{valid:!0,data:o}}if(n===s.array&&i===s.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<t.length;r++){const i=et(t[r],e[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===s.date&&i===s.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class nt extends O{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),r=(t,r)=>{if(v(t)||v(r))return y;const i=et(t.value,r.value);return i.valid?((b(t)||b(r))&&e.dirty(),{status:e.value,value:i.data}):(d(n,{code:u.invalid_intersection_types}),y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([t,e])=>r(t,e))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}nt.create=(t,e,n)=>new nt({left:t,right:e,typeName:Ct.ZodIntersection,...C(n)});class rt extends O{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==s.array)return d(n,{code:u.invalid_type,expected:s.array,received:n.parsedType}),y;if(n.data.length<this._def.items.length)return d(n,{code:u.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),y;!this._def.rest&&n.data.length>this._def.items.length&&(d(n,{code:u.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...n.data].map(((t,e)=>{const r=this._def.items[e]||this._def.rest;return r?r._parse(new S(n,t,n.path,e)):null})).filter((t=>!!t));return n.common.async?Promise.all(r).then((t=>g.mergeArray(e,t))):g.mergeArray(e,r)}get items(){return this._def.items}rest(t){return new rt({...this._def,rest:t})}}rt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new rt({items:t,typeName:Ct.ZodTuple,rest:null,...C(e)})};class it extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==s.object)return d(n,{code:u.invalid_type,expected:s.object,received:n.parsedType}),y;const r=[],i=this._def.keyType,o=this._def.valueType;for(const t in n.data)r.push({key:i._parse(new S(n,t,n.path,t)),value:o._parse(new S(n,n.data[t],n.path,t))});return n.common.async?g.mergeObjectAsync(e,r):g.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(t,e,n){return new it(e instanceof O?{keyType:t,valueType:e,typeName:Ct.ZodRecord,...C(n)}:{keyType:k.create(),valueType:t,typeName:Ct.ZodRecord,...C(e)})}}class ot extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==s.map)return d(n,{code:u.invalid_type,expected:s.map,received:n.parsedType}),y;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map((([t,e],o)=>({key:r._parse(new S(n,t,n.path,[o,"key"])),value:i._parse(new S(n,e,n.path,[o,"value"]))})));if(n.common.async){const t=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return y;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}}))}{const t=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return y;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}}}}ot.create=(t,e,n)=>new ot({valueType:e,keyType:t,typeName:Ct.ZodMap,...C(n)});class st extends O{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==s.set)return d(n,{code:u.invalid_type,expected:s.set,received:n.parsedType}),y;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(d(n,{code:u.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),e.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(d(n,{code:u.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),e.dirty());const i=this._def.valueType;function o(t){const n=new Set;for(const r of t){if("aborted"===r.status)return y;"dirty"===r.status&&e.dirty(),n.add(r.value)}return{status:e.value,value:n}}const a=[...n.data.values()].map(((t,e)=>i._parse(new S(n,t,n.path,e))));return n.common.async?Promise.all(a).then((t=>o(t))):o(a)}min(t,e){return new st({...this._def,minSize:{value:t,message:x.toString(e)}})}max(t,e){return new st({...this._def,maxSize:{value:t,message:x.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}st.create=(t,e)=>new st({valueType:t,minSize:null,maxSize:null,typeName:Ct.ZodSet,...C(e)});class at extends O{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==s.function)return d(e,{code:u.invalid_type,expected:s.function,received:e.parsedType}),y;function n(t,n){return f({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,p(),l].filter((t=>!!t)),issueData:{code:u.invalid_arguments,argumentsError:n}})}function r(t,n){return f({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,p(),l].filter((t=>!!t)),issueData:{code:u.invalid_return_type,returnTypeError:n}})}const i={errorMap:e.common.contextualErrorMap},o=e.data;if(this._def.returns instanceof ft){const t=this;return _((async function(...e){const s=new c([]),a=await t._def.args.parseAsync(e,i).catch((t=>{throw s.addIssue(n(e,t)),s})),u=await Reflect.apply(o,this,a);return await t._def.returns._def.type.parseAsync(u,i).catch((t=>{throw s.addIssue(r(u,t)),s}))}))}{const t=this;return _((function(...e){const s=t._def.args.safeParse(e,i);if(!s.success)throw new c([n(e,s.error)]);const a=Reflect.apply(o,this,s.data),u=t._def.returns.safeParse(a,i);if(!u.success)throw new c([r(a,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new at({...this._def,args:rt.create(t).rest(Y.create())})}returns(t){return new at({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,n){return new at({args:t||rt.create([]).rest(Y.create()),returns:e||Y.create(),typeName:Ct.ZodFunction,...C(n)})}}class ut extends O{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}ut.create=(t,e)=>new ut({getter:t,typeName:Ct.ZodLazy,...C(e)});class ct extends O{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return d(e,{received:e.data,code:u.invalid_literal,expected:this._def.value}),y}return{status:"valid",value:t.data}}get value(){return this._def.value}}function lt(t,e){return new ht({values:t,typeName:Ct.ZodEnum,...C(e)})}ct.create=(t,e)=>new ct({value:t,typeName:Ct.ZodLiteral,...C(e)});class ht extends O{_parse(t){if("string"!=typeof t.data){const e=this._getOrReturnCtx(t),n=this._def.values;return d(e,{expected:r.joinValues(n),received:e.parsedType,code:u.invalid_type}),y}if(-1===this._def.values.indexOf(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return d(e,{received:e.data,code:u.invalid_enum_value,options:n}),y}return _(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t){return ht.create(t)}exclude(t){return ht.create(this.options.filter((e=>!t.includes(e))))}}ht.create=lt;class pt extends O{_parse(t){const e=r.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==s.string&&n.parsedType!==s.number){const t=r.objectValues(e);return d(n,{expected:r.joinValues(t),received:n.parsedType,code:u.invalid_type}),y}if(-1===e.indexOf(t.data)){const t=r.objectValues(e);return d(n,{received:n.data,code:u.invalid_enum_value,options:t}),y}return _(t.data)}get enum(){return this._def.values}}pt.create=(t,e)=>new pt({values:t,typeName:Ct.ZodNativeEnum,...C(e)});class ft extends O{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==s.promise&&!1===e.common.async)return d(e,{code:u.invalid_type,expected:s.promise,received:e.parsedType}),y;const n=e.parsedType===s.promise?e.data:Promise.resolve(e.data);return _(n.then((t=>this._def.type.parseAsync(t,{path:e.path,errorMap:e.common.contextualErrorMap}))))}}ft.create=(t,e)=>new ft({type:t,typeName:Ct.ZodPromise,...C(e)});class dt extends O{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:t=>{d(n,t),t.fatal?e.abort():e.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===i.type){const t=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(t).then((t=>this._def.schema._parseAsync({data:t,path:n.path,parent:n}))):this._def.schema._parseSync({data:t,path:n.path,parent:n})}if("refinement"===i.type){const t=t=>{const e=i.refinement(t,o);if(n.common.async)return Promise.resolve(e);if(e instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return t};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?y:("dirty"===r.status&&e.dirty(),t(r.value),{status:e.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?y:("dirty"===n.status&&e.dirty(),t(n.value).then((()=>({status:e.value,value:n.value}))))))}if("transform"===i.type){if(!1===n.common.async){const t=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!w(t))return t;const r=i.transform(t.value,o);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((t=>w(t)?Promise.resolve(i.transform(t.value,o)).then((t=>({status:e.value,value:t}))):t))}r.assertNever(i)}}dt.create=(t,e,n)=>new dt({schema:t,typeName:Ct.ZodEffects,effect:e,...C(n)}),dt.createWithPreprocess=(t,e,n)=>new dt({schema:e,effect:{type:"preprocess",transform:t},typeName:Ct.ZodEffects,...C(n)});class gt extends O{_parse(t){return this._getType(t)===s.undefined?_(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}gt.create=(t,e)=>new gt({innerType:t,typeName:Ct.ZodOptional,...C(e)});class yt extends O{_parse(t){return this._getType(t)===s.null?_(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}yt.create=(t,e)=>new yt({innerType:t,typeName:Ct.ZodNullable,...C(e)});class mt extends O{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===s.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}mt.create=(t,e)=>new mt({innerType:t,typeName:Ct.ZodDefault,defaultValue:"function"==typeof e.default?e.default:()=>e.default,...C(e)});class _t extends O{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return E(r)?r.then((t=>({status:"valid",value:"valid"===t.status?t.value:this._def.catchValue({get error(){return new c(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new c(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}_t.create=(t,e)=>new _t({innerType:t,typeName:Ct.ZodCatch,catchValue:"function"==typeof e.catch?e.catch:()=>e.catch,...C(e)});class vt extends O{_parse(t){if(this._getType(t)!==s.nan){const e=this._getOrReturnCtx(t);return d(e,{code:u.invalid_type,expected:s.nan,received:e.parsedType}),y}return{status:"valid",value:t.data}}}vt.create=t=>new vt({typeName:Ct.ZodNaN,...C(t)});const bt=Symbol("zod_brand");class wt extends O{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class Et extends O{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async){return(async()=>{const t=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?y:"dirty"===t.status?(e.dirty(),m(t.value)):this._def.out._parseAsync({data:t.value,path:n.path,parent:n})})()}{const t=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?y:"dirty"===t.status?(e.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:n.path,parent:n})}}static create(t,e){return new Et({in:t,out:e,typeName:Ct.ZodPipeline})}}class xt extends O{_parse(t){const e=this._def.innerType._parse(t);return w(e)&&(e.value=Object.freeze(e.value)),e}}xt.create=(t,e)=>new xt({innerType:t,typeName:Ct.ZodReadonly,...C(e)});const St=(t,e={},n)=>t?V.create().superRefine(((r,i)=>{var o,s;if(!t(r)){const t="function"==typeof e?e(r):"string"==typeof e?{message:e}:e,a=null===(s=null!==(o=t.fatal)&&void 0!==o?o:n)||void 0===s||s,u="string"==typeof t?{message:t}:t;i.addIssue({code:"custom",...u,fatal:a})}})):V.create(),It={object:K.lazycreate};var Ct;!function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"}(Ct||(Ct={}));const Ot=k.create,Tt=F.create,Pt=vt.create,Nt=B.create,Rt=q.create,At=U.create,Dt=$.create,Lt=z.create,Mt=G.create,kt=V.create,jt=Y.create,Ft=Z.create,Bt=H.create,qt=X.create,Ut=K.create,$t=K.strictCreate,zt=Q.create,Gt=tt.create,Vt=nt.create,Yt=rt.create,Zt=it.create,Ht=ot.create,Xt=st.create,Wt=at.create,Kt=ut.create,Qt=ct.create,Jt=ht.create,te=pt.create,ee=ft.create,ne=dt.create,re=gt.create,ie=yt.create,oe=dt.createWithPreprocess,se=Et.create,ae={string:t=>k.create({...t,coerce:!0}),number:t=>F.create({...t,coerce:!0}),boolean:t=>q.create({...t,coerce:!0}),bigint:t=>B.create({...t,coerce:!0}),date:t=>U.create({...t,coerce:!0})},ue=y;var ce=Object.freeze({__proto__:null,defaultErrorMap:l,setErrorMap:function(t){h=t},getErrorMap:p,makeIssue:f,EMPTY_PATH:[],addIssueToContext:d,ParseStatus:g,INVALID:y,DIRTY:m,OK:_,isAborted:v,isDirty:b,isValid:w,isAsync:E,get util(){return r},get objectUtil(){return i},ZodParsedType:s,getParsedType:a,ZodType:O,ZodString:k,ZodNumber:F,ZodBigInt:B,ZodBoolean:q,ZodDate:U,ZodSymbol:$,ZodUndefined:z,ZodNull:G,ZodAny:V,ZodUnknown:Y,ZodNever:Z,ZodVoid:H,ZodArray:X,ZodObject:K,ZodUnion:Q,ZodDiscriminatedUnion:tt,ZodIntersection:nt,ZodTuple:rt,ZodRecord:it,ZodMap:ot,ZodSet:st,ZodFunction:at,ZodLazy:ut,ZodLiteral:ct,ZodEnum:ht,ZodNativeEnum:pt,ZodPromise:ft,ZodEffects:dt,ZodTransformer:dt,ZodOptional:gt,ZodNullable:yt,ZodDefault:mt,ZodCatch:_t,ZodNaN:vt,BRAND:bt,ZodBranded:wt,ZodPipeline:Et,ZodReadonly:xt,custom:St,Schema:O,ZodSchema:O,late:It,get ZodFirstPartyTypeKind(){return Ct},coerce:ae,any:kt,array:qt,bigint:Nt,boolean:Rt,date:At,discriminatedUnion:Gt,effect:ne,enum:Jt,function:Wt,instanceof:(t,e={message:`Input not instance of ${t.name}`})=>St((e=>e instanceof t),e),intersection:Vt,lazy:Kt,literal:Qt,map:Ht,nan:Pt,nativeEnum:te,never:Ft,null:Mt,nullable:ie,number:Tt,object:Ut,oboolean:()=>Rt().optional(),onumber:()=>Tt().optional(),optional:re,ostring:()=>Ot().optional(),pipeline:se,preprocess:oe,promise:ee,record:Zt,set:Xt,strictObject:$t,string:Ot,symbol:Dt,transformer:ne,tuple:Yt,undefined:Lt,union:zt,unknown:jt,void:Bt,NEVER:ue,ZodIssueCode:u,quotelessJson:t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:c});const le=[0,2e3,1e4,3e4,null];class he{constructor(t){this._retryDelays=void 0!==t?[...t,null]:le}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}class pe{}pe.Authorization="Authorization",pe.Cookie="Cookie";class fe{constructor(t,e,n){this.statusCode=t,this.statusText=e,this.content=n}}class de{get(t,e){return this.send({...e,method:"GET",url:t})}post(t,e){return this.send({...e,method:"POST",url:t})}delete(t,e){return this.send({...e,method:"DELETE",url:t})}getCookieString(t){return""}}class ge extends de{constructor(t,e){super(),this._innerClient=t,this._accessTokenFactory=e}async send(t){let e=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(e=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(t);const n=await this._innerClient.send(t);return e&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(t),await this._innerClient.send(t)):n}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[pe.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[pe.Authorization]&&delete t.headers[pe.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}class ye extends Error{constructor(t,e){const n=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.__proto__=n}}class me extends Error{constructor(t="A timeout occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class _e extends Error{constructor(t="An abort occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class ve extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=n}}class be extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=n}}class we extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Ee extends Error{constructor(t){const e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class xe extends Error{constructor(t,e){const n=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=n}}var Se;!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(Se||(Se={}));class Ie{constructor(){}log(t,e){}}Ie.instance=new Ie;var Ce=n(34155);const Oe="7.0.12";class Te{static isRequired(t,e){if(null==t)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(t,e,n){if(!(t in e))throw new Error(`Unknown ${n} value: ${t}.`)}}class Pe{static get isBrowser(){return"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return"object"==typeof self&&"importScripts"in self}static get isReactNative(){return"object"==typeof window&&void 0===window.document}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function Ne(t,e){let n="";return Re(t)?(n=`Binary data of length ${t.byteLength}`,e&&(n+=`. Content: '${function(t){const e=new Uint8Array(t);let n="";return e.forEach((t=>{n+=`0x${t<16?"0":""}${t.toString(16)} `})),n.substr(0,n.length-1)}(t)}'`)):"string"==typeof t&&(n=`String data of length ${t.length}`,e&&(n+=`. Content: '${t}'`)),n}function Re(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}async function Ae(t,e,n,r,i,o){const s={},[a,u]=Me();s[a]=u,t.log(Se.Trace,`(${e} transport) sending data. ${Ne(i,o.logMessageContent)}.`);const c=Re(i)?"arraybuffer":"text",l=await n.post(r,{content:i,headers:{...s,...o.headers},responseType:c,timeout:o.timeout,withCredentials:o.withCredentials});t.log(Se.Trace,`(${e} transport) request complete. Response status: ${l.statusCode}.`)}class De{constructor(t,e){this._subject=t,this._observer=e}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((t=>{}))}}class Le{constructor(t){this._minLevel=t,this.out=console}log(t,e){if(t>=this._minLevel){const n=`[${(new Date).toISOString()}] ${Se[t]}: ${e}`;switch(t){case Se.Critical:case Se.Error:this.out.error(n);break;case Se.Warning:this.out.warn(n);break;case Se.Information:this.out.info(n);break;default:this.out.log(n)}}}}function Me(){let t="X-SignalR-User-Agent";return Pe.isNode&&(t="User-Agent"),[t,ke(Oe,je(),Be(),Fe())]}function ke(t,e,n,r){let i="Microsoft SignalR/";const o=t.split(".");return i+=`${o[0]}.${o[1]}`,i+=` (${t}; `,i+=e&&""!==e?`${e}; `:"Unknown OS; ",i+=`${n}`,i+=r?`; ${r}`:"; Unknown Runtime Version",i+=")",i}function je(){if(!Pe.isNode)return"";switch(Ce.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return Ce.platform}}function Fe(){if(Pe.isNode)return Ce.versions.node}function Be(){return Pe.isNode?"NodeJS":"Browser"}function qe(t){return t.stack?t.stack:t.message?t.message:`${t}`}class Ue extends de{constructor(t){if(super(),this._logger=t,"undefined"==typeof fetch){const t=require;this._jar=new(t("tough-cookie").CookieJar),this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const t=require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new _e;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const e=new this._abortControllerType;let n;t.abortSignal&&(t.abortSignal.onabort=()=>{e.abort(),n=new _e});let r,i=null;if(t.timeout){const r=t.timeout;i=setTimeout((()=>{e.abort(),this._logger.log(Se.Warning,"Timeout from HTTP request."),n=new me}),r)}""===t.content&&(t.content=void 0),t.content&&(t.headers=t.headers||{},Re(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(t){if(n)throw n;throw this._logger.log(Se.Warning,`Error from HTTP request. ${t}.`),t}finally{i&&clearTimeout(i),t.abortSignal&&(t.abortSignal.onabort=null)}if(!r.ok){const t=await $e(r,"text");throw new ye(t||r.statusText,r.status)}const o=$e(r,t.responseType),s=await o;return new fe(r.status,r.statusText,s)}getCookieString(t){let e="";return Pe.isNode&&this._jar&&this._jar.getCookies(t,((t,n)=>e=n.join("; "))),e}}function $e(t,e){let n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":default:n=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`)}return n}class ze extends de{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new _e):t.method?t.url?new Promise(((e,n)=>{const r=new XMLHttpRequest;r.open(t.method,t.url,!0),r.withCredentials=void 0===t.withCredentials||t.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(Re(t.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const i=t.headers;i&&Object.keys(i).forEach((t=>{r.setRequestHeader(t,i[t])})),t.responseType&&(r.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{r.abort(),n(new _e)}),t.timeout&&(r.timeout=t.timeout),r.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),r.status>=200&&r.status<300?e(new fe(r.status,r.statusText,r.response||r.responseText)):n(new ye(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(Se.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new ye(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(Se.Warning,"Timeout from HTTP request."),n(new me)},r.send(t.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Ge extends de{constructor(t){if(super(),"undefined"!=typeof fetch||Pe.isNode)this._httpClient=new Ue(t);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new ze(t)}}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new _e):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}var Ve,Ye;!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(Ve||(Ve={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(Ye||(Ye={}));class Ze{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class He{constructor(t,e,n){this._httpClient=t,this._logger=e,this._pollAbort=new Ze,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(t,e){if(Te.isRequired(t,"url"),Te.isRequired(e,"transferFormat"),Te.isIn(e,Ye,"transferFormat"),this._url=t,this._logger.log(Se.Trace,"(LongPolling transport) Connecting."),e===Ye.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=Me(),i={[n]:r,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:i,timeout:1e5,withCredentials:this._options.withCredentials};e===Ye.Binary&&(o.responseType="arraybuffer");const s=`${t}&_=${Date.now()}`;this._logger.log(Se.Trace,`(LongPolling transport) polling: ${s}.`);const a=await this._httpClient.get(s,o);200!==a.statusCode?(this._logger.log(Se.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this._closeError=new ye(a.statusText||"",a.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(t,e){try{for(;this._running;)try{const n=`${t}&_=${Date.now()}`;this._logger.log(Se.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,e);204===r.statusCode?(this._logger.log(Se.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(Se.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new ye(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(Se.Trace,`(LongPolling transport) data received. ${Ne(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(Se.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof me?this._logger.log(Se.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(Se.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(Se.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?Ae(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Se.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Se.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const t={},[e,n]=Me();t[e]=n;const r={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};await this._httpClient.delete(this._url,r),this._logger.log(Se.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(Se.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(Se.Trace,t),this.onclose(this._closeError)}}}class Xe{constructor(t,e,n,r){this._httpClient=t,this._accessToken=e,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(t,e){return Te.isRequired(t,"url"),Te.isRequired(e,"transferFormat"),Te.isIn(e,Ye,"transferFormat"),this._logger.log(Se.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let i,o=!1;if(e===Ye.Text){if(Pe.isBrowser||Pe.isWebWorker)i=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const e=this._httpClient.getCookieString(t),n={};n.Cookie=e;const[r,o]=Me();n[r]=o,i=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{i.onmessage=t=>{if(this.onreceive)try{this._logger.log(Se.Trace,`(SSE transport) data received. ${Ne(t.data,this._options.logMessageContent)}.`),this.onreceive(t.data)}catch(t){return void this._close(t)}},i.onerror=t=>{o?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(Se.Information,`SSE connected to ${this._url}`),this._eventSource=i,o=!0,n()}}catch(t){return void r(t)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(t){return this._eventSource?Ae(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class We{constructor(t,e,n,r,i,o){this._logger=n,this._accessTokenFactory=e,this._logMessageContent=r,this._webSocketConstructor=i,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=o}async connect(t,e){let n;return Te.isRequired(t,"url"),Te.isRequired(e,"transferFormat"),Te.isIn(e,Ye,"transferFormat"),this._logger.log(Se.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,i)=>{let o;t=t.replace(/^http/,"ws");const s=this._httpClient.getCookieString(t);let a=!1;if(Pe.isNode||Pe.isReactNative){const e={},[r,i]=Me();e[r]=i,n&&(e[pe.Authorization]=`Bearer ${n}`),s&&(e[pe.Cookie]=s),o=new this._webSocketConstructor(t,void 0,{headers:{...e,...this._headers}})}else n&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);o||(o=new this._webSocketConstructor(t)),e===Ye.Binary&&(o.binaryType="arraybuffer"),o.onopen=e=>{this._logger.log(Se.Information,`WebSocket connected to ${t}.`),this._webSocket=o,a=!0,r()},o.onerror=t=>{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",this._logger.log(Se.Information,`(WebSockets transport) ${e}.`)},o.onmessage=t=>{if(this._logger.log(Se.Trace,`(WebSockets transport) data received. ${Ne(t.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(t.data)}catch(t){return void this._close(t)}},o.onclose=t=>{if(a)this._close(t);else{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(e))}}}))}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Se.Trace,`(WebSockets transport) sending data. ${Ne(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Se.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)))}_isCloseEvent(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code}}class Ke{constructor(t,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Te.isRequired(t,"url"),this._logger=function(t){return void 0===t?new Le(Se.Information):null===t?Ie.instance:void 0!==t.log?t:new Le(t)}(e.logger),this.baseUrl=this._resolveUrl(t),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout;let n=null,r=null;if(Pe.isNode){const t=require;n=t("ws"),r=t("eventsource")}Pe.isNode||"undefined"==typeof WebSocket||e.WebSocket?Pe.isNode&&!e.WebSocket&&n&&(e.WebSocket=n):e.WebSocket=WebSocket,Pe.isNode||"undefined"==typeof EventSource||e.EventSource?Pe.isNode&&!e.EventSource&&void 0!==r&&(e.EventSource=r):e.EventSource=EventSource,this._httpClient=new ge(e.httpClient||new Ge(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}async start(t){if(t=t||Ye.Binary,Te.isIn(t,Ye,"transferFormat"),this._logger.log(Se.Debug,`Starting connection with transfer format '${Ye[t]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,"Disconnecting"===this._connectionState){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Se.Error,t),await this._stopPromise,Promise.reject(new _e(t))}if("Connected"!==this._connectionState){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Se.Error,t),Promise.reject(new _e(t))}this._connectionStarted=!0}send(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Qe(this.transport)),this._sendQueue.send(t))}async stop(t){return"Disconnected"===this._connectionState?(this._logger.log(Se.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(Se.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((t=>{this._stopPromiseResolver=t})),await this._stopInternal(t),void await this._stopPromise)}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch(t){}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(Se.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Se.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let e=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==Ve.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(Ve.WebSockets),await this._startTransport(e,t)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(e),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new _e("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(e=n.url),n.accessToken){const t=n.accessToken;this._accessTokenFactory=()=>t,this._httpClient._accessToken=t,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(e,this._options.transport,n,t)}this.transport instanceof He&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(Se.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(Se.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}}async _getNegotiationResponse(t){const e={},[n,r]=Me();e[n]=r;const i=this._resolveNegotiateUrl(t);this._logger.log(Se.Debug,`Sending negotiation request: ${i}.`);try{const t=await this._httpClient.post(i,{content:"",headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==t.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${t.statusCode}'`));const n=JSON.parse(t.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n}catch(t){let e="Failed to complete negotiation with the server: "+t;return t instanceof ye&&404===t.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Se.Error,e),Promise.reject(new Ee(e))}}_createConnectUrl(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+`id=${e}`:t}async _createTransport(t,e,n,r){let i=this._createConnectUrl(t,n.connectionToken);if(this._isITransport(e))return this._logger.log(Se.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,await this._startTransport(i,r),void(this.connectionId=n.connectionId);const o=[],s=n.availableTransports||[];let a=n;for(const n of s){const s=this._resolveTransportOrError(n,e,r);if(s instanceof Error)o.push(`${n.transport} failed:`),o.push(s);else if(this._isITransport(s)){if(this.transport=s,!a){try{a=await this._getNegotiationResponse(t)}catch(t){return Promise.reject(t)}i=this._createConnectUrl(t,a.connectionToken)}try{return await this._startTransport(i,r),void(this.connectionId=a.connectionId)}catch(t){if(this._logger.log(Se.Error,`Failed to start the transport '${n.transport}': ${t}`),a=void 0,o.push(new we(`${n.transport} failed: ${t}`,Ve[n.transport])),"Connecting"!==this._connectionState){const t="Failed to select transport before stop() was called.";return this._logger.log(Se.Debug,t),Promise.reject(new _e(t))}}}}return o.length>0?Promise.reject(new xe(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case Ve.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new We(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Ve.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Xe(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Ve.LongPolling:return new He(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,e){return this.transport.onreceive=this.onreceive,this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(t,e)}_resolveTransportOrError(t,e,n){const r=Ve[t.transport];if(null==r)return this._logger.log(Se.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(!function(t,e){return!t||0!=(e&t)}(e,r))return this._logger.log(Se.Debug,`Skipping transport '${Ve[r]}' because it was disabled by the client.`),new be(`'${Ve[r]}' is disabled by the client.`,r);if(!(t.transferFormats.map((t=>Ye[t])).indexOf(n)>=0))return this._logger.log(Se.Debug,`Skipping transport '${Ve[r]}' because it does not support the requested transfer format '${Ye[n]}'.`),new Error(`'${Ve[r]}' does not support ${Ye[n]}.`);if(r===Ve.WebSockets&&!this._options.WebSocket||r===Ve.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Se.Debug,`Skipping transport '${Ve[r]}' because it is not supported in your environment.'`),new ve(`'${Ve[r]}' is not supported in your environment.`,r);this._logger.log(Se.Debug,`Selecting transport '${Ve[r]}'.`);try{return this._constructTransport(r)}catch(t){return t}}_isITransport(t){return t&&"object"==typeof t&&"connect"in t}_stopConnection(t){if(this._logger.log(Se.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(Se.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(Se.Error,`Connection disconnected with error '${t}'.`):this._logger.log(Se.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((t=>{this._logger.log(Se.Error,`TransportSendQueue.stop() threw error '${t}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(Se.Error,`HttpConnection.onclose(${t}) threw error '${e}'.`)}}}else this._logger.log(Se.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!Pe.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const e=window.document.createElement("a");return e.href=t,this._logger.log(Se.Information,`Normalizing '${t}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(t){const e=t.indexOf("?");let n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===e?"":t.substring(e),-1===n.indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this._negotiateVersion),n}}class Qe{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Je,this._transportResult=new Je,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new Je),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Je;const t=this._transportResult;this._transportResult=void 0;const e="string"==typeof this._buffer[0]?this._buffer.join(""):Qe._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(e),t.resolve()}catch(e){t.reject(e)}}}static _concatBuffers(t){const e=t.map((t=>t.byteLength)).reduce(((t,e)=>t+e)),n=new Uint8Array(e);let r=0;for(const e of t)n.set(new Uint8Array(e),r),r+=e.byteLength;return n.buffer}}class Je{constructor(){this.promise=new Promise(((t,e)=>[this._resolver,this._rejecter]=[t,e]))}resolve(){this._resolver()}reject(t){this._rejecter(t)}}class tn{static write(t){return`${t}${tn.RecordSeparator}`}static parse(t){if(t[t.length-1]!==tn.RecordSeparator)throw new Error("Message is incomplete.");const e=t.split(tn.RecordSeparator);return e.pop(),e}}tn.RecordSeparatorCode=30,tn.RecordSeparator=String.fromCharCode(tn.RecordSeparatorCode);class en{writeHandshakeRequest(t){return tn.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,n;if(Re(t)){const r=new Uint8Array(t),i=r.indexOf(tn.RecordSeparatorCode);if(-1===i)throw new Error("Message is incomplete.");const o=i+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,o))),n=r.byteLength>o?r.slice(o).buffer:null}else{const r=t,i=r.indexOf(tn.RecordSeparator);if(-1===i)throw new Error("Message is incomplete.");const o=i+1;e=r.substring(0,o),n=r.length>o?r.substring(o):null}const r=tn.parse(e),i=JSON.parse(r[0]);if(i.type)throw new Error("Expected a handshake response from the server.");return[n,i]}}var nn;!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(nn||(nn={}));class rn{constructor(){this.observers=[]}next(t){for(const e of this.observers)e.next(t)}error(t){for(const e of this.observers)e.error&&e.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new De(this,t)}}var on;!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(on||(on={}));class sn{constructor(t,e,n,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Se.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Te.isRequired(t,"connection"),Te.isRequired(e,"logger"),Te.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=e,this._protocol=n,this.connection=t,this._reconnectPolicy=r,this._handshakeProtocol=new en,this.connection.onreceive=t=>this._processIncomingData(t),this.connection.onclose=t=>this._connectionClosed(t),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=on.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:nn.Ping})}static create(t,e,n,r){return new sn(t,e,n,r)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==on.Disconnected&&this._connectionState!==on.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==on.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=on.Connecting,this._logger.log(Se.Debug,"Starting HubConnection.");try{await this._startInternal(),Pe.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=on.Connected,this._connectionStarted=!0,this._logger.log(Se.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=on.Disconnected,this._logger.log(Se.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise(((t,e)=>{this._handshakeResolver=t,this._handshakeRejecter=e}));await this.connection.start(this._protocol.transferFormat);try{const e={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(Se.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(e)),this._logger.log(Se.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(Se.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const t=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch(t){}}_stopInternal(t){return this._connectionState===on.Disconnected?(this._logger.log(Se.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===on.Disconnecting?(this._logger.log(Se.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=on.Disconnecting,this._logger.log(Se.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Se.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new _e("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))}stream(t,...e){const[n,r]=this._replaceStreamingParams(e),i=this._createStreamInvocation(t,e,r);let o;const s=new rn;return s.cancelCallback=()=>{const t=this._createCancelInvocation(i.invocationId);return delete this._callbacks[i.invocationId],o.then((()=>this._sendWithProtocol(t)))},this._callbacks[i.invocationId]=(t,e)=>{e?s.error(e):t&&(t.type===nn.Completion?t.error?s.error(new Error(t.error)):s.complete():s.next(t.item))},o=this._sendWithProtocol(i).catch((t=>{s.error(t),delete this._callbacks[i.invocationId]})),this._launchStreams(n,o),s}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._sendMessage(this._protocol.writeMessage(t))}send(t,...e){const[n,r]=this._replaceStreamingParams(e),i=this._sendWithProtocol(this._createInvocation(t,e,!0,r));return this._launchStreams(n,i),i}invoke(t,...e){const[n,r]=this._replaceStreamingParams(e),i=this._createInvocation(t,e,!1,r);return new Promise(((t,e)=>{this._callbacks[i.invocationId]=(n,r)=>{r?e(r):n&&(n.type===nn.Completion?n.error?e(new Error(n.error)):t(n.result):e(new Error(`Unexpected message type: ${n.type}`)))};const r=this._sendWithProtocol(i).catch((t=>{e(t),delete this._callbacks[i.invocationId]}));this._launchStreams(n,r)}))}on(t,e){t&&e&&(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),-1===this._methods[t].indexOf(e)&&this._methods[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();const n=this._methods[t];if(n)if(e){const r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const e=this._protocol.parseMessages(t,this._logger);for(const t of e)switch(t.type){case nn.Invocation:this._invokeClientMethod(t);break;case nn.StreamItem:case nn.Completion:{const e=this._callbacks[t.invocationId];if(e){t.type===nn.Completion&&delete this._callbacks[t.invocationId];try{e(t)}catch(t){this._logger.log(Se.Error,`Stream callback threw error: ${qe(t)}`)}}break}case nn.Ping:break;case nn.Close:{this._logger.log(Se.Information,"Close message received from server.");const e=t.error?new Error("Server returned an error on close: "+t.error):void 0;!0===t.allowReconnect?this.connection.stop(e):this._stopPromise=this._stopInternal(e);break}default:this._logger.log(Se.Warning,`Invalid message type: ${t.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let e,n;try{[n,e]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(t){const e="Error parsing handshake response: "+t;this._logger.log(Se.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}if(e.error){const t="Server returned handshake error: "+e.error;this._logger.log(Se.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}return this._logger.log(Se.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let t=this._nextKeepAlive-(new Date).getTime();t<0&&(t=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===on.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(t){const e=t.target.toLowerCase(),n=this._methods[e];if(!n)return this._logger.log(Se.Warning,`No client method with the name '${e}' found.`),void(t.invocationId&&(this._logger.log(Se.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),i=!!t.invocationId;let o,s,a;for(const n of r)try{const r=o;o=await n.apply(this,t.arguments),i&&o&&r&&(this._logger.log(Se.Error,`Multiple results provided for '${e}'. Sending error to server.`),a=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),s=void 0}catch(t){s=t,this._logger.log(Se.Error,`A callback for the method '${e}' threw error '${t}'.`)}a?await this._sendWithProtocol(a):i?(s?a=this._createCompletionMessage(t.invocationId,`${s}`,null):void 0!==o?a=this._createCompletionMessage(t.invocationId,null,o):(this._logger.log(Se.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),a=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(a)):o&&this._logger.log(Se.Error,`Result given for '${e}' method but server is not expecting a result.`)}_connectionClosed(t){this._logger.log(Se.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new _e("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===on.Disconnecting?this._completeClose(t):this._connectionState===on.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===on.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=on.Disconnected,this._connectionStarted=!1,Pe.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((e=>e.apply(this,[t])))}catch(e){this._logger.log(Se.Error,`An onclose callback called with error '${t}' threw error '${e}'.`)}}}async _reconnect(t){const e=Date.now();let n=0,r=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),i=this._getNextRetryDelay(n++,0,r);if(null===i)return this._logger.log(Se.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(t);if(this._connectionState=on.Reconnecting,t?this._logger.log(Se.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(Se.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((e=>e.apply(this,[t])))}catch(e){this._logger.log(Se.Error,`An onreconnecting callback called with error '${t}' threw error '${e}'.`)}if(this._connectionState!==on.Reconnecting)return void this._logger.log(Se.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==i;){if(this._logger.log(Se.Information,`Reconnect attempt number ${n} will start in ${i} ms.`),await new Promise((t=>{this._reconnectDelayHandle=setTimeout(t,i)})),this._reconnectDelayHandle=void 0,this._connectionState!==on.Reconnecting)return void this._logger.log(Se.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=on.Connected,this._logger.log(Se.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((t=>t.apply(this,[this.connection.connectionId])))}catch(t){this._logger.log(Se.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${t}'.`)}return}catch(t){if(this._logger.log(Se.Information,`Reconnect attempt failed because of error '${t}'.`),this._connectionState!==on.Reconnecting)return this._logger.log(Se.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===on.Disconnecting&&this._completeClose());r=t instanceof Error?t:new Error(t.toString()),i=this._getNextRetryDelay(n++,Date.now()-e,r)}}this._logger.log(Se.Information,`Reconnect retries have been exhausted after ${Date.now()-e} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(t,e,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(n){return this._logger.log(Se.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${e}) threw error '${n}'.`),null}}_cancelCallbacksWithError(t){const e=this._callbacks;this._callbacks={},Object.keys(e).forEach((n=>{const r=e[n];try{r(null,t)}catch(e){this._logger.log(Se.Error,`Stream 'error' callback called with '${t}' threw error: ${qe(e)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,e,n,r){if(n)return 0!==r.length?{arguments:e,streamIds:r,target:t,type:nn.Invocation}:{arguments:e,target:t,type:nn.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:e,invocationId:n.toString(),streamIds:r,target:t,type:nn.Invocation}:{arguments:e,invocationId:n.toString(),target:t,type:nn.Invocation}}}_launchStreams(t,e){if(0!==t.length){e||(e=Promise.resolve());for(const n in t)t[n].subscribe({complete:()=>{e=e.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:t=>{let r;r=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:t=>{e=e.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,t))))}})}}_replaceStreamingParams(t){const e=[],n=[];for(let r=0;r<t.length;r++){const i=t[r];if(this._isObservable(i)){const o=this._invocationId;this._invocationId++,e[o]=i,n.push(o.toString()),t.splice(r,1)}}return[e,n]}_isObservable(t){return t&&t.subscribe&&"function"==typeof t.subscribe}_createStreamInvocation(t,e,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:nn.StreamInvocation}:{arguments:e,invocationId:r.toString(),target:t,type:nn.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:nn.CancelInvocation}}_createStreamItemMessage(t,e){return{invocationId:t,item:e,type:nn.StreamItem}}_createCompletionMessage(t,e,n){return e?{error:e,invocationId:t,type:nn.Completion}:{invocationId:t,result:n,type:nn.Completion}}}class an{constructor(){this.name="json",this.version=1,this.transferFormat=Ye.Text}parseMessages(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=Ie.instance);const n=tn.parse(t),r=[];for(const t of n){const n=JSON.parse(t);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case nn.Invocation:this._isInvocationMessage(n);break;case nn.StreamItem:this._isStreamItemMessage(n);break;case nn.Completion:this._isCompletionMessage(n);break;case nn.Ping:case nn.Close:break;default:e.log(Se.Information,"Unknown message type '"+n.type+"' ignored.");continue}r.push(n)}return r}writeMessage(t){return tn.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(t,e){if("string"!=typeof t||""===t)throw new Error(e)}}const un={trace:Se.Trace,debug:Se.Debug,info:Se.Information,information:Se.Information,warn:Se.Warning,warning:Se.Warning,error:Se.Error,critical:Se.Critical,none:Se.None};class cn{configureLogging(t){if(Te.isRequired(t,"logging"),function(t){return void 0!==t.log}(t))this.logger=t;else if("string"==typeof t){const e=function(t){const e=un[t.toLowerCase()];if(void 0!==e)return e;throw new Error(`Unknown log level: ${t}`)}(t);this.logger=new Le(e)}else this.logger=new Le(t);return this}withUrl(t,e){return Te.isRequired(t,"url"),Te.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"==typeof e?{...this.httpConnectionOptions,...e}:{...this.httpConnectionOptions,transport:e},this}withHubProtocol(t){return Te.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new he(t):this.reconnectPolicy=t:this.reconnectPolicy=new he,this}build(){const t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new Ke(this.url,t);return sn.create(e,this.logger||Ie.instance,this.protocol||new an,this.reconnectPolicy)}}const ln=Object.create(null);ln.open="0",ln.close="1",ln.ping="2",ln.pong="3",ln.message="4",ln.upgrade="5",ln.noop="6";const hn=Object.create(null);Object.keys(ln).forEach((t=>{hn[ln[t]]=t}));const pn={type:"error",data:"parser error"},fn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),dn="function"==typeof ArrayBuffer,gn=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,yn=({type:t,data:e},n,r)=>fn&&e instanceof Blob?n?r(e):mn(e,r):dn&&(e instanceof ArrayBuffer||gn(e))?n?r(e):mn(new Blob([e]),r):r(ln[t]+(e||"")),mn=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};function _n(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let vn;const bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wn="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<64;t++)wn[bn.charCodeAt(t)]=t;const En="function"==typeof ArrayBuffer,xn=(t,e)=>{if("string"!=typeof t)return{type:"message",data:In(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:Sn(t.substring(1),e)};return hn[n]?t.length>1?{type:hn[n],data:t.substring(1)}:{type:hn[n]}:pn},Sn=(t,e)=>{if(En){const n=(t=>{let e,n,r,i,o,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);const c=new ArrayBuffer(s),l=new Uint8Array(c);for(e=0;e<a;e+=4)n=wn[t.charCodeAt(e)],r=wn[t.charCodeAt(e+1)],i=wn[t.charCodeAt(e+2)],o=wn[t.charCodeAt(e+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c})(t);return In(n,e)}return{base64:!0,data:t}},In=(t,e)=>"blob"===e?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Cn=String.fromCharCode(30);function On(){return new TransformStream({transform(t,e){!function(t,e){fn&&t.data instanceof Blob?t.data.arrayBuffer().then(_n).then(e):dn&&(t.data instanceof ArrayBuffer||gn(t.data))?e(_n(t.data)):yn(t,!1,(t=>{vn||(vn=new TextEncoder),e(vn.encode(t))}))}(t,(n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const t=new DataView(i.buffer);t.setUint8(0,126),t.setUint16(1,r)}else{i=new Uint8Array(9);const t=new DataView(i.buffer);t.setUint8(0,127),t.setBigUint64(1,BigInt(r))}t.data&&"string"!=typeof t.data&&(i[0]|=128),e.enqueue(i),e.enqueue(n)}))}})}let Tn;function Pn(t){return t.reduce(((t,e)=>t+e.length),0)}function Nn(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Rn(t){if(t)return function(t){for(var e in Rn.prototype)t[e]=Rn.prototype[e];return t}(t)}Rn.prototype.on=Rn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Rn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},Rn.prototype.off=Rn.prototype.removeListener=Rn.prototype.removeAllListeners=Rn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},Rn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},Rn.prototype.emitReserved=Rn.prototype.emit,Rn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Rn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const An="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Dn(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}const Ln=An.setTimeout,Mn=An.clearTimeout;function kn(t,e){e.useNativeTimers?(t.setTimeoutFn=Ln.bind(An),t.clearTimeoutFn=Mn.bind(An)):(t.setTimeoutFn=An.setTimeout.bind(An),t.clearTimeoutFn=An.clearTimeout.bind(An))}class jn extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class Fn extends Rn{constructor(t){super(),this.writable=!1,kn(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new jn(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=xn(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){const e=function(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}(t);return e.length?"?"+e:""}}const Bn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),qn=64,Un={};let $n,zn=0,Gn=0;function Vn(t){let e="";do{e=Bn[t%qn]+e,t=Math.floor(t/qn)}while(t>0);return e}function Yn(){const t=Vn(+new Date);return t!==$n?(zn=0,$n=t):t+"."+Vn(zn++)}for(;Gn<qn;Gn++)Un[Bn[Gn]]=Gn;let Zn=!1;try{Zn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const Hn=Zn;function Xn(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Hn))return new XMLHttpRequest}catch(t){}if(!e)try{return new(An[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function Wn(){}const Kn=null!=new Xn({xdomain:!1}).responseType;class Qn extends Rn{constructor(t,e){super(),kn(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t;const e=Dn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const n=this.xhr=new Xn(e);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&n.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var t;3===n.readyState&&(null===(t=this.opts.cookieJar)||void 0===t||t.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=Qn.requestsCount++,Qn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Wn,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Qn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Qn.requestsCount=0,Qn.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Jn);else if("function"==typeof addEventListener){addEventListener("onpagehide"in An?"pagehide":"unload",Jn,!1)}function Jn(){for(let t in Qn.requests)Qn.requests.hasOwnProperty(t)&&Qn.requests[t].abort()}const tr="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),er=An.WebSocket||An.MozWebSocket;n(8375).lW;const nr="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const rr={websocket:class extends Fn{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=nr?{}:Dn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=nr?new er(t,e,n):e?new er(t,e):new er(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],r=e===t.length-1;yn(n,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}r&&tr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Yn()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!er}},webtransport:class extends Fn{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError("webtransport error",t)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{const e=function(t,e){Tn||(Tn=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===r){if(Pn(n)<1)break;const t=Nn(n,1);o=128==(128&t[0]),i=127&t[0],r=i<126?3:126===i?1:2}else if(1===r){if(Pn(n)<2)break;const t=Nn(n,2);i=new DataView(t.buffer,t.byteOffset,t.length).getUint16(0),r=3}else if(2===r){if(Pn(n)<8)break;const t=Nn(n,8),e=new DataView(t.buffer,t.byteOffset,t.length),o=e.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(pn);break}i=o*Math.pow(2,32)+e.getUint32(4),r=3}else{if(Pn(n)<i)break;const t=Nn(n,i);a.enqueue(xn(o?t:Tn.decode(t),e)),r=0}if(0===i||i>t){a.enqueue(pn);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),r=On();r.readable.pipeTo(t.writable),this.writer=r.writable.getWriter();const i=()=>{n.read().then((({done:t,value:e})=>{t||(this.onPacket(e),i())})).catch((t=>{}))};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then((()=>this.onOpen()))}))})))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],r=e===t.length-1;this.writer.write(n).then((()=>{r&&tr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var t;null===(t=this.transport)||void 0===t||t.close()}},polling:class extends Fn{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port}const e=t&&t.forceBase64;this.supportsBinary=Kn&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const n=t.split(Cn),r=[];for(let t=0;t<n.length;t++){const i=xn(n[t],e);if(r.push(i),"error"===i.type)break}return r})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach(((t,o)=>{yn(t,!1,(t=>{r[o]=t,++i===n&&e(r.join(Cn))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Yn()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Qn(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},ir=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,or=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sr(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=ir.exec(t||""),o={},s=14;for(;s--;)o[or[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");"/"!=e.slice(0,1)&&0!==e.length||r.splice(0,1);"/"==e.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,o.query),o}class ar extends Rn{constructor(t,e={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],t&&"object"==typeof t&&(e=t,t=null),t?(t=sr(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=sr(e.host).host),kn(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},n=t.split("&");for(let t=0,r=n.length;t<r;t++){let r=n[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new rr[t](n)}open(){let t;if(this.opts.rememberUpgrade&&ar.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),n=!1;ar.priorWebsocketSuccess=!1;const r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;ar.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function i(){n||(n=!0,c(),e.close(),e=null)}const o=t=>{const n=new Error("probe error: "+t);n.transport=e.name,i(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function u(t){e&&t.name!==e.name&&i()}const c=()=>{e.removeListener("open",r),e.removeListener("error",o),e.removeListener("close",s),this.off("close",a),this.off("upgrading",u)};e.once("open",r),e.once("error",o),e.once("close",s),this.once("close",a),this.once("upgrading",u),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn((()=>{n||e.open()}),200):e.open()}onOpen(){if(this.readyState="open",ar.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+="string"==typeof(e=r)?function(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}var e;return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){ar.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}ar.protocol=4;ar.protocol;const ur="function"==typeof ArrayBuffer,cr=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,lr=Object.prototype.toString,hr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===lr.call(Blob),pr="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===lr.call(File);function fr(t){return ur&&(t instanceof ArrayBuffer||cr(t))||hr&&t instanceof Blob||pr&&t instanceof File}function dr(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,n=t.length;e<n;e++)if(dr(t[e]))return!0;return!1}if(fr(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return dr(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&dr(t[e]))return!0;return!1}function gr(t){const e=[],n=t.data,r=t;return r.data=yr(n,e),r.attachments=e.length,{packet:r,buffers:e}}function yr(t,e){if(!t)return t;if(fr(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=yr(t[r],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=yr(t[r],e));return n}return t}function mr(t,e){return t.data=_r(t.data,e),delete t.attachments,t}function _r(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=_r(t[n],e);else if("object"==typeof t)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=_r(t[n],e));return t}const vr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],br=5;var wr;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(wr||(wr={}));class Er{constructor(t){this.replacer=t}encode(t){return t.type!==wr.EVENT&&t.type!==wr.ACK||!dr(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===wr.EVENT?wr.BINARY_EVENT:wr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==wr.BINARY_EVENT&&t.type!==wr.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=gr(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}function xr(t){return"[object Object]"===Object.prototype.toString.call(t)}class Sr extends Rn{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===wr.BINARY_EVENT;n||e.type===wr.BINARY_ACK?(e.type=n?wr.EVENT:wr.ACK,this.reconstructor=new Ir(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!fr(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===wr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===wr.BINARY_EVENT||n.type===wr.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(r,e)}else n.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!Sr.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case wr.CONNECT:return xr(e);case wr.DISCONNECT:return void 0===e;case wr.CONNECT_ERROR:return"string"==typeof e||xr(e);case wr.EVENT:case wr.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===vr.indexOf(e[0]));case wr.ACK:case wr.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ir{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=mr(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Cr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Or=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Tr extends Rn{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Cr(t,"open",this.onopen.bind(this)),Cr(t,"packet",this.onpacket.bind(this)),Cr(t,"error",this.onerror.bind(this)),Cr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Or.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const n={type:wr.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,r=e.pop();this._registerAckCallback(t,r),n.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[t]=e);const i=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),r);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...t])}}emitWithAck(t,...e){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((r,i)=>{e.push(((t,e)=>n?t?i(t):r(e):r(t))),this.emit(t,...e)}))}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...r)=>{if(n!==this._queue[0])return;return null!==t?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:wr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case wr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wr.EVENT:case wr.BINARY_EVENT:this.onevent(t);break;case wr.ACK:case wr.BINARY_ACK:this.onack(t);break;case wr.DISCONNECT:this.ondisconnect();break;case wr.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...r){n||(n=!0,e.packet({type:wr.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Pr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Pr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Pr.prototype.reset=function(){this.attempts=0},Pr.prototype.setMin=function(t){this.ms=t},Pr.prototype.setMax=function(t){this.max=t},Pr.prototype.setJitter=function(t){this.jitter=t};class Nr extends Rn{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,kn(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||o;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ar(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Cr(e,"open",(function(){n.onopen(),t&&t()})),i=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()},o=Cr(e,"error",i);if(!1!==this._timeout){const t=this._timeout,n=this.setTimeoutFn((()=>{r(),i(new Error("timeout")),e.close()}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Cr(t,"ping",this.onping.bind(this)),Cr(t,"data",this.ondata.bind(this)),Cr(t,"error",this.onerror.bind(this)),Cr(t,"close",this.onclose.bind(this)),Cr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){tr((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Tr(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Rr={};function Ar(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=sr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=Rr[i]&&o in Rr[i].nsps;let a;return e.forceNew||e["force new connection"]||!1===e.multiplex||s?a=new Nr(r,e):(Rr[i]||(Rr[i]=new Nr(r,e)),a=Rr[i]),n.query&&!e.query&&(e.query=n.queryKey),a.socket(n.path,e)}function Dr(t,e,n,r){function i(i){for(var o=e.length,s=0;s<o;){if(t===e[s])return n[s];s+=1}for(var a in e[s+1]=t,n[s+1]=i,t)i[a]=r?Dr(t[a],e,n,!0):t[a];return i}switch(null===(s=t)?"Null":void 0===s?"Undefined":Object.prototype.toString.call(s).slice(8,-1)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(t.valueOf());case"RegExp":return o=t,new RegExp(o.source,(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":""));default:return t}var o,s}Object.assign(Ar,{Manager:Nr,Socket:Tr,io:Ar,connect:Ar});n(8375);var Lr=6371008.8,Mr={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:Lr,metres:Lr,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function kr(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function jr(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Yr(t[0])||!Yr(t[1]))throw new Error("coordinates must contain numbers");return kr({type:"Point",coordinates:t},e,n)}function Fr(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return kr({type:"Polygon",coordinates:t},e,n)}function Br(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return kr({type:"LineString",coordinates:t},e,n)}function qr(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Ur(t,e,n){return void 0===n&&(n={}),kr({type:"MultiPoint",coordinates:t},e,n)}function $r(t,e){void 0===e&&(e="kilometers");var n=Mr[e];if(!n)throw new Error(e+" units is invalid");return t*n}function zr(t,e){void 0===e&&(e="kilometers");var n=Mr[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Gr(t){return 180*(t%(2*Math.PI))/Math.PI}function Vr(t){return t%360*Math.PI/180}function Yr(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Zr(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(c=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<a;_++){var v=0,b=0;if(null!==(s=l?c.geometries[_]:c)){u=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,m,v,b))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,m,v,b))return!1;p++,"MultiPoint"===w&&v++}"LineString"===w&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],p,m,v,b))return!1;p++}"MultiLineString"===w&&v++,"Polygon"===w&&b++}"Polygon"===w&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],p,m,v,b))return!1;p++}b++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Zr(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Xr(t,e){var n,r,i,o,s,a,u,c,l,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},l=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,h))return!1;p++}}function Wr(t,e){Xr(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(kr(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u];if(!1===e(kr({type:s,coordinates:c},r),n,u))return!1}}))}function Kr(t,e,n){var r=n,i=!1;return function(t,e){Wr(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,c=0;return!1!==Zr(t,(function(o,l,h,p,f){if(void 0===s||n>a||p>u||f>c)return s=o,a=n,u=p,c=f,void(i=0);var d=Br([s,o],t.properties);if(!1===e(d,n,r,f,i))return!1;i++,s=o}))&&void 0}}}))}(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function Qr(t){var e=[1/0,1/0,-1/0,-1/0];return Zr(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}Qr.default=Qr;var Jr=Qr;function ti(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ei(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ni(t){return"Feature"===t.type?t.geometry:t}n(96086);n(72273);function ri(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=ti(t),i=ni(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,c=0;c<a.length&&!u;c++)if(ii(r,a[c][0],n.ignoreBoundary)){for(var l=!1,h=1;h<a[c].length&&!l;)ii(r,a[c][h],!n.ignoreBoundary)&&(l=!0),h++;l||(u=!0)}return u}function ii(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}var oi=function(t,e,n){void 0===n&&(n={});var r=ti(t),i=ti(e),o=Vr(i[1]-r[1]),s=Vr(i[0]-r[0]),a=Vr(r[1]),u=Vr(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return $r(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)};Object.prototype.hasOwnProperty;var si=new ArrayBuffer(16);new Float64Array(si),new Uint32Array(si);n(65510);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();var ai=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return Fr([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}(Jr(t))};function ui(t,e,n,r){void 0===r&&(r={});var i=ti(t),o=Vr(i[0]),s=Vr(i[1]),a=Vr(n),u=zr(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return jr([Gr(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c))),Gr(c)],r.properties)}function ci(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=ci(e,t);return n=(n+180)%360}(t,e);var r=ti(t),i=ti(e),o=Vr(r[0]),s=Vr(i[0]),a=Vr(r[1]),u=Vr(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return Gr(Math.atan2(c,l))}n(9187);var li=function(t){if(!t)throw new Error("geojson is required");var e=[];return Wr(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=ei(r);break;case"LineString":n=[ei(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=Br([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n<i?n:i,a=r<o?r:o,u=n>i?n:i,c=r>o?r:o;return[s,a,u,c]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),qr(e)},hi=n(51787);function pi(t,e){var n=ei(t),r=ei(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],h=r[1][1],p=(h-c)*(s-i)-(l-u)*(a-o),f=(l-u)*(o-c)-(h-c)*(i-u),d=(s-i)*(o-c)-(a-o)*(i-u);if(0===p)return null;var g=f/p,y=d/p;return g>=0&&g<=1&&y>=0&&y<=1?jr([i+g*(s-i),o+g*(a-o)]):null}var fi=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=kr(t)),"LineString"===e.type&&(e=kr(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=pi(t,e);return i&&r.push(i),qr(r)}var o=hi();return o.load(li(e)),Hr(li(t),(function(t){Hr(o.search(t),(function(e){var i=pi(t,e);if(i){var o=ei(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),qr(r)};var di=function(t,e,n){void 0===n&&(n={});var r=jr([1/0,1/0],{dist:1/0}),i=0;return Wr(t,(function(t){for(var o=ei(t),s=0;s<o.length-1;s++){var a=jr(o[s]);a.properties.dist=oi(e,a,n);var u=jr(o[s+1]);u.properties.dist=oi(e,u,n);var c=oi(a,u,n),l=Math.max(a.properties.dist,u.properties.dist),h=ci(a,u),p=ui(e,l,h+90,n),f=ui(e,l,h-90,n),d=fi(Br([p.geometry.coordinates,f.geometry.coordinates]),Br([a.geometry.coordinates,u.geometry.coordinates])),g=null;d.features.length>0&&((g=d.features[0]).properties.dist=oi(e,g,n),g.properties.location=i+oi(a,g,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=i),u.properties.dist<r.properties.dist&&((r=u).properties.index=s+1,r.properties.location=i+c),g&&g.properties.dist<r.properties.dist&&((r=g).properties.index=s),i+=c}})),r};function gi(t,e,n){void 0===n&&(n={});for(var r=ni(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=ci(r[o],r[o-1])-180;return ui(r[o],s,a,n)}return jr(r[o])}i+=oi(r[o],r[o+1],n)}return jr(r[r.length-1])}function yi(t,e){return void 0===e&&(e={}),Kr(t,(function(t,n){var r=n.geometry.coordinates;return t+oi(r[0],r[1],e)}),0)}var mi=function(t,e,n){var r,i=ei(n);if("LineString"!==("FeatureCollection"===(r=n).type?"FeatureCollection":"GeometryCollection"===r.type?"GeometryCollection":"Feature"===r.type&&null!==r.geometry?r.geometry.type:r.type))throw new Error("line must be a LineString");for(var o,s=di(n,t),a=di(n,e),u=[(o=s.properties.index<=a.properties.index?[s,a]:[a,s])[0].geometry.coordinates],c=o[0].properties.index+1;c<o[1].properties.index+1;c++)u.push(i[c]);return u.push(o[1].geometry.coordinates),Br(u,n.properties)};function _i(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],c=e[0],l=e[1],h=c-a,p=l-u,f=(n[0]-a)*p-(n[1]-u)*h;if(null!==i){if(Math.abs(f)>i)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=c:c<=o&&o<a:p>0?u<s&&s<=l:l<=s&&s<u:"end"===r?Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<c:c<o&&o<=a:p>0?u<=s&&s<l:l<s&&s<=u:"both"===r&&(Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<c:c<o&&o<a:p>0?u<s&&s<l:l<s&&s<u):Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=c:c<=o&&o<=a:p>0?u<=s&&s<=l:l<=s&&s<=u}var vi=function(t,e,n){void 0===n&&(n={});for(var r=ti(t),i=ei(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),_i(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1};var bi=Math.PI/180,wi=180/Math.PI,Ei=function(t,e){this.lon=t,this.lat=e,this.x=bi*t,this.y=bi*e};Ei.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ei.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ei(e,t)};var xi=function(){this.coords=[],this.length=0};xi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Si=function(t){this.properties=t||{},this.geometries=[]};Si.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Si.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Ii=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ei(t.x,t.y),this.end=new Ei(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Ii.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=wi*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[wi*Math.atan2(i,r),s]},Ii.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,p=360-c,f=1;f<n.length;++f){var d=n[f-1][0],g=n[f][0],y=Math.abs(g-d);y>p&&(g>l&&d<h||d>l&&g<h)?a=!0:y>u&&(u=y)}var m=[];if(a&&u<c){var _=[];m.push(_);for(var v=0;v<n.length;++v){var b=parseFloat(n[v][0]);if(v>0&&Math.abs(b-n[v-1][0])>p){var w=parseFloat(n[v-1][0]),E=parseFloat(n[v-1][1]),x=parseFloat(n[v][0]),S=parseFloat(n[v][1]);if(w>-180&&w<h&&180===x&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<h){_.push([-180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(w>l&&w<180&&-180===x&&v+1<n.length&&n[v-1][0]>l&&n[v-1][0]<180){_.push([180,n[v][1]]),v++,_.push([n[v][0],n[v][1]]);continue}if(w<h&&x>l){var I=w;w=x,x=I;var C=E;E=S,S=C}if(w>l&&x<h&&(x+=360),w<=180&&x>=180&&w<x){var O=(180-w)/(x-w),T=O*S+(1-O)*E;_.push([n[v-1][0]>l?180:-180,T]),(_=[]).push([n[v-1][0]>l?-180:180,T]),m.push(_)}else _=[],m.push(_);_.push([b,n[v][1]])}else _.push([n[v][0],n[v][1]])}}else{var P=[];m.push(P);for(var N=0;N<n.length;++N)P.push([n[N][0],n[N][1]])}for(var R=new Si(this.properties),A=0;A<m.length;++A){var D=new xi;R.geometries.push(D);for(var L=m[A],M=0;M<L.length;++M)D.move_to(L[M])}return R};n(10251);var Ci=[],Oi=[],Ti=[],Pi=[],Ni=[],Ri=[],Ai=[],Di=[],Li=[],Mi=[],ki=[],ji=[],Fi=[],Bi=[],qi=[],Ui=[],$i=[],zi=[],Gi=[],Vi=[],Yi=[],Zi=[],Hi=[],Xi=[];Ai[85]=Mi[85]=-1,Di[85]=ki[85]=0,Li[85]=ji[85]=1,Gi[85]=Zi[85]=1,Vi[85]=Hi[85]=0,Yi[85]=Xi[85]=1,Ci[85]=Pi[85]=0,Oi[85]=Ni[85]=-1,Ti[85]=qi[85]=0,Ui[85]=Fi[85]=0,$i[85]=Bi[85]=1,Ri[85]=zi[85]=1,Zi[1]=Zi[169]=0,Hi[1]=Hi[169]=-1,Xi[1]=Xi[169]=0,Fi[1]=Fi[169]=-1,Bi[1]=Bi[169]=0,qi[1]=qi[169]=0,Mi[4]=Mi[166]=0,ki[4]=ki[166]=-1,ji[4]=ji[166]=1,Ui[4]=Ui[166]=1,$i[4]=$i[166]=0,zi[4]=zi[166]=0,Ai[16]=Ai[154]=0,Di[16]=Di[154]=1,Li[16]=Li[154]=1,Pi[16]=Pi[154]=1,Ni[16]=Ni[154]=0,Ri[16]=Ri[154]=1,Gi[64]=Gi[106]=0,Vi[64]=Vi[106]=1,Yi[64]=Yi[106]=0,Ci[64]=Ci[106]=-1,Oi[64]=Oi[106]=0,Ti[64]=Ti[106]=1,Gi[2]=Gi[168]=0,Vi[2]=Vi[168]=-1,Yi[2]=Yi[168]=1,Zi[2]=Zi[168]=0,Hi[2]=Hi[168]=-1,Xi[2]=Xi[168]=0,Fi[2]=Fi[168]=-1,Bi[2]=Bi[168]=0,qi[2]=qi[168]=0,Ui[2]=Ui[168]=-1,$i[2]=$i[168]=0,zi[2]=zi[168]=1,Ai[8]=Ai[162]=0,Di[8]=Di[162]=-1,Li[8]=Li[162]=0,Mi[8]=Mi[162]=0,ki[8]=ki[162]=-1,ji[8]=ji[162]=1,Fi[8]=Fi[162]=1,Bi[8]=Bi[162]=0,qi[8]=qi[162]=1,Ui[8]=Ui[162]=1,$i[8]=$i[162]=0,zi[8]=zi[162]=0,Ai[32]=Ai[138]=0,Di[32]=Di[138]=1,Li[32]=Li[138]=1,Mi[32]=Mi[138]=0,ki[32]=ki[138]=1,ji[32]=ji[138]=0,Ci[32]=Ci[138]=1,Oi[32]=Oi[138]=0,Ti[32]=Ti[138]=0,Pi[32]=Pi[138]=1,Ni[32]=Ni[138]=0,Ri[32]=Ri[138]=1,Zi[128]=Zi[42]=0,Hi[128]=Hi[42]=1,Xi[128]=Xi[42]=1,Gi[128]=Gi[42]=0,Vi[128]=Vi[42]=1,Yi[128]=Yi[42]=0,Ci[128]=Ci[42]=-1,Oi[128]=Oi[42]=0,Ti[128]=Ti[42]=1,Pi[128]=Pi[42]=-1,Ni[128]=Ni[42]=0,Ri[128]=Ri[42]=0,Mi[5]=Mi[165]=-1,ki[5]=ki[165]=0,ji[5]=ji[165]=0,Zi[5]=Zi[165]=1,Hi[5]=Hi[165]=0,Xi[5]=Xi[165]=0,Ui[20]=Ui[150]=0,$i[20]=$i[150]=1,zi[20]=zi[150]=1,Pi[20]=Pi[150]=0,Ni[20]=Ni[150]=-1,Ri[20]=Ri[150]=1,Ai[80]=Ai[90]=-1,Di[80]=Di[90]=0,Li[80]=Li[90]=1,Gi[80]=Gi[90]=1,Vi[80]=Vi[90]=0,Yi[80]=Yi[90]=1,Fi[65]=Fi[105]=0,Bi[65]=Bi[105]=1,qi[65]=qi[105]=0,Ci[65]=Ci[105]=0,Oi[65]=Oi[105]=-1,Ti[65]=Ti[105]=0,Ai[160]=Ai[10]=-1,Di[160]=Di[10]=0,Li[160]=Li[10]=1,Mi[160]=Mi[10]=-1,ki[160]=ki[10]=0,ji[160]=ji[10]=0,Zi[160]=Zi[10]=1,Hi[160]=Hi[10]=0,Xi[160]=Xi[10]=0,Gi[160]=Gi[10]=1,Vi[160]=Vi[10]=0,Yi[160]=Yi[10]=1,Ui[130]=Ui[40]=0,$i[130]=$i[40]=1,zi[130]=zi[40]=1,Fi[130]=Fi[40]=0,Bi[130]=Bi[40]=1,qi[130]=qi[40]=0,Ci[130]=Ci[40]=0,Oi[130]=Oi[40]=-1,Ti[130]=Ti[40]=0,Pi[130]=Pi[40]=0,Ni[130]=Ni[40]=-1,Ri[130]=Ri[40]=1,Mi[37]=Mi[133]=0,ki[37]=ki[133]=1,ji[37]=ji[133]=1,Zi[37]=Zi[133]=0,Hi[37]=Hi[133]=1,Xi[37]=Xi[133]=0,Ci[37]=Ci[133]=-1,Oi[37]=Oi[133]=0,Ti[37]=Ti[133]=0,Pi[37]=Pi[133]=1,Ni[37]=Ni[133]=0,Ri[37]=Ri[133]=0,Ui[148]=Ui[22]=-1,$i[148]=$i[22]=0,zi[148]=zi[22]=0,Zi[148]=Zi[22]=0,Hi[148]=Hi[22]=-1,Xi[148]=Xi[22]=1,Gi[148]=Gi[22]=0,Vi[148]=Vi[22]=1,Yi[148]=Yi[22]=1,Pi[148]=Pi[22]=-1,Ni[148]=Ni[22]=0,Ri[148]=Ri[22]=1,Ai[82]=Ai[88]=0,Di[82]=Di[88]=-1,Li[82]=Li[88]=1,Ui[82]=Ui[88]=1,$i[82]=$i[88]=0,zi[82]=zi[88]=1,Fi[82]=Fi[88]=-1,Bi[82]=Bi[88]=0,qi[82]=qi[88]=1,Gi[82]=Gi[88]=0,Vi[82]=Vi[88]=-1,Yi[82]=Yi[88]=0,Ai[73]=Ai[97]=0,Di[73]=Di[97]=1,Li[73]=Li[97]=0,Mi[73]=Mi[97]=0,ki[73]=ki[97]=-1,ji[73]=ji[97]=0,Fi[73]=Fi[97]=1,Bi[73]=Bi[97]=0,qi[73]=qi[97]=0,Ci[73]=Ci[97]=1,Oi[73]=Oi[97]=0,Ti[73]=Ti[97]=1,Ai[145]=Ai[25]=0,Di[145]=Di[25]=-1,Li[145]=Li[25]=0,Fi[145]=Fi[25]=1,Bi[145]=Bi[25]=0,qi[145]=qi[25]=1,Zi[145]=Zi[25]=0,Hi[145]=Hi[25]=1,Xi[145]=Xi[25]=1,Pi[145]=Pi[25]=-1,Ni[145]=Ni[25]=0,Ri[145]=Ri[25]=0,Mi[70]=Mi[100]=0,ki[70]=ki[100]=1,ji[70]=ji[100]=0,Ui[70]=Ui[100]=-1,$i[70]=$i[100]=0,zi[70]=zi[100]=1,Gi[70]=Gi[100]=0,Vi[70]=Vi[100]=-1,Yi[70]=Yi[100]=1,Ci[70]=Ci[100]=1,Oi[70]=Oi[100]=0,Ti[70]=Ti[100]=0,Mi[101]=Mi[69]=0,ki[101]=ki[69]=1,ji[101]=ji[69]=0,Ci[101]=Ci[69]=1,Oi[101]=Oi[69]=0,Ti[101]=Ti[69]=0,Zi[149]=Zi[21]=0,Hi[149]=Hi[21]=1,Xi[149]=Xi[21]=1,Pi[149]=Pi[21]=-1,Ni[149]=Ni[21]=0,Ri[149]=Ri[21]=0,Ui[86]=Ui[84]=-1,$i[86]=$i[84]=0,zi[86]=zi[84]=1,Gi[86]=Gi[84]=0,Vi[86]=Vi[84]=-1,Yi[86]=Yi[84]=1,Ai[89]=Ai[81]=0,Di[89]=Di[81]=-1,Li[89]=Li[81]=0,Fi[89]=Fi[81]=1,Bi[89]=Bi[81]=0,qi[89]=qi[81]=1,Ai[96]=Ai[74]=0,Di[96]=Di[74]=1,Li[96]=Li[74]=0,Mi[96]=Mi[74]=-1,ki[96]=ki[74]=0,ji[96]=ji[74]=1,Gi[96]=Gi[74]=1,Vi[96]=Vi[74]=0,Yi[96]=Yi[74]=0,Ci[96]=Ci[74]=1,Oi[96]=Oi[74]=0,Ti[96]=Ti[74]=1,Ai[24]=Ai[146]=0,Di[24]=Di[146]=-1,Li[24]=Li[146]=1,Ui[24]=Ui[146]=1,$i[24]=$i[146]=0,zi[24]=zi[146]=1,Fi[24]=Fi[146]=0,Bi[24]=Bi[146]=1,qi[24]=qi[146]=1,Pi[24]=Pi[146]=0,Ni[24]=Ni[146]=-1,Ri[24]=Ri[146]=0,Mi[6]=Mi[164]=-1,ki[6]=ki[164]=0,ji[6]=ji[164]=1,Ui[6]=Ui[164]=-1,$i[6]=$i[164]=0,zi[6]=zi[164]=0,Zi[6]=Zi[164]=0,Hi[6]=Hi[164]=-1,Xi[6]=Xi[164]=1,Gi[6]=Gi[164]=1,Vi[6]=Vi[164]=0,Yi[6]=Yi[164]=0,Fi[129]=Fi[41]=0,Bi[129]=Bi[41]=1,qi[129]=qi[41]=1,Zi[129]=Zi[41]=0,Hi[129]=Hi[41]=1,Xi[129]=Xi[41]=0,Ci[129]=Ci[41]=-1,Oi[129]=Oi[41]=0,Ti[129]=Ti[41]=0,Pi[129]=Pi[41]=0,Ni[129]=Ni[41]=-1,Ri[129]=Ri[41]=0,Ui[66]=Ui[104]=0,$i[66]=$i[104]=1,zi[66]=zi[104]=0,Fi[66]=Fi[104]=-1,Bi[66]=Bi[104]=0,qi[66]=qi[104]=1,Gi[66]=Gi[104]=0,Vi[66]=Vi[104]=-1,Yi[66]=Yi[104]=0,Ci[66]=Ci[104]=0,Oi[66]=Oi[104]=-1,Ti[66]=Ti[104]=1,Ai[144]=Ai[26]=-1,Di[144]=Di[26]=0,Li[144]=Li[26]=0,Zi[144]=Zi[26]=1,Hi[144]=Hi[26]=0,Xi[144]=Xi[26]=1,Gi[144]=Gi[26]=0,Vi[144]=Vi[26]=1,Yi[144]=Yi[26]=1,Pi[144]=Pi[26]=-1,Ni[144]=Ni[26]=0,Ri[144]=Ri[26]=1,Mi[36]=Mi[134]=0,ki[36]=ki[134]=1,ji[36]=ji[134]=1,Ui[36]=Ui[134]=0,$i[36]=$i[134]=1,zi[36]=zi[134]=0,Ci[36]=Ci[134]=0,Oi[36]=Oi[134]=-1,Ti[36]=Ti[134]=1,Pi[36]=Pi[134]=1,Ni[36]=Ni[134]=0,Ri[36]=Ri[134]=0,Ai[9]=Ai[161]=-1,Di[9]=Di[161]=0,Li[9]=Li[161]=0,Mi[9]=Mi[161]=0,ki[9]=ki[161]=-1,ji[9]=ji[161]=0,Fi[9]=Fi[161]=1,Bi[9]=Bi[161]=0,qi[9]=qi[161]=0,Zi[9]=Zi[161]=1,Hi[9]=Hi[161]=0,Xi[9]=Xi[161]=1,Ai[136]=0,Di[136]=1,Li[136]=1,Mi[136]=0,ki[136]=1,ji[136]=0,Ui[136]=-1,$i[136]=0,zi[136]=1,Fi[136]=-1,Bi[136]=0,qi[136]=0,Zi[136]=0,Hi[136]=-1,Xi[136]=0,Gi[136]=0,Vi[136]=-1,Yi[136]=1,Ci[136]=1,Oi[136]=0,Ti[136]=0,Pi[136]=1,Ni[136]=0,Ri[136]=1,Ai[34]=0,Di[34]=-1,Li[34]=0,Mi[34]=0,ki[34]=-1,ji[34]=1,Ui[34]=1,$i[34]=0,zi[34]=0,Fi[34]=1,Bi[34]=0,qi[34]=1,Zi[34]=0,Hi[34]=1,Xi[34]=1,Gi[34]=0,Vi[34]=1,Yi[34]=0,Ci[34]=-1,Oi[34]=0,Ti[34]=1,Pi[34]=-1,Ni[34]=0,Ri[34]=0,Ai[35]=0,Di[35]=1,Li[35]=1,Mi[35]=0,ki[35]=-1,ji[35]=1,Ui[35]=1,$i[35]=0,zi[35]=0,Fi[35]=-1,Bi[35]=0,qi[35]=0,Zi[35]=0,Hi[35]=-1,Xi[35]=0,Gi[35]=0,Vi[35]=1,Yi[35]=0,Ci[35]=-1,Oi[35]=0,Ti[35]=1,Pi[35]=1,Ni[35]=0,Ri[35]=1,Ai[153]=0,Di[153]=1,Li[153]=1,Fi[153]=-1,Bi[153]=0,qi[153]=0,Zi[153]=0,Hi[153]=-1,Xi[153]=0,Pi[153]=1,Ni[153]=0,Ri[153]=1,Mi[102]=0,ki[102]=-1,ji[102]=1,Ui[102]=1,$i[102]=0,zi[102]=0,Gi[102]=0,Vi[102]=1,Yi[102]=0,Ci[102]=-1,Oi[102]=0,Ti[102]=1,Ai[155]=0,Di[155]=-1,Li[155]=0,Fi[155]=1,Bi[155]=0,qi[155]=1,Zi[155]=0,Hi[155]=1,Xi[155]=1,Pi[155]=-1,Ni[155]=0,Ri[155]=0,Mi[103]=0,ki[103]=1,ji[103]=0,Ui[103]=-1,$i[103]=0,zi[103]=1,Gi[103]=0,Vi[103]=-1,Yi[103]=1,Ci[103]=1,Oi[103]=0,Ti[103]=0,Ai[152]=0,Di[152]=1,Li[152]=1,Ui[152]=-1,$i[152]=0,zi[152]=1,Fi[152]=-1,Bi[152]=0,qi[152]=0,Zi[152]=0,Hi[152]=-1,Xi[152]=0,Gi[152]=0,Vi[152]=-1,Yi[152]=1,Pi[152]=1,Ni[152]=0,Ri[152]=1,Ai[156]=0,Di[156]=-1,Li[156]=1,Ui[156]=1,$i[156]=0,zi[156]=1,Fi[156]=-1,Bi[156]=0,qi[156]=0,Zi[156]=0,Hi[156]=-1,Xi[156]=0,Gi[156]=0,Vi[156]=1,Yi[156]=1,Pi[156]=-1,Ni[156]=0,Ri[156]=1,Ai[137]=0,Di[137]=1,Li[137]=1,Mi[137]=0,ki[137]=1,ji[137]=0,Fi[137]=-1,Bi[137]=0,qi[137]=0,Zi[137]=0,Hi[137]=-1,Xi[137]=0,Ci[137]=1,Oi[137]=0,Ti[137]=0,Pi[137]=1,Ni[137]=0,Ri[137]=1,Ai[139]=0,Di[139]=1,Li[139]=1,Mi[139]=0,ki[139]=-1,ji[139]=0,Fi[139]=1,Bi[139]=0,qi[139]=0,Zi[139]=0,Hi[139]=1,Xi[139]=0,Ci[139]=-1,Oi[139]=0,Ti[139]=0,Pi[139]=1,Ni[139]=0,Ri[139]=1,Ai[98]=0,Di[98]=-1,Li[98]=0,Mi[98]=0,ki[98]=-1,ji[98]=1,Ui[98]=1,$i[98]=0,zi[98]=0,Fi[98]=1,Bi[98]=0,qi[98]=1,Gi[98]=0,Vi[98]=1,Yi[98]=0,Ci[98]=-1,Oi[98]=0,Ti[98]=1,Ai[99]=0,Di[99]=1,Li[99]=0,Mi[99]=0,ki[99]=-1,ji[99]=1,Ui[99]=1,$i[99]=0,zi[99]=0,Fi[99]=-1,Bi[99]=0,qi[99]=1,Gi[99]=0,Vi[99]=-1,Yi[99]=0,Ci[99]=1,Oi[99]=0,Ti[99]=1,Mi[38]=0,ki[38]=-1,ji[38]=1,Ui[38]=1,$i[38]=0,zi[38]=0,Zi[38]=0,Hi[38]=1,Xi[38]=1,Gi[38]=0,Vi[38]=1,Yi[38]=0,Ci[38]=-1,Oi[38]=0,Ti[38]=1,Pi[38]=-1,Ni[38]=0,Ri[38]=0,Mi[39]=0,ki[39]=1,ji[39]=1,Ui[39]=-1,$i[39]=0,zi[39]=0,Zi[39]=0,Hi[39]=-1,Xi[39]=1,Gi[39]=0,Vi[39]=1,Yi[39]=0,Ci[39]=-1,Oi[39]=0,Ti[39]=1,Pi[39]=1,Ni[39]=0,Ri[39]=0;var Wi=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ki=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Qi=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Ji=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},to=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},eo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},no=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ro=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},io=[],oo=[],so=[],ao=[],uo=[],co=[],lo=[],ho=[];ao[1]=uo[1]=18,ao[169]=uo[169]=18,so[4]=oo[4]=12,so[166]=oo[166]=12,io[16]=ho[16]=4,io[154]=ho[154]=4,co[64]=lo[64]=22,co[106]=lo[106]=22,so[2]=co[2]=17,ao[2]=uo[2]=18,so[168]=co[168]=17,ao[168]=uo[168]=18,io[8]=ao[8]=9,oo[8]=so[8]=12,io[162]=ao[162]=9,oo[162]=so[162]=12,io[32]=ho[32]=4,oo[32]=lo[32]=1,io[138]=ho[138]=4,oo[138]=lo[138]=1,uo[128]=ho[128]=21,co[128]=lo[128]=22,uo[42]=ho[42]=21,co[42]=lo[42]=22,oo[5]=uo[5]=14,oo[165]=uo[165]=14,so[20]=ho[20]=6,so[150]=ho[150]=6,io[80]=co[80]=11,io[90]=co[90]=11,ao[65]=lo[65]=3,ao[105]=lo[105]=3,io[160]=co[160]=11,oo[160]=uo[160]=14,io[10]=co[10]=11,oo[10]=uo[10]=14,so[130]=ho[130]=6,ao[130]=lo[130]=3,so[40]=ho[40]=6,ao[40]=lo[40]=3,oo[101]=lo[101]=1,oo[69]=lo[69]=1,uo[149]=ho[149]=21,uo[21]=ho[21]=21,so[86]=co[86]=17,so[84]=co[84]=17,io[89]=ao[89]=9,io[81]=ao[81]=9,io[96]=lo[96]=0,oo[96]=co[96]=15,io[74]=lo[74]=0,oo[74]=co[74]=15,io[24]=so[24]=8,ao[24]=ho[24]=7,io[146]=so[146]=8,ao[146]=ho[146]=7,oo[6]=co[6]=15,so[6]=uo[6]=16,oo[164]=co[164]=15,so[164]=uo[164]=16,ao[129]=ho[129]=7,uo[129]=lo[129]=20,ao[41]=ho[41]=7,uo[41]=lo[41]=20,so[66]=lo[66]=2,ao[66]=co[66]=19,so[104]=lo[104]=2,ao[104]=co[104]=19,io[144]=uo[144]=10,co[144]=ho[144]=23,io[26]=uo[26]=10,co[26]=ho[26]=23,oo[36]=ho[36]=5,so[36]=lo[36]=2,oo[134]=ho[134]=5,so[134]=lo[134]=2,io[9]=uo[9]=10,oo[9]=ao[9]=13,io[161]=uo[161]=10,oo[161]=ao[161]=13,oo[37]=ho[37]=5,uo[37]=lo[37]=20,oo[133]=ho[133]=5,uo[133]=lo[133]=20,so[148]=uo[148]=16,co[148]=ho[148]=23,so[22]=uo[22]=16,co[22]=ho[22]=23,io[82]=so[82]=8,ao[82]=co[82]=19,io[88]=so[88]=8,ao[88]=co[88]=19,io[73]=lo[73]=0,oo[73]=ao[73]=13,io[97]=lo[97]=0,oo[97]=ao[97]=13,io[145]=ao[145]=9,uo[145]=ho[145]=21,io[25]=ao[25]=9,uo[25]=ho[25]=21,oo[70]=lo[70]=1,so[70]=co[70]=17,oo[100]=lo[100]=1,so[100]=co[100]=17,io[34]=ao[34]=9,oo[34]=so[34]=12,uo[34]=ho[34]=21,co[34]=lo[34]=22,io[136]=ho[136]=4,oo[136]=lo[136]=1,so[136]=co[136]=17,ao[136]=uo[136]=18,io[35]=ho[35]=4,oo[35]=so[35]=12,ao[35]=uo[35]=18,co[35]=lo[35]=22,io[153]=ho[153]=4,ao[153]=uo[153]=18,oo[102]=so[102]=12,co[102]=lo[102]=22,io[155]=ao[155]=9,uo[155]=ho[155]=23,oo[103]=lo[103]=1,so[103]=co[103]=17,io[152]=ho[152]=4,so[152]=co[152]=17,ao[152]=uo[152]=18,io[156]=so[156]=8,ao[156]=uo[156]=18,co[156]=ho[156]=23,io[137]=ho[137]=4,oo[137]=lo[137]=1,ao[137]=uo[137]=18,io[139]=ho[139]=4,oo[139]=ao[139]=13,uo[139]=lo[139]=20,io[98]=ao[98]=9,oo[98]=so[98]=12,co[98]=lo[98]=22,io[99]=lo[99]=0,oo[99]=so[99]=12,ao[99]=co[99]=19,oo[38]=so[38]=12,uo[38]=ho[38]=21,co[38]=lo[38]=22,oo[39]=ho[39]=5,so[39]=uo[39]=16,co[39]=lo[39]=22;var po=[];po[1]=po[169]=Wi,po[4]=po[166]=Ki,po[16]=po[154]=Qi,po[64]=po[106]=Ji,po[168]=po[2]=to,po[162]=po[8]=eo,po[138]=po[32]=no,po[42]=po[128]=ro,po[5]=po[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},po[20]=po[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},po[80]=po[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},po[65]=po[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},po[160]=po[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},po[130]=po[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},po[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},po[101]=po[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},po[149]=po[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},po[86]=po[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},po[89]=po[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},po[96]=po[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},po[24]=po[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},po[6]=po[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},po[129]=po[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},po[66]=po[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},po[144]=po[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},po[36]=po[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},po[9]=po[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},po[37]=po[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},po[148]=po[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},po[82]=po[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},po[73]=po[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},po[145]=po[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},po[70]=po[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},po[34]=function(t){return[ro(t),eo(t)]},po[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},po[136]=function(t){return[no(t),to(t)]},po[153]=function(t){return[Qi(t),Wi(t)]},po[102]=function(t){return[Ki(t),Ji(t)]},po[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},po[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},po[152]=function(t){return[Qi(t),to(t)]},po[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},po[137]=function(t){return[no(t),Wi(t)]},po[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},po[98]=function(t){return[eo(t),Ji(t)]},po[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},po[38]=function(t){return[Ki(t),ro(t)]},po[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function fo(t,e,n){var r,i=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0],a=n[1]-e[1];return((r=i*a-s*o)>0)-(r<0)||+r}function go(t,e){return e.geometry.coordinates[0].every((function(e){return ri(jr(e),t)}))}var yo=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=fo(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),mo=yo,_o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return Br([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return fo(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),vo=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=fo(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return Ur(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=Fr([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ai(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,a,u,c,l,h=e.getEnvelope();if((r&&(n=r.getEnvelope()),s=i,a=(o=h).geometry.coordinates[0].map((function(t){return t[0]})),u=o.geometry.coordinates[0].map((function(t){return t[1]})),c=s.geometry.coordinates[0].map((function(t){return t[0]})),l=s.geometry.coordinates[0].map((function(t){return t[1]})),Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,u)!==Math.max.apply(null,l)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,l))&&go(h,i)){for(var p=t.map((function(t){return t.from.coordinates})),f=void 0,d=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(f=t)},g=0,y=p;g<y.length;g++){d(y[g])}f&&e.inside(jr(f))&&(r&&!go(n,h)||(r=e))}})),r},t.prototype.inside=function(t){return ri(t,this.toPolygon())},t}(),bo=vo;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Wr(e,(function(t){var e,r,i,o;!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),e=function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e},o=r,Zr(t,(function(t,n,i,s,a){o=0===n&&void 0===r?t:e(o,t,n,i,s,a)}),i)})),n},t.prototype.getNode=function(t){var e=mo.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new mo(t)),n},t.prototype.addEdge=function(t,e){var n=new _o(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new bo;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();function wo(t,e){var n=ni(t),r=ni(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return xo(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(xo(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(xo(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return vi(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(vi({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!vi({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(vi(o,t,{ignoreEndVertices:!0})&&(n=!0),!vi(o,t))return!1}if(n)return!0;return!1}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ri(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=Jr(t),o=Jr(e);if(!Eo(i,o))return!1;for(;r<e.coordinates.length-1;r++){if(ri({type:"Point",coordinates:So(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=Jr(t),r=Jr(e);if(!Eo(n,r))return!1;for(var i=ni(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++){if(!ri(u[a],t))return!1}return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){if(!ri(r[n],t,{ignoreBoundary:!0}))return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Eo(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function xo(t,e){return t[0]===e[0]&&t[1]===e[1]}function So(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}n(29657);n(52606);n(21160);function Io(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Co={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Co.heuristics.manhattan,o=r.closest||!1,s=new Po((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Io(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var p=c[l];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?Io(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Oo(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new To(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function To(t,e,n){this.x=t,this.y=e,this.weight=n}function Po(t){this.content=[],this.scoreFunction=t}Oo.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Co.cleanNode(this.nodes[t])},Oo.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Co.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Oo.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Oo.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Oo.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},To.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},To.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},To.prototype.isWall=function(){return 0===this.weight},Po.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};function No(){this._=null}function Ro(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ao(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Do(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Lo(t){for(;t.L;)t=t.L;return t}No.prototype={constructor:No,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Lo(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ao(this,n),n=(t=n).U),n.C=!1,r.C=!0,Do(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Do(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ao(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Lo(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ao(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Do(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ao(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Do(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ao(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Do(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Mo=No;function ko(t,e,n,r){var i=[null,null],o=ss.push(i)-1;return i.left=t,i.right=e,n&&Fo(i,t,e,n),r&&Fo(i,e,t,r),is[t.index].halfedges.push(o),is[e.index].halfedges.push(o),i}function jo(t,e,n){var r=[e,n];return r.left=t,r}function Fo(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Bo(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,h=1,p=a[0]-u,f=a[1]-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*p,c+l*f]),h<1&&(t[1]=[u+h*p,c+h*f]),!0)}}}}}function qo(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],p=c[1],f=l[0],d=l[1],g=(h+f)/2,y=(p+d)/2;if(d===p){if(g<e||g>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=y-(s=(h-f)/(d-p))*g,s<-1||s>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Uo(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $o(t,e){return e[+(e.left!==t.site)]}function zo(t,e){return e[+(e.left===t.site)]}var Go,Vo=[];function Yo(){Ro(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zo(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,l=o[0]-s,h=o[1]-a,p=2*(u*h-c*l);if(!(p>=-us)){var f=u*u+c*c,d=l*l+h*h,g=(h*f-c*d)/p,y=(u*d-l*f)/p,m=Vo.pop()||new Yo;m.arc=t,m.site=i,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var _=null,v=os._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){_=v.P;break}v=v.L}else{if(!v.R){_=v;break}v=v.R}os.insert(_,m),_||(Go=m)}}}}function Ho(t){var e=t.circle;e&&(e.P||(Go=e.N),os.remove(e),Vo.push(e),Ro(e),t.circle=null)}var Xo=[];function Wo(){Ro(this),this.edge=this.site=this.circle=null}function Ko(t){var e=Xo.pop()||new Wo;return e.site=t,e}function Qo(t){Ho(t),rs.remove(t),Xo.push(t),Ro(t)}function Jo(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Qo(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<as&&Math.abs(r-u.circle.cy)<as;)o=u.P,a.unshift(u),Qo(u),u=o;a.unshift(u),Ho(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<as&&Math.abs(r-c.circle.cy)<as;)s=c.N,a.push(c),Qo(c),c=s;a.push(c),Ho(c);var l,h=a.length;for(l=1;l<h;++l)c=a[l],u=a[l-1],Fo(c.edge,u.site,c.site,i);u=a[0],(c=a[h-1]).edge=ko(u.site,c.site,null,i),Zo(u),Zo(c)}function ts(t){for(var e,n,r,i,o=t[0],s=t[1],a=rs._;a;)if((r=es(a,s)-o)>as)a=a.L;else{if(!((i=o-ns(a,s))>as)){r>-as?(e=a.P,n=a):i>-as?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){is[t.index]={site:t,halfedges:[]}}(t);var u=Ko(t);if(rs.insert(e,u),e||n){if(e===n)return Ho(e),n=Ko(e.site),rs.insert(u,n),u.edge=n.edge=ko(e.site,u.site),Zo(e),void Zo(n);if(n){Ho(e),Ho(n);var c=e.site,l=c[0],h=c[1],p=t[0]-l,f=t[1]-h,d=n.site,g=d[0]-l,y=d[1]-h,m=2*(p*y-f*g),_=p*p+f*f,v=g*g+y*y,b=[(y*_-f*v)/m+l,(p*v-g*_)/m+h];Fo(n.edge,c,d,b),u.edge=ko(c,t,null,b),n.edge=ko(t,d,null,b),Zo(e),Zo(n)}else u.edge=ko(e.site,u.site)}}function es(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var l=a-r,h=1/o-1/c,p=l/c;return h?(-p+Math.sqrt(p*p-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+a)/2}function ns(t,e){var n=t.N;if(n)return es(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var rs,is,os,ss,as=1e-6,us=1e-12;function cs(t,e){return e[1]-t[1]||e[0]-t[0]}function ls(t,e){var n,r,i,o=t.sort(cs).pop();for(ss=[],is=new Array(t.length),rs=new Mo,os=new Mo;;)if(i=Go,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ts(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Jo(i.arc)}if(function(){for(var t,e,n,r,i=0,o=is.length;i<o;++i)if((t=is[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Uo(t,ss[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=ss.length;o--;)qo(i=ss[o],t,e,n,r)&&Bo(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>as||Math.abs(i[0][1]-i[1][1])>as)||delete ss[o]}(s,a,u,c),function(t,e,n,r){var i,o,s,a,u,c,l,h,p,f,d,g,y=is.length,m=!0;for(i=0;i<y;++i)if(o=is[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)ss[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)d=(f=zo(o,ss[u[a]]))[0],g=f[1],h=(l=$o(o,ss[u[++a%c]]))[0],p=l[1],(Math.abs(d-h)>as||Math.abs(g-p)>as)&&(u.splice(a,0,ss.push(jo(s,f,Math.abs(d-t)<as&&r-g>as?[t,Math.abs(h-t)<as?p:r]:Math.abs(g-r)<as&&n-d>as?[Math.abs(p-r)<as?h:n,r]:Math.abs(d-n)<as&&g-e>as?[n,Math.abs(h-n)<as?p:e]:Math.abs(g-e)<as&&d-t>as?[Math.abs(p-e)<as?h:t,e]:null))-1),++c);c&&(m=!1)}if(m){var _,v,b,w=1/0;for(i=0,m=null;i<y;++i)(o=is[i])&&(b=(_=(s=o.site)[0]-t)*_+(v=s[1]-e)*v)<w&&(w=b,m=o);if(m){var E=[t,e],x=[t,r],S=[n,r],I=[n,e];m.halfedges.push(ss.push(jo(s=m.site,E,x))-1,ss.push(jo(s,x,S))-1,ss.push(jo(s,S,I))-1,ss.push(jo(s,I,E))-1)}}for(i=0;i<y;++i)(o=is[i])&&(o.halfedges.length||delete is[i])}(s,a,u,c)}this.edges=ss,this.cells=is,rs=os=ss=is=null}ls.prototype={constructor:ls,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return $o(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,c,l=n.site,h=-1,p=e[i[o-1]],f=p.left===l?p.right:p.left;++h<o;)s=f,f=(p=e[i[h]]).left===l?p.right:p.left,s&&f&&r<s.index&&r<f.index&&(u=s,c=f,((a=l)[0]-c[0])*(u[1]-a[1])-(a[0]-u[0])*(c[1]-a[1])<0)&&t.push([l.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};n(32676);n(20675);function hs(){return new ps}function ps(){this.reset()}ps.prototype={constructor:ps,reset:function(){this.s=this.t=0},add:function(t){ds(fs,t,this.t),ds(this,fs.s,this.s),this.s?this.t+=fs.t:this.s=fs.t},valueOf:function(){return this.s}};var fs=new ps;function ds(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var gs=1e-6,ys=Math.PI,ms=ys/2,_s=ys/4,vs=2*ys,bs=ys/180,ws=Math.abs,Es=Math.atan,xs=Math.atan2,Ss=Math.cos,Is=(Math.ceil,Math.exp),Cs=(Math.floor,Math.log),Os=(Math.pow,Math.sin),Ts=(Math.sign,Math.sqrt),Ps=Math.tan;function Ns(t){return t>1?ms:t<-1?-ms:Math.asin(t)}function Rs(){}hs(),hs();function As(t){var e=t[0],n=t[1],r=Ss(n);return[r*Ss(e),r*Os(e),Os(n)]}function Ds(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ls(t){var e=Ts(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}hs();function Ms(t,e){return[t>ys?t-vs:t<-ys?t+vs:t,e]}function ks(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function js(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(l=s,ws((c=r)[0]-l[0])<gs&&ws(c[1]-l[1])<gs){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else{var c,l;a.push(n=new ks(r,t,null,!0)),u.push(n.o=new ks(r,null,n,!1)),a.push(n=new ks(s,t,null,!1)),u.push(n.o=new ks(s,null,n,!0))}}})),a.length){for(u.sort(e),Fs(a),Fs(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,l,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function Fs(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Bs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Ms.invert=Ms;1===(qs=Bs).length&&(Us=qs,qs=function(t,e){return Bs(Us(t),e)});var qs,Us,$s=Array.prototype;$s.slice,$s.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var zs=hs();function Gs(t,e){var n=e[0],r=e[1],i=[Os(n),-Ss(n),0],o=0,s=0;zs.reset();for(var a=0,u=t.length;a<u;++a)if(l=(c=t[a]).length)for(var c,l,h=c[l-1],p=h[0],f=h[1]/2+_s,d=Os(f),g=Ss(f),y=0;y<l;++y,p=_,d=b,g=w,h=m){var m=c[y],_=m[0],v=m[1]/2+_s,b=Os(v),w=Ss(v),E=_-p,x=E>=0?1:-1,S=x*E,I=S>ys,C=d*b;if(zs.add(xs(C*x*Os(S),g*w+C*Ss(S))),o+=I?E+x*vs:E,I^p>=n^_>=n){var O=Ds(As(h),As(m));Ls(O);var T=Ds(i,O);Ls(T);var P=(I^E>=0?-1:1)*Ns(T[2]);(r>P||r===P&&(O[0]||O[1]))&&(s+=I^E>=0?1:-1)}}return(o<-gs||o<gs&&zs<-gs)^1&s}hs();hs(),hs();hs();function Vs(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ys(t){return t.length>1}function Zs(t,e){return((t=t.x)[0]<0?t[1]-ms-gs:ms-t[1])-((e=e.x)[0]<0?e[1]-ms-gs:ms-e[1])}Vs(4.5);function Hs(t){return function(e){var n=new Xs;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Xs(){}Xs.prototype={constructor:Xs,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Ss(30*bs);Hs({point:function(t,e){this.stream.point(t*bs,e*bs)}});function Ws(t){return function(e,n){var r=Ss(e),i=Ss(n),o=t(r*i);return[o*i*Os(e),o*Os(n)]}}function Ks(t){return function(e,n){var r=Ts(e*e+n*n),i=t(r),o=Os(i),s=Ss(i);return[xs(e*o,r*s),Ns(r&&n*o/r)]}}var Qs=Ws((function(t){return Ts(2/(1+t))}));Qs.invert=Ks((function(t){return 2*Ns(t/2)}));var Js=Ws((function(t){return(t=(e=t)>1?0:e<-1?ys:Math.acos(e))&&t/Os(t);var e}));function ta(t,e){return[t,Cs(Ps((ms+e)/2))]}function ea(t,e){return[t,e]}function na(t,e){var n=Ss(e),r=Ss(t)*n;return[n*Os(t)/r,Os(e)/r]}function ra(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ia(t,e){return[Ss(e)*Os(t),Os(e)]}function oa(t,e){var n=Ss(e),r=1+Ss(t)*n;return[n*Os(t)/r,Os(e)/r]}function sa(t,e){return[Cs(Ps((ms+e)/2)),-t]}Js.invert=Ks((function(t){return t})),ta.invert=function(t,e){return[t,2*Es(Is(e))-ms]},ea.invert=ea,na.invert=Ks(Es),ra.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(ws(n)>gs&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ia.invert=Ks(Ns),oa.invert=Ks((function(t){return 2*Es(t)})),sa.invert=function(t,e){return[-e,2*Es(Is(t))-ms]};const aa=ce.object({id:ce.number(),uuid:ce.string()}),ua=ce.object({address_inline:ce.string(),street_name:ce.string(),postal_code:ce.string(),city:ce.string(),country:aa,telephone:ce.string().nullable(),longitude:ce.string(),latitude:ce.string()}),ca=ua.extend({}),la=ua.extend({id:ce.number(),uuid:ce.string()});var ha=Object.freeze({__proto__:null,country:aa,addressIn:ca,addressOut:la});const pa=t=>{let e=t;const n=new Set,r=t=>{e=t,n.forEach((t=>t(e)))};return{get:()=>e,subscribe:t=>(n.add(t),t(e),()=>n.delete(t)),set:r,update:t=>{if("function"==typeof t){const n=t(e);r(n||e)}else r({...e,...t})}}};var fa,da;!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR"}(fa||(fa={})),function(t){t.STDLogger=class{constructor(){this.debug=console.debug,this.info=console.info,this.warn=console.warn,this.error=console.error}};t.CrashlyticsLogger=class{constructor(t){this.debug=()=>{},this.info=()=>{},this.warn=()=>{},this.error=(...e)=>{t.recordError(e)}}};t.PinoLogger=class{constructor(t){this.debug=t.debug.bind(t),this.info=t.info.bind(t),this.warn=t.warn.bind(t),this.error=t.error.bind(t)}},t.composeLoggers=function(t){return{debug:(...e)=>t.forEach((t=>t.debug(...e))),info:(...e)=>t.forEach((t=>t.info(...e))),warn:(...e)=>t.forEach((t=>t.warn(...e))),error:(...e)=>t.forEach((t=>t.error(...e)))}}}(da||(da={}));const ga={debug:(...t)=>{const{logger:e,log_level:n}=_a.get();!e||n>fa.DEBUG||e.debug(...t)},info:(...t)=>{const{logger:e,log_level:n}=_a.get();!e||n>fa.INFO||e.info(...t)},warn:(...t)=>{const{logger:e,log_level:n}=_a.get();!e||n>fa.WARN||e.warn(...t)},error:(...t)=>{const{logger:e,log_level:n}=_a.get();!e||n>fa.ERROR||e.error(...t)}};var ya;!function(t){t.isAbsolute=t=>/^[a-z]+:\/\/[^/]+/.test(t),t.join=(t,...e)=>{let n="";for(let t of e)t.startsWith("/")&&(t=t.substring(1)),t.endsWith("/")&&(t=t.substring(0,t.length-1)),n+="/"+t;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t+n},t.stringifyQueryParams=e=>{const n=t=>t.filter(Boolean).join("&"),r=(e,i)=>""===i||void 0===i?"":Array.isArray(i)?((t,e)=>{const i=e.map((e=>r(`${t}[]`,e)));return n(i)})(e,i):i&&"object"==typeof i?((e,n)=>{const r=Object.entries(n).map((([t,n])=>[`${e}[${t}]`,n]));return t.stringifyQueryParams(Object.fromEntries(r))})(e,i):`${e}=${(t=>encodeURIComponent(`${t}`))(i)}`,i=Object.entries(e).map((([t,e])=>r(t,e)));return n(i)},t.appendQueryParams=(e,n)=>{const r=t.stringifyQueryParams(n);return r?e.includes("?")?`${e}&${r}`:`${e}?${r}`:e}}(ya||(ya={}));const ma=()=>({url:null,session:null,fetcher:(t,e)=>fetch(t,e),handler:null}),_a=pa(((t={})=>{return{wynd:ma(),directus:ma(),kaalix:{...ma(),username:null,password:null,socketer:(n=Ar,t=>{const e=n(t.url,{path:t.path,transports:["websocket"],query:t.queries});return{on:(t,n)=>{e.on(t,n)},emit:(t,n)=>{e.emit(t,n)},close:()=>{e.close()}}})},carrier:{url:null,socketer:(e=cn,async t=>{const n=ya.join(t.url,t.path??""),r=(new e).withUrl(n,{withCredentials:!1}).build();return await r.start(),{join:t=>r.invoke("JoinRoom",t),leave:t=>r.invoke("LeaveRoom",t),on:(t,e)=>r.on(t,e),emit:(t,e)=>r.invoke(t,e),close:()=>r.stop()}})},geo:{...ma(),url:"https://maps.googleapis.com/maps/api",apiKey:null,handler:t=>{const e=t.config,n=ya.appendQueryParams(t.url,{key:e.apiKey||""});return t.resolve({...t,url:n,init:{credentials:"omit"}})}},coral:{...ma(),handler:t=>{const e=t.config,n=_a.get().parameters.lang,r=new Headers(t.init.headers);return e.session?.userID&&r.append("user-id",e.session.userID.toString()),n&&r.append("accept-language",n),t.resolve({...t,init:{...t.init,headers:r}})}},luckycart:{...ma(),siteKey:null,periodStart:null,periodEnd:null},parameters:{lang:"fr-FR"},logger:new da.STDLogger,log_level:fa.INFO,...t};var e,n})());class va extends Response{constructor(t,e){super(t.body,t),this.data=e,this._status=t.status}get status(){return this._status??200}set status(t){this._status=t}}class ba extends va{constructor(t,e){super(t,e)}}class wa extends va{constructor(t,e){super(t,e)}}const Ea=(t,e)=>{if(!t)return e;const n=t.safeParse(e);if(n.success)return n.data;throw ga.error("[Magicore] Failed to validate object",{source:e,error:n.error}),n.error},xa=async t=>{let e;const n=t.headers.get("content-type");t=t.clone();try{switch(n?.split(";")[0]){case"application/json":case"text/json":e=await t.json();break;default:e=await t.text()}return e}catch{throw t}},Sa=t=>async({url:e,init:n,config:r})=>{try{const{fetcher:t,session:i}=r;let o=new Headers(n.headers||{});i&&o.set("Authorization",`Bearer ${i.token}`),n.body instanceof FormData&&o.delete("Content-Type"),ga.debug("Executing request",{url:e,init:n,headers:o});const s=await t(e,{...n,headers:o});if(!s.ok)throw s;const a=await xa(s);return new ba(s,a)}catch(e){if(e instanceof Response){const n=await xa(e),r=new wa(e,n);throw r.data=await((t,e)=>{const{schemas:n}=t;return n.status&&n.status[e.status]?Ea(n.status[e.status],e.data):n.defaultErrBody?Ea(n.defaultErrBody,e.data):e.data})(t,r),r}throw e}},Ia=(t,e,n)=>{const r=async(r={},i={})=>{ga.debug(`Making request to ${t}.`);const o={..._a.get()[n.apiName],...i};if(!o.url)throw ga.error(`Unable to make request to ${t}. No API url set for API ${n.apiName}.`),new Error(`Unable to make request to ${t}. No API url set for API ${n.apiName}.`);r={...n.defaults,...r},r=((t,e={})=>{const{defaultReqBody:n,params:r,queries:i,headers:o}=t.schemas,s={body:Ea(n,e.body),params:Ea(r,e.params),queries:Ea(i,e.queries),headers:Ea(o,e.headers)};if(!(t=>"[object Object]"===t.toString()&&null!==t)(s))throw new Error("Invalid request");return s})(n,r);let s=t;r?.params&&(s=((t,e)=>t.replace(/\/:[a-zA-Z_]+/g,(t=>{const n=t.slice(2);return`/${e[n]??t}`})))(t,r.params));const a=ya.join(o.url,s),u=ya.appendQueryParams(a,r?.queries??{}),c=new Headers({"Content-Type":"application/json",...e.headers,...r?.headers}),l=Sa(n),h=o.handler||l,{body:p}=((t,e)=>"application/json"===t.get("Content-Type")?{body:JSON.stringify(e)}:{body:e})(c,r?.body),f=await h({url:u,init:{method:"GET",body:p,mode:"cors",headers:c,signal:r?.signal,...e},resolve:l,config:o});return f.data=((t,e)=>{const{schemas:n}=t;return n.status&&n.status[e.status]?Ea(n.status[e.status],e.data):n.defaultResBody?Ea(n.defaultResBody,e.data):e.data})(n,f),ga.debug(`Request to ${t} successful.`),f};return r.Success=ba,r.Error=wa,r},Ca={LOGIN:"login",LOGOUT:"logout",STOREFRONT_OPEN:"storefront_open",STOREFRONT_CLOSE:"storefront_close",STOREFRONT_FOCUS:"storefront_focus",STOREFRONT_UNFOCUS:"storefront_unfocus",CART_ADD:"cart_add",CART_REMOVE:"cart_remove",CART_CHECKOUT:"cart_checkout"},Oa=ce.object({payload:ce.object({})}),Ta=Oa.and(ce.discriminatedUnion("type",[ce.object({type:ce.literal(Ca.LOGIN),payload:ce.object({userID:ce.number()})}),ce.object({type:ce.literal(Ca.LOGOUT),payload:ce.object({userID:ce.number()})}),ce.object({type:ce.literal(Ca.STOREFRONT_OPEN)}),ce.object({type:ce.literal(Ca.STOREFRONT_CLOSE)}),ce.object({type:ce.literal(Ca.STOREFRONT_FOCUS)}),ce.object({type:ce.literal(Ca.STOREFRONT_UNFOCUS)}),ce.object({type:ce.literal(Ca.CART_ADD),payload:ce.object({productID:ce.number()})}),ce.object({type:ce.literal(Ca.CART_REMOVE),payload:ce.object({productID:ce.number()})}),ce.object({type:ce.literal(Ca.CART_CHECKOUT),payload:ce.object({orderUUID:ce.string()})})])),Pa=Oa.and(ce.object({})),Na=Ia("/events",{method:"POST"},{apiName:"coral",schemas:{defaultReqBody:Ta}});var Ra=Object.freeze({__proto__:null,create:Na,Type:Ca,eventIn:Ta,eventOut:Pa}),Aa=Object.freeze({__proto__:null,event:Ra});const Da={PAGE_VIEWED:"pageViewed",LAST_CALL_VIEWED:"lastCallViewed",BANNER_CLICKED:"bannerClicked",BANNER_VIEWED:"bannerViewed",CART_UPDATED:"cartUpdated",CART_VALIDATED:"cartValidated",CART_CANCELED:"cartCanceled",GAME_PLAYED:"gamePlayed",EMAIL_SENT:"emailSent",OPTIN_ACCEPTED:"optinAccepted",OPTIN_REFUSED:"optinRefused",REWARD_INFO_FILLED:"rewardInfoFilled",REWARD_DONE:"rewardDone",REWARD_BLOCKED:"rewardBlocked",SHOPPER_EMAIL_SAVED:"shopperEmailSaved"},La={HOME:"homepage",PRODUCT:"product",CATEGORY:"category",CART:"cart",CHECKOUT:"checkout"},Ma=ce.object({payload:ce.object({pageId:ce.string().optional(),operationId:ce.string().optional()})}).and(ce.discriminatedUnion("eventName",[ce.object({eventName:ce.literal(Da.PAGE_VIEWED),payload:ce.object({pageType:ce.nativeEnum(La),bannerType:ce.string().optional(),bannerPosition:ce.string().optional()})}),ce.object({eventName:ce.literal(Da.LAST_CALL_VIEWED),payload:ce.object({})}),ce.object({eventName:ce.literal(Da.BANNER_CLICKED),payload:ce.object({bannerType:ce.string(),bannerPosition:ce.string()})}),ce.object({eventName:ce.literal(Da.BANNER_VIEWED),payload:ce.object({bannerType:ce.string(),bannerPosition:ce.string()})}),ce.object({eventName:ce.literal(Da.CART_UPDATED),payload:ce.object({cartId:ce.string(),moduleType:ce.string().optional(),storeId:ce.string().optional(),storeTypeId:ce.string().optional(),currency:ce.string().optional(),device:ce.string().optional(),lang:ce.string().optional(),finalAtiAmount:ce.number().optional(),finalTfAmount:ce.number().optional(),totalDiscountAtiAmount:ce.number().optional(),totalDiscountTfAmount:ce.number().optional(),deliveryMode:ce.string().optional(),deliveryAtiAmount:ce.number().optional(),deliveryTfAmount:ce.number().optional(),paymentType:ce.string().optional(),transactionDate:ce.string().optional()})}),ce.object({eventName:ce.literal(Da.CART_VALIDATED),payload:ce.object({cartId:ce.string().optional(),shopperEmail:ce.string().optional(),currency:ce.string().optional(),device:ce.string().optional(),lang:ce.string().optional(),storeId:ce.string().optional(),storeTypeId:ce.string().optional(),finalAtiAmount:ce.number().optional(),finalTfAmount:ce.number().optional(),totalDiscountAtiAmount:ce.number().optional(),totalDiscountTfAmount:ce.number().optional(),deliveryMode:ce.string().optional(),deliveryDate:ce.string().optional(),deliveryAtiAmount:ce.number().optional(),deliveryTfAmount:ce.number().optional(),paymentType:ce.string().optional(),transactionDate:ce.string().optional(),promoCode:ce.string().optional(),promoCodeLabel:ce.string().optional(),promoCodeAtiAmount:ce.number().optional(),hasLoyaltyCard:ce.boolean().optional(),loyaltyCard:ce.string().optional(),loyaltyCardAtiAmount:ce.number().optional(),isNewShopper:ce.boolean().optional(),isSupportTransaction:ce.boolean().optional()})})])),ka=Ma.and(ce.object({})),ja=ka.and(ce.object({shopperId:ce.string(),siteKey:ce.string(),eventName:ce.nativeEnum(Da),ipAddress:ce.string().optional()})),Fa=ka.and(ce.object({})),Ba=Ia("/events",{method:"POST"},{apiName:"luckycart",schemas:{defaultReqBody:ja}});var qa=Object.freeze({__proto__:null,create:Ba,Name:Da,PageType:La,payload:Ma,eventIn:ja,eventOut:Fa});const Ua={BANNER:"banner",GAME:"game",LAST_CALL:"lastCall",SMART_OPTINS:"smartOptins",REWARDS:"rewards"},$a={HEADER:"header",FOOTER:"footer",PRODUCT:"product",BANNER:"banner",SEARCH:"search"},za={MOBILE:"mobile",DESKTOP:"desktop",WEBMOBILE:"webmobile"},Ga=ce.object({shopInShopRedirectionUrl:ce.string().optional(),helpRedirectionUrl:ce.string().optional(),isAvailable:ce.boolean(),isConsumed:ce.boolean().optional(),displayPageList:ce.array(ce.union([ce.literal("unknown"),ce.object({spaceId:ce.string(),pageId:ce.string(),type:ce.nativeEnum(La),format:ce.nativeEnum($a),subset:ce.nativeEnum(za)})])).optional()}),Va=ce.object({}),Ya=Va.extend({}),Za=Va.extend({shopperId:ce.string(),siteKey:ce.string(),experienceId:ce.string(),experienceType:ce.nativeEnum(Ua),eventId:ce.string(),generatedAt:ce.string(),expiresAt:ce.string(),operationId:ce.string(),payload:Ga}),Ha=Ia("/experiences",{},{apiName:"luckycart",schemas:{queries:ce.object({shopperId:ce.string(),siteKey:ce.string(),experienceType:ce.nativeEnum(Ua)}).partial().optional(),defaultResBody:ce.array(Za)}});var Xa=Object.freeze({__proto__:null,query:Ha,Type:Ua,Format:$a,Subset:za,payload:Ga,experienceIn:Ya,experienceOut:Za});const Wa=ce.object({}),Ka=Wa.extend({}),Qa=Wa.extend({experienceId:ce.string(),operationId:ce.string(),images:ce.object({thumbnailUrl:ce.string().nullable(),desktopUrl:ce.string().nullable(),tabletUrl:ce.string().nullable(),mobileUrl:ce.string().nullable()}),generatedAt:ce.string(),expiresAt:ce.string(),experienceUrl:ce.string()}),Ja=Ia("/game-experiences",{},{apiName:"luckycart",schemas:{queries:ce.object({shopperId:ce.string(),siteKey:ce.string()}).partial().optional(),defaultResBody:ce.array(Qa)}});var tu=Object.freeze({__proto__:null,query:Ja,gameExperienceIn:Ka,gameExperienceOut:Qa});const eu=ce.object({}).extend({}),nu=ce.record(ce.nativeEnum($a),ce.union([ce.object({experienceId:ce.string(),operationId:ce.string(),imageUrl:ce.string(),helpRedirect:ce.string().nullable(),spaceRedirect:ce.string().nullable(),shopInShopRedirect:ce.string().nullable(),shopInShopRedirectMobile:ce.object({ref:ce.string(),type:ce.string().nullable()})}),ce.null()])),ru=ce.object({pageId:ce.string(),store:ce.string(),storeType:ce.string()}).partial(),iu=ce.object({siteKey:ce.string(),shopperId:ce.string(),subset:ce.nativeEnum(za),pageType:ce.nativeEnum(La),format:ce.nativeEnum($a)}),ou="/resources",su=Ia(`${ou}/:siteKey/:shopperId/banner/:subset/:pageType/:format`,{},{apiName:"luckycart",schemas:{params:iu,queries:ru,defaultResBody:nu}}),au=Ia(`${ou}/:siteKey/:shopperId/banners/:subset/:pageType/:format`,{},{apiName:"luckycart",schemas:{params:iu,queries:ru,defaultResBody:ce.object({bannerList:ce.array(nu)})}});var uu=Object.freeze({__proto__:null,get:su,query:au,resourceIn:eu,resourceOut:nu}),cu=Object.freeze({__proto__:null,event:qa,experience:Xa,gameExperience:tu,resource:uu}),lu=Object.freeze({__proto__:null,coral:Aa,luckycart:cu});const hu=ce.object({id:ce.string(),name:ce.string(),phone:ce.string(),location:ce.object({latitude:ce.number(),longitude:ce.number()})}),pu="/api/v1",fu=Ia(`${pu}/users/oauth/token`,{method:"POST",body:"grant_type=client_credentials",headers:{"Content-Type":"application/x-www-form-urlencoded"}},{apiName:"kaalix",schemas:{defaultResBody:ce.object({accessToken:ce.string()})}}),du=Ia(`${pu}/partners/deliveryman/:id`,{},{apiName:"kaalix",schemas:{params:ce.object({id:ce.string()}),defaultResBody:hu}});var gu=Object.freeze({__proto__:null,carrierLocationOut:hu,auth:fu,getLocation:du});const yu=ce.object({id:ce.number(),uuid:ce.string(),default_label:ce.string(),picture:ce.string().nullable(),has_direct_products:ce.boolean(),img_mobile_large:ce.string().nullable(),img_mobile_medium:ce.string().nullable(),visible:ce.boolean(),sort:ce.number(),root:ce.object({id:ce.number(),default_label:ce.string(),reference:ce.string()}),parent:ce.object({id:ce.number(),label:ce.string()}).nullable(),breadcrumb:ce.array(ce.object({id:ce.number(),label:ce.string(),position:ce.number()})),count_products:ce.number()});var mu;!function(t){t.category=yu}(mu||(mu={}));const _u=ce.array(yu),vu="catalog",bu=ya.join(vu,":area","categories"),wu=ya.join(vu,":area","categories",":categoryID","products"),Eu=ya.join(vu,"products"),xu=ya.join(vu,":area","products"),Su={DEFAULT:"default",LABEL_ASCENDING:"label_ascending",LABEL_DESCENDING:"label_descending",PRICE_ASCENDING:"price_ascending",PRICE_DESCENDING:"price_descending",BRAND_ASCENDING:"brand_ascending",PERTINENCE:"pertinence",PRIORITY_DESCENDING:"priority_descending"},Iu={STD:"STD",LEX:"LEX",PROMOTIONS:"Promotions"},Cu=ce.object({"entity[STD]":ce.number(),"entity[LEX]":ce.number(),selected_mode:ce.enum([Iu.STD,Iu.LEX]).default(Iu.STD),parent:ce.number(),sort:ce.enum([Su.DEFAULT,Su.BRAND_ASCENDING,Su.LABEL_ASCENDING,Su.LABEL_DESCENDING,Su.PERTINENCE,Su.PRICE_ASCENDING,Su.PRICE_DESCENDING,Su.PRIORITY_DESCENDING]),is_pot_amount:ce.boolean(),brand:ce.array(ce.number()),tags:ce.array(ce.number()),tag_labels:ce.array(ce.string()),and_tag_labels:ce.array(ce.string())}).partial(),Ou=ce.object({area:ce.enum(["appliances","groceries"])});var Tu=Object.freeze({__proto__:null,SortKeys:Su,Tags:Iu,baseRequestParams:Cu,areaParam:Ou});const Pu=Cu.extend({}),Nu=Pu.extend({category_level:ce.number()}),Ru=Pu.omit({parent:!0}),Au=Ia(bu,{},{apiName:"coral",schemas:{params:Ou,queries:Ru,defaultResBody:_u}}),Du=Ia(ya.join(bu,":categoryID"),{},{apiName:"coral",schemas:{params:Ou.extend({categoryID:ce.number()}),queries:Nu,defaultResBody:_u}});var Lu=Object.freeze({__proto__:null,get Parts(){return mu},categoryOut:_u,query:Au,get:Du,categoryQueries:Nu,categoryQueriesRoot:Ru});const Mu=ce.object({id:ce.number(),default_label:ce.string(),type:ce.string().nullable()}),ku=ce.object({id:ce.number(),uuid:ce.string(),label:ce.string(),product_count:ce.number()}),ju=ce.object({brands:ce.array(ku),tags:ce.array(Mu)});var Fu;!function(t){t.tag=Mu,t.brand=ku}(Fu||(Fu={}));const Bu=ju,qu=Cu.extend({id:ce.array(ce.number()),attributes:ce.array(ce.string()),barcodes:ce.array(ce.string()),page:ce.number(),page_size:ce.number(),is_pot_amount:ce.boolean(),is_new_price:ce.boolean(),is_search_products:ce.boolean(),is_favorite_products:ce.boolean(),is_top_sales:ce.boolean(),customer:ce.number()}).partial(),Uu=qu.extend({category:ce.array(ce.number()),first_level_category:ce.array(ce.number()),second_level_category:ce.array(ce.number()),third_level_category:ce.array(ce.number())}).partial(),$u=qu.extend({}).partial(),zu=qu.extend({keyword:ce.string(),autocomplete:ce.boolean().optional()}),Gu=zu.omit({is_search_products:!0}),Vu=Uu.merge($u).merge(zu).partial(),Yu=Ia(ya.join(Eu,"filters"),{},{apiName:"coral",schemas:{queries:Vu,defaultResBody:Bu}});var Zu=Object.freeze({__proto__:null,get Parts(){return Fu},filterOutput:Bu,query:Yu});const Hu=ce.object({id:ce.number(),default_label:ce.string()}),Xu=ce.object({amount:ce.number(),vat_rate:ce.string()}),Wu=ce.object({default_label:ce.string().optional()}),Ku={boolean:"boolean",text:"text","simple-select-box":"simple-select-box","multiple-checkboxes":"multiple-checkboxes"},Qu=ce.object({id:ce.number(),default_label:ce.string(),type:ce.enum([Ku.boolean,Ku.text,Ku["simple-select-box"],Ku["multiple-checkboxes"]]),value:ce.string().nullable().optional(),option:Wu.nullable(),options:ce.array(Wu)}),Ju=ce.object({id:ce.number(),uuid:ce.string(),label:ce.string(),product_count:ce.number()}),tc=ce.object({id:ce.number(),default_label:ce.string(),type:ce.string().nullable()}),ec=ce.object({id:ce.number(),uuid:ce.string(),categories:ce.array(Hu),tags:ce.array(tc),brand:Ju.nullable(),label:ce.string(),default_picture:ce.string().nullable(),description:ce.string().nullable(),weight:ce.number(),prices:ce.object({main:Xu,discount:Xu.nullable(),pot_amount:ce.number().nullable()}).nullable(),is_available:ce.boolean(),is_available_in_entity:ce.boolean(),available_in_entity:ce.array(ce.object({entity:ce.number().nullable(),enabled:ce.boolean(),stock:ce.number()})).optional(),stock:ce.number()}),nc=ec.extend({}),rc=ec.extend({pictures:ce.array(ce.string()).nullable(),attributes:ce.array(Qu).optional()}),ic=ec.pick({id:!0,label:!0,default_picture:!0,categories:!0,tags:!0});var oc;!function(t){t.getProduct=rc,t.queryProduct=nc,t.product=nc,t.autocompleteProduct=ic,t.category=Hu,t.price=Xu,t.ProductAttributeType=Ku,t.productAttribute=Qu,t.productAttributeOption=Wu,t.tag=tc,t.brand=Ju}(oc||(oc={}));const sc=ce.array(nc),ac=ce.array(ic),uc=rc,cc=Ia(Eu,{},{apiName:"coral",schemas:{queries:Uu,defaultResBody:sc}}),lc=Ia(wu,{},{apiName:"coral",schemas:{params:Ou.extend({categoryID:ce.number()}),queries:$u,defaultResBody:sc}}),hc=Ia(ya.join(Eu,":productID"),{},{apiName:"coral",schemas:{params:ce.object({productID:ce.number()}),queries:Uu,defaultResBody:uc}}),pc=Ia(ya.join(Eu,"search"),{},{apiName:"coral",schemas:{queries:zu,defaultResBody:sc}}),fc=Ia(ya.join(Eu,"search","autocomplete"),{},{apiName:"coral",schemas:{queries:Gu,defaultResBody:ac}}),dc=Ia(xu,{},{apiName:"coral",schemas:{params:Ou,queries:Uu,defaultResBody:sc}});var gc=Object.freeze({__proto__:null,get Parts(){return oc},productsOut:sc,autocompleteProductsOut:ac,productOut:uc,query:cc,queryCategory:lc,get:hc,search:pc,searchAutocomplete:fc,queryArea:dc,productQueries:Uu,productQueriesWithoutCategory:$u,productQueriesSearch:zu,autocompleteProductQueriesSearch:Gu,filterQueriesSearch:Vu});const yc=ce.object({entity:ce.object({id:ce.number(),label:ce.string()}),stock_qty:ce.number()}),mc=ce.object({city:ce.nullable(ce.object({id:ce.number(),label:ce.string()})),stock:ce.array(yc)});var _c;!function(t){t.stock=yc,t.availabilities=mc}(_c||(_c={}));const vc=ce.array(mc),bc=Ia(ya.join(Eu,":productID","stocks"),{},{apiName:"coral",schemas:{params:ce.object({productID:ce.number()}),queries:Uu,defaultResBody:vc}});var wc=Object.freeze({__proto__:null,get Parts(){return _c},stockOut:vc,get:bc}),Ec=Object.freeze({__proto__:null,category:Lu,filter:Zu,product:gc,shared:Tu,stock:wc});const xc=ce.object({id:ce.number(),label:ce.string(),status:ce.boolean(),sort:ce.number().nullable()}),Sc=ce.object({id:ce.number(),label:ce.string()});var Ic;!function(t){t.city=xc,t.district=Sc}(Ic||(Ic={}));const Cc=ce.array(xc),Oc=ce.array(Sc),Tc="cities",Pc=ya.join(Tc,":cityID","districts"),Nc=Ia(Tc,{method:"GET"},{apiName:"coral",schemas:{defaultResBody:Cc}}),Rc=Ia(Pc,{},{apiName:"coral",schemas:{params:ce.object({cityID:ce.number()}),defaultResBody:Oc}});var Ac=Object.freeze({__proto__:null,get Parts(){return Ic},citiesOut:Cc,districtsOut:Oc,getCities:Nc,getDistricts:Rc});const Dc=ce.object({failUrl:ce.string(),okUrl:ce.string(),callbackUrl:ce.string(),saveCard:ce.union([ce.literal(0),ce.literal(1)]),lang:ce.union([ce.literal("fr"),ce.literal("ar")])}),Lc=ce.union([Dc.extend({urlType:ce.literal("order"),order:ce.object({uuid:ce.string()})}),Dc.extend({urlType:ce.literal("balance_order"),balanceOrder:ce.object({uuid:ce.string()})}),Dc]),Mc=ce.string(),kc=Ia("payment/cmi/customers/:customer_id/generate_payment_url",{method:"POST"},{apiName:"wynd",schemas:{params:ce.object({customer_id:ce.number()}),defaultReqBody:Lc,defaultResBody:Mc}});var jc=Object.freeze({__proto__:null,cmiIn:Lc,cmiOut:Mc,generatePaymentUrl:kc});const Fc=ce.string().regex(/^#([0-9a-f]{3}){1,2}$/i),Bc=ce.object({colors:ce.object({color600:Fc.nullable(),color500:Fc.nullable(),color400:Fc.nullable(),color300:Fc.nullable(),color200:Fc.nullable(),color100:Fc.nullable()}),modal:ce.object({title:ce.string(),content:ce.string(),image:ce.string().nullable(),button_label:ce.string(),button_link_mobile:ce.string().nullable()}),home:ce.object({banner:ce.string().nullable()}),landing:ce.object({image:ce.string().nullable()}),start_date:ce.date(),end_date:ce.date(),enabled_website:ce.boolean(),enabled_mobile:ce.boolean()}),qc=Ia(ya.join("cms","events","current"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:Bc}});var Uc=Object.freeze({__proto__:null,eventOut:Bc,getCurrentEvent:qc}),$c=Object.freeze({__proto__:null,event:Uc});const zc=ce.object({name:ce.string(),amount:ce.string(),unit:ce.string(),image:ce.string().nullable(),inactiveImage:ce.string().nullable(),description:ce.string(),code:ce.number(),dateStart:ce.string(),dateExpire:ce.string(),redeemed:ce.boolean(),expired:ce.boolean(),productPrice:ce.number().nullable(),tags:ce.array(ce.object({code:ce.number(),label:ce.string()})).nullable(),featured:ce.boolean().optional(),featuredImage:ce.string().nullable(),featuredOrder:ce.number().nullable(),featuredLink:ce.string().nullable(),featuredSiteLink:ce.string().nullable()});var Gc;!function(t){t.voucher=zc}(Gc||(Gc={}));const Vc=ce.array(zc),Yc=Ia(ya.join("customer","vouchers"),{},{apiName:"coral",schemas:{defaultResBody:Vc}});var Zc=Object.freeze({__proto__:null,get Parts(){return Gc},voucherOut:Vc,queryVoucher:Yc}),Hc=Object.freeze({__proto__:null,voucher:Zc});const Xc={MOBILE:"mobile",WEB:"web"},Wc=ce.object({}),Kc=Wc.extend({}),Qc=Wc.extend({id:ce.number(),draft:ce.boolean(),title:ce.string(),body:ce.string().nullable()});var Jc=Object.freeze({__proto__:null,ArticleLabelName:Xc,articleIn:Kc,articleOut:Qc});const tl="customer-service",el=ya.join(tl,"tickets"),nl=ya.join(el,":id/comments"),rl=ce.object({id:ce.number(),typeId:ce.number(),name:ce.string()}),il=rl.extend({}),ol=ce.array(rl),sl=Ia(ya.join(tl,"failures"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:ol}});var al=Object.freeze({__proto__:null,query:sl,failureIn:il,failureOut:ol});const ul=ce.object({}).extend({}),cl=ce.array(Qc),ll=ce.object({label_names:ce.nativeEnum(Xc)}).partial().optional(),hl=Ia(ya.join(tl,"faq"),{method:"GET"},{apiName:"coral",schemas:{queries:ll,defaultResBody:cl}});var pl=Object.freeze({__proto__:null,query:hl,faqIn:ul,faqOut:cl});const fl=ce.object({id:ce.string(),idSupplier:ce.string(),ean:ce.string(),name:ce.string(),nameSupplier:ce.string(),warranty:ce.boolean(),buyDate:ce.string(),price:ce.number(),siteCode:ce.number()}),dl=fl.extend({}),gl=ce.array(fl),yl=ce.object({num:ce.string(),buyDate:ce.string(),articles:ce.array(fl)}),ml=yl.extend({}),_l=ce.array(yl),vl=ce.object({id:ce.number(),comment:ce.string(),creationDate:ce.string(),currentStatusId:ce.number(),currentStatusName:ce.string(),siteCode:ce.number()}),bl=vl.extend({}),wl=ce.array(vl),El=ce.object({date:ce.string(),name:ce.string(),isDone:ce.boolean(),isCurrent:ce.boolean(),isFinal:ce.boolean(),index:ce.number()}),xl=ce.object({productName:ce.string(),failures:ce.array(ce.string()),comment:ce.string(),files:ce.array(ce.string()),id:ce.number(),isFinished:ce.boolean(),events:ce.array(El)}),Sl=xl.extend({}),Il=xl,Cl=ce.instanceof(FormData).refine((t=>{const e=(t,e)=>"has"in t?t.has(e):"get"in t?null!==t.get(e):"getParts"in t&&(t.getParts()?.some((t=>t?.fieldName===e))??!1);return e(t,"articleName")&&e(t,"comment")&&e(t,"productCode")&&e(t,"files")&&e(t,"supplierCode")&&e(t,"supplierName")&&e(t,"firstName")&&e(t,"lastName")&&e(t,"isWarranty")&&e(t,"pieceType")&&e(t,"contractNumber")&&e(t,"siteCode")})),Ol=ce.object({message:ce.string(),data:ce.object({idReclamation:ce.number()}).nullable()}),Tl=ce.object({number:ce.string(),searchType:ce.enum(["contrat","ticket"])}),Pl=ce.object({id:ce.string()}),Nl=Ia(ya.join(tl,"reclamations/articles"),{method:"GET"},{apiName:"coral",schemas:{queries:Tl,defaultResBody:gl}}),Rl=Ia(ya.join(tl,"reclamations/articles-ecommerce"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:_l}}),Al=Ia(ya.join(tl,"reclamations"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:wl}}),Dl=Ia(ya.join(tl,"reclamations/:id"),{method:"GET"},{apiName:"coral",schemas:{params:Pl,defaultResBody:Il}}),Ll=Ia(ya.join(tl,"reclamations"),{method:"POST",headers:{"Content-Type":"multipart/form-data"}},{apiName:"coral",schemas:{defaultReqBody:Cl,defaultResBody:Ol}});var Ml=Object.freeze({__proto__:null,queryArticles:Nl,queryArticlesEcommerce:Rl,query:Al,find:Dl,create:Ll,articleIn:dl,articleOut:gl,articleEcommerceIn:ml,articleEcommerceOut:_l,reclamationIn:bl,reclamationOut:wl,reclamationDetailsIn:Sl,reclamationDetailsOut:Il,createReclamationIn:Cl,createReclamationOut:Ol,searchQueries:Tl,reclamationDetailsQueries:Pl});const kl=ce.object({url:ce.string(),id:ce.number(),file_name:ce.string(),content_url:ce.string(),content_type:ce.string()}),jl=ce.object({id:ce.number(),name:ce.string(),is_agent:ce.boolean()}),Fl=ce.object({body:ce.string()}),Bl=Fl.extend({}),ql=ce.instanceof(FormData).refine((t=>{const e=(t,e)=>"has"in t?t.has(e):"get"in t?null!==t.get(e):"getParts"in t&&(t.getParts()?.some((t=>t?.fieldName===e))??!1);return e(t,"body")&&e(t,"upload")})),Ul=Fl.extend({id:ce.number(),url:ce.string(),type:ce.string(),request_id:ce.number(),body:ce.string(),is_public:ce.boolean(),author_id:ce.number(),attachments:ce.array(kl),created_at:ce.string()}),$l=ce.object({comments:ce.array(Ul),users:ce.array(jl)}),zl=ce.object({id:ce.string()}),Gl=Ia(nl,{method:"GET"},{apiName:"coral",schemas:{defaultResBody:$l,params:zl}}),Vl=Ia(nl,{method:"POST"},{apiName:"coral",schemas:{defaultReqBody:Bl,params:zl}}),Yl=Ia(ya.join(nl,"attachment"),{method:"POST",headers:{"Content-Type":"multipart/form-data"}},{apiName:"coral",schemas:{defaultReqBody:ql,params:zl}});var Zl=Object.freeze({__proto__:null,attachment:kl,comment:Fl,commentIn:Bl,commentInWithAttachment:ql,commentOut:Ul,commentsOut:$l,query:Gl,create:Vl,createWithAttachment:Yl,requestParams:zl});const Hl={API:"api"},Xl={NEW:"new",OPEN:"open",CLOSED:"closed",PENDING:"pending",HOLD:"hold",SOLVED:"solved"},Wl=ce.object({id:ce.number(),value:ce.string().nullable()}),Kl=ce.object({id:ce.number(),status:ce.nativeEnum(Xl),subject:ce.string(),via:ce.object({channel:ce.nativeEnum(Hl).or(ce.string())}),requester_id:ce.number().nullable(),created_at:ce.string(),updated_at:ce.string()}),Ql=ce.object({comment:Bl,subject:ce.string(),fields:ce.array(Wl)}),Jl=ce.object({request:Ql.pick({comment:!0})}),th=Kl,eh=ce.object({}),nh=Kl.extend({}),rh=ce.object({requests:ce.array(Kl)}),ih={CREATED_AT:"created_at",UPDATED_AT:"updated_at",ASSIGNEE:"assignee",ASSIGNEE_NAME:"assignee.name",REQUESTER:"requester",REQUESTER_NAME:"requester.name",STATUS:"status",SUBJECT:"subject",ID:"id",LOCALE:"locale",GROUP:"group"},oh={ASC:"asc",DESC:"desc"},sh=ce.object({id:ce.string()}),ah=ce.object({sort_by:ce.nativeEnum(ih),sort_order:ce.nativeEnum(oh)}).partial().optional(),uh=Ia(el,{method:"GET"},{apiName:"coral",schemas:{defaultResBody:rh,queries:ah}}),ch=Ia(ya.join(el,":id"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:th,params:sh}}),lh=Ia(el,{method:"POST"},{apiName:"coral",schemas:{defaultReqBody:Ql,defaultResBody:th}});var hh=Object.freeze({__proto__:null,comment:Zl,Channels:Hl,Status:Xl,ticketIn:Ql,ticketCommentIn:Jl,ticketOut:th,tickets:eh,ticketsIn:nh,ticketsOut:rh,query:uh,get:ch,create:lh,SortBy:ih,SortOrder:oh,ticketParams:sh,ticketsQueries:ah}),ph=Object.freeze({__proto__:null,article:Jc,failure:al,faq:pl,reclamation:Ml,ticket:hh});const fh=t=>t.transform((t=>null));var dh;!function(t){!function(t){t.formatQueryFields=(e,n)=>{const r=Object.entries(e).reduce(((e,[r,i])=>{const o=n?`${n}.${r}`:r;return"boolean"==typeof i&&i?[...e,o]:"boolean"!=typeof i||i?[...e,t.formatQueryFields(i,o)]:e}),[]).filter((t=>t));return r.join(",")},t.queries=ce.object({fields:ce.union([ce.string(),ce.array(ce.string()),ce.undefined()]),filter:ce.union([ce.undefined(),ce.any()])})}(t.query||(t.query={})),function(t){let e;var n;!function(t){t.id=ce.number().optional(),t.string=ce.union([ce.string(),ce.null(),fh(ce.undefined())]),t.number=ce.union([ce.number(),ce.null(),fh(ce.undefined())]),t.status=ce.enum(["published","draft","deleted"]),t.image=ce.object({id:ce.string()}),t.language=ce.enum(["fr-FR","ar-MA"]),t.boolean=ce.union([ce.boolean(),ce.literal(0),ce.literal(1)]).transform((t=>!!t))}(e=t.base||(t.base={})),(n=t.relations||(t.relations={})).translationsUnion=t=>ce.union([ce.array(ce.number()).transform((t=>{})),ce.array(ce.object({languages_code:e.language}).merge(t)),ce.undefined()]),n.translations=t=>ce.object({translations:n.translationsUnion(t)}),n.nullable=t=>ce.union([t,ce.number().transform((t=>null)),ce.undefined().transform((t=>null)),ce.null()]),n.nullableArray=t=>ce.union([ce.array(t),ce.array(ce.number()).transform((t=>null)),ce.undefined().transform((t=>null)),ce.null()]),n.image=ce.union([e.image.transform((t=>t.id)),ce.string(),ce.null(),ce.undefined().transform((t=>null))])}(t.types||(t.types={})),(t.translation||(t.translation={})).translateContent=(t,e,n)=>{if(!t.translations)return t;const r=t.translations.find((t=>t.languages_code===e));if(!r)return t;const i=function(t){return null!=t&&"function"==typeof t.clone?t.clone():Dr(t,[],[],!0)}(t);return n.forEach((([t,e])=>{const n=r[e];n&&(i[t]=n)})),i}}(dh||(dh={}));const gh=ce.object({id:ce.number(),status:dh.types.base.status,titre:ce.string(),description:ce.string(),image:dh.types.relations.image,label_bouton:ce.string(),lien:ce.string()}).merge(dh.types.relations.translations(ce.object({image:dh.types.relations.image,titre:ce.string().nullable(),description:ce.string().nullable(),label_bouton:ce.string().nullable()})));var yh;!function(t){t.advantage=gh}(yh||(yh={}));const mh=ce.object({data:ce.array(gh)}),_h="items";var vh;!function(t){t.advantages=ya.join(_h,"avantages"),t.catalogs=ya.join(_h,"catalogue"),t.coupons=ya.join(_h,"coupons"),t.pages=ya.join(_h,"page"),t.settings=ya.join(_h,"settings"),t.faq=ya.join(_h,"question_faq"),t.article=ya.join(_h,"article"),t.produit=ya.join(_h,"produit"),t.recipe=ya.join(_h,"liste_recette"),t.menu=ya.join(_h,"menu"),t.footer=ya.join(_h,"footer"),t.homeSlider=ya.join(_h,"carousel_page_accueil"),t.sectorMCategories=ya.join(_h,"sector_m_categories"),t.sectorMHome=ya.join(_h,"sector_m"),t.sectorMProducts=ya.join(_h,"sector_m_products")}(vh||(vh={}));const bh={"*":!0,translations:{"*":!0}},wh=Ia(vh.advantages,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:mh}});var Eh=Object.freeze({__proto__:null,get Parts(){return yh},advantagesOut:mh,get:async(t,e=bh)=>{const n=dh.query.formatQueryFields(e),r=await wh({queries:{fields:n}}),i=r.data.data.map((e=>dh.translation.translateContent({...e,translations:e.translations??[]},t,[["titre","titre"],["description","description"],["image","image"],["label_bouton","label_bouton"]])));return{...r,data:{data:i}}}});const xh=ce.object({id:ce.number().nullable(),status:dh.types.base.status,thematique:ce.string().nullable(),categories_articles:ce.string().nullable(),titre:ce.string().nullable(),date_created:ce.string().nullable().optional(),image:dh.types.relations.image,pdf:dh.types.relations.image}).merge(dh.types.relations.translations(ce.object({titre:ce.string().nullable(),image:dh.types.relations.image})));var Sh;!function(t){t.article=xh}(Sh||(Sh={}));const Ih=ce.object({data:ce.array(xh)}),Ch={"*":!0,image:{"*":!0},pdf:{"*":!0},translations:{"*":!0}},Oh=Ia(vh.article,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Ih}});var Th=Object.freeze({__proto__:null,get Parts(){return Sh},articleOut:Ih,get:async(t,e=Ch)=>{const n=dh.query.formatQueryFields(e),r=await Oh({queries:{fields:n}}),i=r.data.data.map((e=>dh.translation.translateContent({...e,translations:e.translations??[]},t,[["titre","titre"],["image","image"]])));return{...r,data:{data:i}}}});const Ph=ce.object({id:ce.number(),status:dh.types.base.status,sort:ce.number(),type:ce.enum(["Marjane","Marjane Market"]),titre:ce.string(),sous_titre:ce.string().nullable(),nouveau:dh.types.base.boolean,lien_page_interne:ce.string().nullable(),lien_catalogue:ce.string().nullable(),image_de_presentation:dh.types.relations.image}).merge(dh.types.relations.translations(ce.object({image_de_presentation:dh.types.relations.image,lien_page_interne:ce.string().nullable(),lien_catalogue:ce.string().nullable(),titre:ce.string().nullable(),sous_titre:ce.string().nullable()})));var Nh;!function(t){t.catalog=Ph}(Nh||(Nh={}));const Rh=ce.object({data:ce.array(Ph)}),Ah={"*":!0,translations:{"*":!0}},Dh=Ia(vh.catalogs,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Rh}});var Lh=Object.freeze({__proto__:null,get Parts(){return Nh},catalogsOut:Rh,get:async(t,e=Ah)=>{const n=dh.query.formatQueryFields(e),r=await Dh({queries:{fields:n}}),i=r.data.data.map((e=>dh.translation.translateContent({translations:[],...e},t,[["image_de_presentation","image_de_presentation"],["lien_page_interne","lien_page_interne"],["lien_catalogue","lien_catalogue"],["titre","titre"],["sous_titre","sous_titre"]])));return{...r,data:{data:i}}}});const Mh=ce.object({id:ce.number(),status:dh.types.base.status,code:ce.number(),image:dh.types.relations.image,order:ce.number(),link:ce.string().nullable(),link_site:ce.string().nullable()}).merge(dh.types.relations.translations(ce.object({image:dh.types.relations.image})));var kh;!function(t){t.coupon=Mh}(kh||(kh={}));const jh=ce.object({data:ce.array(Mh)}),Fh={"*":!0,translations:{"*":!0}},Bh=Ia(vh.coupons,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:jh}});var qh=Object.freeze({__proto__:null,get Parts(){return kh},couponsOut:jh,get:async(t,e=Fh)=>{const n=dh.query.formatQueryFields(e),r=await Bh({queries:{fields:n}}),i=r.data.data.map((e=>dh.translation.translateContent({...e,translations:e.translations??[]},t,[["image","image"]])));return{...r,data:{data:i}}}});const Uh=ce.object({id:ce.number().nullable(),type:ce.string().nullable().optional(),status:dh.types.base.status,question:ce.string().nullable(),reponse:ce.string().nullable()}).merge(dh.types.relations.translations(ce.object({question:ce.string().nullable(),reponse:ce.string().nullable()})));var $h;!function(t){t.faq=Uh}($h||($h={}));const zh=ce.object({data:ce.array(Uh)}),Gh={"*":!0,translations:{"*":!0}},Vh=Ia(vh.faq,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:zh}});var Yh=Object.freeze({__proto__:null,get Parts(){return $h},faqOut:zh,get:(t,e=Gh)=>{const n=dh.query.formatQueryFields(e);return Vh({queries:{fields:n}})}});const Zh=ce.lazy((()=>ce.object({id:ce.number().nullable(),status:dh.types.base.status,sort:ce.number().nullable(),libelle:ce.string().nullable().optional(),pictogramme:dh.types.relations.image,lien_interne:ce.string().nullable(),lien_externe:ce.string().nullable(),classe_css:ce.string().nullable(),text:ce.string().nullable(),item_enfants:dh.types.relations.nullableArray(Zh)}).merge(dh.types.relations.translations(ce.object({libelle:ce.string().nullable().optional(),text:ce.string().nullable()}))))),Hh=ce.object({id:ce.number().nullable(),status:dh.types.base.status,sort:ce.number().nullable(),libelle:ce.string().nullable().optional(),pictogramme:dh.types.relations.image,lien_interne:ce.string().nullable(),lien_externe:ce.string().nullable(),classe_css:ce.string().nullable(),text:ce.string().nullable(),item_parent:ce.number().nullable(),item_enfants:dh.types.relations.nullableArray(Zh)}).merge(dh.types.relations.translations(ce.object({libelle:ce.string().nullable().optional(),text:ce.string().nullable()}))),Xh=ce.object({id:ce.number().nullable().optional(),label:ce.string().nullable().optional(),label_slug:ce.string().nullable().optional(),description:ce.string().nullable().optional(),items:dh.types.relations.nullableArray(Hh)}),Wh=ce.object({menu:dh.types.relations.nullable(Xh)}),Kh=ce.object({menus:dh.types.relations.nullableArray(Wh)});var Qh;!function(t){t.footer=Kh}(Qh||(Qh={}));const Jh=ce.object({data:Kh}),tp={menus:{menu:{"*":!0,items:{"*":!0,pictogramme:{"*":!0},item_enfants:{"*":!0,pictogramme:{"*":!0},item_enfants:{"*":!0,pictogramme:{"*":!0},lien_externe:{"*":!0}}}}}},translations:{"*":!0}},ep=ce.object({id:ce.string()}),np=Ia(ya.join(vh.footer,":id"),{},{apiName:"directus",schemas:{params:ep,queries:dh.query.queries,defaultResBody:Jh}});var rp=Object.freeze({__proto__:null,get Parts(){return Qh},footerOut:Jh,get:(t,e,n=tp)=>{const r=dh.query.formatQueryFields(n);return np({params:{id:e.toString()},queries:{fields:r}})}});const ip=ce.object({id:ce.number(),status:dh.types.base.status,type:ce.union([ce.literal("bandeau"),ce.literal("banner")]).nullable(),contenu:ce.array(ce.object({paragraphe_id:ce.object({image:dh.types.relations.image,contenu:ce.string().nullable(),lien:ce.string().nullable()}).nullable()}).nullable())});var op;!function(t){t.homeSlider=ip}(op||(op={}));const sp=ce.object({data:ce.array(ip)}),ap={"*":{"*":{"*":{"*":!0}}},translations:{"*":!0}},up=Ia(vh.homeSlider,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:sp}});var cp=Object.freeze({__proto__:null,get Parts(){return op},homeSliderOut:sp,get:(t,e=ap)=>{const n=dh.query.formatQueryFields(e);return up({queries:{fields:n}})}});const lp=ce.object({id:ce.number().nullable(),status:dh.types.base.status,sort:ce.number().nullable(),libelle:ce.string().nullable().optional(),pictogramme:dh.types.relations.image,lien_interne:ce.string().nullable(),lien_externe:ce.string().nullable(),classe_css:ce.string().nullable(),text:ce.string().nullable()}).merge(dh.types.relations.translations(ce.object({libelle:ce.string().nullable().optional(),text:ce.string().nullable()}))),hp=ce.object({id:ce.number().nullable(),label:ce.string().nullable(),label_slug:ce.string().nullable(),description:ce.string().nullable(),items:dh.types.relations.nullableArray(lp)});var pp;!function(t){t.menu=hp}(pp||(pp={}));const fp=ce.object({data:hp}),dp={"*":{"*":{"*":{"*":!0}}},translations:{"*":!0}},gp=ce.object({id:ce.string()}),yp=Ia(ya.join(vh.menu,":id"),{},{apiName:"directus",schemas:{params:gp,queries:dh.query.queries,defaultResBody:fp}});var mp=Object.freeze({__proto__:null,get Parts(){return pp},menuOut:fp,get:(t,e,n=dp)=>{const r=dh.query.formatQueryFields(n);return yp({params:{id:e.toString()},queries:{fields:r}})}});const _p=ce.object({id:ce.number(),status:dh.types.base.status,sort:ce.number(),image:dh.types.relations.image}),vp=ce.object({id:ce.string().nullable(),title:ce.string().nullable()}),bp=ce.object({id:ce.number().optional().nullable(),status:dh.types.base.status,nom:ce.string().optional().nullable(),description:ce.string().optional().nullable(),logo:dh.types.relations.image,reference:ce.string().optional().nullable()}),wp=ce.object({id:ce.number(),status:dh.types.base.status,nom:ce.string(),type:ce.enum(["DON"]),montant:ce.string(),quantite:ce.string(),produits:ce.string(),images:ce.array(_p),association:bp}).partial(),Ep=ce.object({id:ce.number().optional(),pid:ce.object({id:ce.number(),status:dh.types.base.status,label:ce.string().nullable(),titre:ce.string().nullable(),lien:ce.string().optional().nullable(),image:ce.union([dh.types.relations.image,ce.string(),vp]).optional().nullable(),contenu:ce.string().optional().nullable(),icone:ce.union([dh.types.relations.image,ce.string(),vp]).optional().nullable(),entete_texte:ce.string().optional().nullable(),couleur_du_titre:ce.string().optional().nullable(),couleur_background_image:ce.string().optional().nullable(),couleur_entete:ce.string().optional().nullable(),couleur_bouton_retour:ce.string().optional().nullable()}).merge(dh.types.relations.translations(ce.object({titre:ce.string().nullable(),contenu:ce.string().optional().nullable(),entete_texte:ce.string().optional().nullable(),label:ce.string().optional().nullable(),image:dh.types.relations.image,icone:dh.types.relations.image}))).optional().nullable()}),xp=ce.object({status:dh.types.base.status,type_affichage:ce.union([ce.string(),ce.undefined(),ce.null()]),css_class:ce.union([ce.string(),ce.undefined(),ce.null()]),id:ce.number().nullable(),sort:ce.number().nullable(),label:ce.string().nullable(),titre:ce.string().nullable(),bouton_label:ce.string().nullable(),bouton_lien:ce.string().nullable(),paragraphes:dh.types.relations.nullableArray(Ep)}).merge(dh.types.relations.translations(ce.object({titre:ce.string().nullable(),bouton_label:ce.string().optional().nullable()}))).optional().nullable(),Sp=ce.object({id:ce.number().optional().nullable(),status:dh.types.base.status,label:ce.string().optional().nullable(),titre:ce.string().optional().nullable(),titre_slug:ce.string().optional().nullable(),projets:dh.types.relations.nullableArray(wp),strates:dh.types.relations.nullableArray(xp),template:ce.string().optional().nullable()}).merge(dh.types.relations.translations(ce.object({titre:ce.string().optional().nullable(),label:ce.string().optional().nullable()}))).optional().nullable();var Ip;!function(t){t.page=Sp,t.strate=xp,t.projet=wp,t.association=bp,t.image=_p}(Ip||(Ip={}));const Cp=ce.object({data:ce.array(Sp).optional()}),Op={"*":!0,strates:{"*":!0,paragraphes:{"*":!0,pid:{"*":!0}}},projets:{"*":!0,association:{"*":!0},images:{"*":!0},produits:{"*":!0}}},Tp=Ia(vh.pages,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Cp}});var Pp=Object.freeze({__proto__:null,get Parts(){return Ip},pagesOut:Cp,get:async(t,e,n=Op)=>{const r=dh.query.formatQueryFields(n),i=await Tp({queries:{fields:r,filter:e}}),o=i?.data?.data?.map((e=>{const n=e?.strates?.length?e?.strates?.map((e=>{const n=e?.paragraphes?.length?e?.paragraphes?.map((e=>{const n=e?.pid?dh.translation.translateContent({translations:[],...e.pid},t,[["titre","titre"],["contenu","contenu"],["entete_texte","entete_texte"],["label","label"],["image","image"],["icone","icone"]]):null;return dh.translation.translateContent({translations:[],...e,pid:n},t,[])})):[];return dh.translation.translateContent({translations:[],...e,paragraphes:n},t,[["titre","titre"],["bouton_label","bouton_label"]])})):[];return dh.translation.translateContent({translations:[],...e,strates:n},t,[["titre","titre"],["label","label"]])}));return{...i,data:{data:o}}}});const Np=ce.object({id:ce.number().nullable(),status:dh.types.base.status,image:dh.types.relations.image,lien_ecommerce:ce.string().nullable().optional(),nom_produit:ce.string().nullable().optional(),titre:ce.string().nullable().optional(),mis_en_avant:ce.boolean().nullable().optional(),nouveautes_marjane:ce.boolean().nullable().optional(),nouveautes_marjane_market:ce.boolean().nullable().optional(),offres_du_moment_marjane:ce.boolean().nullable().optional(),offres_du_moment_market:ce.boolean().nullable().optional(),offres_imbattables_marjane:ce.boolean().nullable().optional(),offres_imbattables_market:ce.boolean().nullable().optional(),toutes_les_recettes:ce.boolean().nullable().optional(),tous_les_conseils:ce.boolean().nullable().optional()}).merge(dh.types.relations.translations(ce.object({titre:ce.string().nullable().optional(),nom_produit:ce.string().nullable().optional(),image:dh.types.relations.image})));var Rp;!function(t){t.product=Np}(Rp||(Rp={}));const Ap=ce.object({data:ce.array(Np)}),Dp={"*":!0,image:{"*":!0},translations:{"*":!0}},Lp=Ia(vh.produit,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Ap}});var Mp=Object.freeze({__proto__:null,get Parts(){return Rp},productOut:Ap,get:async(t,e=Dp)=>{const n=dh.query.formatQueryFields(e),r=await Lp({queries:{fields:n}}),i=r.data.data.map((e=>dh.translation.translateContent({...e,translations:e.translations??[]},t,[["titre","titre"],["image","image"],["nom_produit","nom_produit"]])));return{...r,data:{data:i}}}});const kp=ce.object({id:ce.number().nullable(),status:dh.types.base.status,nom:ce.string().nullable().optional(),presentation_1:dh.types.relations.image,presentation_2:dh.types.relations.image,titre_contenu:ce.string().nullable().optional(),contenu:ce.string().nullable().optional()}),jp=ce.object({id:ce.number().nullable(),status:dh.types.base.status,titre:ce.string().nullable().optional(),image:dh.types.relations.image,css_class:ce.string().nullable().optional(),recettes:dh.types.relations.nullableArray(kp)}).merge(dh.types.relations.translations(ce.object({question:ce.string().nullable(),reponse:ce.string().nullable()})));var Fp;!function(t){t.recipe=jp}(Fp||(Fp={}));const Bp=ce.object({data:ce.array(jp)}),qp={"*":!0,image:{"*":!0},recettes:{"*":!0,presentation_1:{"*":!0},presentation_2:{"*":!0}},translations:{"*":!0}},Up=Ia(vh.recipe,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Bp}});var $p=Object.freeze({__proto__:null,get Parts(){return Fp},recipeOut:Bp,get:(t=qp)=>{const e=dh.query.formatQueryFields(t);return Up({queries:{fields:e}})}});const zp=ce.object({id:ce.number(),latitude:ce.string(),longitude:ce.string(),image:dh.types.relations.image}),Gp=ce.object({id:ce.number(),status:dh.types.base.status,title:ce.string(),image_thumbnail:dh.types.relations.image,banner_image:dh.types.relations.image,site_banner_image:dh.types.relations.image,color_primary:ce.string(),color_secondary:ce.string(),category_filter:ce.string().nullable(),producers:dh.types.relations.nullableArray(ce.object({sector_m_producers_id:zp})),video:ce.object({id:ce.number(),titre:ce.string().nullable(),video_thumbnail:dh.types.relations.image,video:ce.string().nullable()}).nullable()}).merge(dh.types.relations.translations(ce.object({title:ce.string().nullable(),image_thumbnail:dh.types.relations.image,banner_image:dh.types.relations.image})));var Vp;!function(t){t.category=Gp,t.producer=zp}(Vp||(Vp={}));const Yp=ce.object({data:Gp}),Zp={"*":!0,producers:{"*":!0,sector_m_producers_id:{"*":!0}},translations:{"*":!0},video:{"*":!0}},Hp=ce.object({id:ce.string()}),Xp=Ia(ya.join(vh.sectorMCategories,":id"),{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Yp,params:Hp}});var Wp=Object.freeze({__proto__:null,get Parts(){return Vp},categoryOut:Yp,get:async(t,e,n=Zp)=>{const r=dh.query.formatQueryFields(n),i=await Xp({params:{id:e.toString()},queries:{fields:r}}),o=dh.translation.translateContent({translations:[],...i.data.data},t,[["title","title"],["banner_image","banner_image"]]);return{...i,data:{data:o}}}});const Kp=ce.object({id:ce.number(),status:dh.types.base.status,title:ce.string(),image_thumbnail:dh.types.relations.image,banner_image:dh.types.relations.image,color_primary:ce.string().nullable()}).merge(dh.types.relations.translations(ce.object({title:ce.string().nullable(),image_thumbnail:dh.types.relations.image,banner_image:dh.types.relations.image}))),Qp=ce.object({id:ce.number(),title:ce.string().nullable(),sub_title:ce.string().nullable(),banner_image:dh.types.relations.image,site_banner_image:dh.types.relations.image,link_advantage:ce.string().nullable(),link_process:ce.string().nullable(),categories:dh.types.relations.nullableArray(Kp),video:ce.object({id:ce.number(),titre:ce.string().nullable(),video_thumbnail:dh.types.relations.image,video:ce.string().nullable()}).nullable()}).merge(dh.types.relations.translations(ce.object({title:ce.string().nullable(),sub_title:ce.string().nullable(),banner_image:dh.types.relations.image})));var Jp;!function(t){t.category=Kp,t.home=Qp}(Jp||(Jp={}));const tf=ce.object({data:Qp}),ef={"*":!0,categories:{"*":!0,translations:{"*":!0}},translations:{"*":!0},video:{"*":!0}},nf=Ia(vh.sectorMHome,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:tf}});var rf=Object.freeze({__proto__:null,get Parts(){return Jp},homeOut:tf,get:async(t,e=ef)=>{const n=dh.query.formatQueryFields(e),r=await nf({queries:{fields:n}}),i=dh.translation.translateContent({translations:[],...r.data.data},t,[["title","title"],["sub_title","sub_title"],["banner_image","banner_image"]]);return i.categories=i.categories?.map((e=>dh.translation.translateContent({translations:[],...e},t,[["title","title"],["banner_image","banner_image"]])))??null,{...r,data:{data:i}}}});const of=ce.object({id:ce.number(),latitude:ce.string(),longitude:ce.string(),image:dh.types.relations.image}),sf=ce.object({id:ce.string(),image:dh.types.relations.image,producers:dh.types.relations.nullableArray(ce.object({sector_m_producers_id:of})),video:ce.object({id:ce.number(),titre:ce.string().nullable(),video_thumbnail:dh.types.relations.image,video:ce.string().nullable()}).nullable()});var af;!function(t){t.product=sf}(af||(af={}));const uf=ce.object({data:sf}),cf={"*":!0,producers:{"*":!0,sector_m_producers_id:{"*":!0}},video:{"*":!0}},lf=ce.object({id:ce.string()}),hf=Ia(ya.join(vh.sectorMProducts,":id"),{},{apiName:"directus",schemas:{params:lf,queries:dh.query.queries,defaultResBody:uf}});var pf=Object.freeze({__proto__:null,get Parts(){return af},productOut:uf,get:(t,e,n=cf)=>{const r=dh.query.formatQueryFields(n);return hf({params:{id:e.toString()},queries:{fields:r}})}}),ff=Object.freeze({__proto__:null,home:rf,products:pf,categories:Wp});const df=ce.object({id:dh.types.base.id,titre:dh.types.base.string,contenu:dh.types.base.string,lien_mobile:dh.types.base.string,lien_site:dh.types.base.string,largeur_bandeau_mobile:dh.types.base.number,hauteur_bandeau_mobile:dh.types.base.number}).merge(dh.types.relations.translations(ce.object({contenu:dh.types.base.string}))),gf=ce.object({link:dh.types.base.string,title:dh.types.base.string,image:dh.types.relations.image}).merge(dh.types.relations.translations(ce.object({title:dh.types.base.string,image:dh.types.relations.image}))),yf=ce.object({id:dh.types.base.id}),mf=ce.object({titre_translations:dh.types.relations.translationsUnion(ce.object({titre:dh.types.base.string}))}),_f=ce.object({bouton_voir_tout_translations:dh.types.relations.translationsUnion(ce.object({bouton_voir_tout:dh.types.base.string}))}),vf=ce.union([yf.extend({type:ce.union([ce.literal("commandes-en-cours"),ce.literal("commander-a-nouveau")]),titre:dh.types.base.string}).merge(mf),yf.extend({type:ce.union([ce.literal("courses-en-ligne"),ce.literal("catalogues"),ce.literal("non-alimentaire"),ce.literal("top-promotions"),ce.literal("top-ventes"),ce.literal("achats-frequents")]),titre:dh.types.base.string,bouton_voir_tout:dh.types.base.string}).merge(mf).merge(_f),yf.extend({type:ce.literal("bandeau-cms"),bandeau:dh.types.relations.nullable(df)}),yf.extend({type:ce.literal("multi-bandeau-cms"),multi_bandeau:dh.types.relations.nullableArray(ce.object({bandeau_cms_id:dh.types.relations.nullable(df)}))}),yf.extend({type:ce.literal("liste-configurable"),titre:dh.types.base.string,bouton_voir_tout:dh.types.base.string,lien_mobile:dh.types.base.string}).merge(mf).merge(_f)]),bf=ce.object({id:dh.types.base.id,lien:dh.types.base.string,image:dh.types.relations.image,video:ce.object({id:ce.number(),titre:ce.string().nullable(),video_thumbnail:dh.types.relations.image,video:ce.string().nullable()}).nullable()}).merge(dh.types.relations.translations(ce.object({image:dh.types.relations.image}))),wf=ce.object({description:dh.types.base.string,header_cards:dh.types.relations.nullableArray(ce.object({header_cards_id:dh.types.relations.nullable(gf)})),layers:dh.types.relations.nullableArray(ce.object({configuration_accueil_mobile_row_id:dh.types.relations.nullable(vf)})),carousel_mobile:dh.types.relations.nullableArray(ce.object({carousel_mobile_id:dh.types.relations.nullable(bf)}))}),Ef=ce.object({id:dh.types.base.id}),xf=ce.union([Ef.extend({type:ce.union([ce.literal("commandes-en-cours"),ce.literal("commander-a-nouveau")]),titre:dh.types.base.string}),Ef.extend({type:ce.union([ce.literal("courses-en-ligne"),ce.literal("catalogues"),ce.literal("non-alimentaire"),ce.literal("top-promotions"),ce.literal("top-ventes"),ce.literal("achats-frequents")]),titre:dh.types.base.string,bouton_voir_tout:dh.types.base.string}),Ef.extend({type:ce.literal("bandeau-cms"),bandeau:dh.types.relations.nullable(df)}),Ef.extend({type:ce.literal("bandeau-double-cms"),bandeau_droit:dh.types.relations.nullable(df),bandeau_gauche:dh.types.relations.nullable(df)}),Ef.extend({type:ce.literal("liste-configurable"),titre:dh.types.base.string,bouton_voir_tout:dh.types.base.string,lien_site:dh.types.base.string})]),Sf=ce.object({id:dh.types.base.id,lien:dh.types.base.string,image:dh.types.relations.image}),If=ce.object({description:dh.types.base.string,layers:dh.types.relations.nullableArray(ce.object({configuration_accueil_site_row_id:dh.types.relations.nullable(xf)})),carousel_site:dh.types.relations.nullableArray(ce.object({carousel_site_id:dh.types.relations.nullable(Sf)})),bandeau_initial:dh.types.relations.nullable(df)}),Cf=ce.object({id:ce.number(),titre:ce.string().optional(),type:ce.enum(["","default","promotions"]).nullable(),contenu:ce.string().optional(),lien_mobile:ce.union([ce.string(),ce.undefined(),ce.null()]),lien_site:ce.union([ce.string(),ce.undefined(),ce.null()]),largeur_bandeau_mobile:ce.union([ce.number(),ce.undefined(),ce.null()]),hauteur_bandeau_mobile:ce.union([ce.number(),ce.undefined(),ce.null()])}).merge(dh.types.relations.translations(ce.object({contenu:ce.string().nullable()}))).nullable(),Of=ce.object({id:ce.number(),status:dh.types.base.status,position:ce.number().nullable()}).merge(dh.types.relations.translations(ce.object({titre_liste:ce.string().nullable(),bouton_voir_tout:ce.string().nullable()}))),Tf=ce.union([Of.extend({type:ce.literal("bandeau"),bandeau_cms:dh.types.relations.nullable(df)}),Of.extend({type:ce.literal("liste_configurable"),bandeau_cms:dh.types.relations.nullable(df),titre_liste:ce.string().nullable(),bouton_voir_tout:ce.string().nullable(),lien_mobile:ce.string().nullable()}),Of.extend({type:ce.union([ce.literal("top_ventes"),ce.literal("top_promotions"),ce.literal("achats_frequents"),ce.literal("produits_electromenagers")]),titre_liste:ce.string().nullable(),bouton_voir_tout:ce.string().nullable()}),Of.extend({type:ce.literal("luckycart_banner")})]),Pf=ce.union([Of.extend({type:ce.literal("catalogue"),bandeau_cms:dh.types.relations.nullable(Cf)}).nullable(),Of.extend({type:ce.literal("bandeau"),bandeau_cms:dh.types.relations.nullable(df)}).nullable(),Of.extend({type:ce.literal("liste_configurable"),bandeau_cms:dh.types.relations.nullable(df),titre_liste:ce.string().nullable(),bouton_voir_tout:ce.string().nullable(),lien_site:ce.string().nullable()}).nullable(),Of.extend({type:ce.union([ce.literal("top_ventes"),ce.literal("top_promotions"),ce.literal("achats_frequents"),ce.literal("produits_electromenagers")]).nullable(),titre_liste:ce.string().nullable(),bouton_voir_tout:ce.string().nullable()}),Of.extend({type:ce.literal("luckycart_banner")}).nullable()]),Nf=ce.object({status:dh.types.base.status,image:dh.types.relations.image,titre:ce.string().nullable(),text:ce.string().nullable(),button_label:ce.string().nullable(),lien_button_mobile:ce.string().nullable(),banner_button_label:ce.string().nullable(),banner_lien_button_mobile:ce.string().nullable(),banniere_home_page:dh.types.relations.image,date_debut:ce.string().nullable(),heure_debut:ce.string().nullable(),date_fin:ce.string().nullable(),heure_fin:ce.string().nullable(),mobile:dh.types.base.boolean,site:dh.types.base.boolean,color600:ce.union([ce.string(),ce.undefined(),ce.null()]),color500:ce.union([ce.string(),ce.undefined(),ce.null()]),color400:ce.union([ce.string(),ce.undefined(),ce.null()]),color300:ce.union([ce.string(),ce.undefined(),ce.null()]),color200:ce.union([ce.string(),ce.undefined(),ce.null()]),color100:ce.union([ce.string(),ce.undefined(),ce.null()]),logo_marjane:dh.types.relations.image,landing_image:dh.types.relations.image}).merge(dh.types.relations.translations(ce.object({image:dh.types.relations.image,titre:ce.string().nullable(),text:ce.string().nullable(),button_label:ce.string().nullable(),banniere_home_page:dh.types.relations.image,landing_image:dh.types.relations.image,banner_button_label:ce.string().nullable()}))),Rf=ce.object({id:ce.number(),titre:ce.string().nullable(),heure_debut:ce.number().nullable(),heure_fin:ce.number().nullable(),image:dh.types.relations.image}).merge(dh.types.relations.translations(ce.object({image:dh.types.relations.image}))),Af=ce.object({data:ce.object({id:ce.number(),maintenance:dh.types.base.boolean,titre_maintenance:ce.string().nullable(),texte_maintenance:ce.string().nullable(),marjane_solidaire_faire_un_don:dh.types.base.boolean,titre_mes_promotions:ce.string(),titre_produits_preferes:ce.string(),titre_top_ventes:ce.string(),bouton_top_ventes:ce.string(),bouton_top_promotions:ce.string(),bouton_produits_preferes:ce.string(),listes_configurables:ce.array(ce.object({liste_configurable_id:ce.object({id:ce.number().nullable(),identifiant:ce.string().nullable(),titre:ce.string().optional().nullable(),bandeau_cms:dh.types.relations.nullable(df),lien_site:ce.union([ce.string(),ce.undefined(),ce.null()]),status:dh.types.base.status})})),tags:dh.types.relations.nullableArray(Rf),configuration_accueil_mobile:dh.types.relations.nullableArray(Tf),configuration_accueil_mobile_v2:dh.types.relations.nullable(wf),configuration_accueil_site_v2:dh.types.relations.nullable(If),configuration_accueil_site:dh.types.relations.nullableArray(Pf),evenement_actuel:dh.types.relations.nullable(Nf),titre_page_creation_compte:ce.string(),image_page_creation_compte:dh.types.relations.image,image_marjane_fidelite:dh.types.relations.image,image_carte_fidelite:dh.types.relations.image,couleur_fidelite:ce.string(),label_bouton_fidelite:ce.string(),landing_image:dh.types.relations.image,sav_banner_image:dh.types.relations.image,luckycart_period_start:ce.string().nullable(),luckycart_period_end:ce.string().nullable(),menu_principal:ce.number().nullable(),menu_corporate:ce.number().nullable(),footer:ce.number().nullable(),footer_texte:ce.string().nullable(),marjane_home_titre:ce.string().nullable(),marjane_market_home_titre:ce.string().nullable(),marjane_home_page:ce.number().nullable(),marjane_market_home_page:ce.number().nullable(),menu_offres:ce.number().nullable(),menu_offres_marjane:ce.number().nullable(),menu_offres_market:ce.number().nullable(),libelle_site:ce.string().nullable(),premiere_page_catalogue:ce.number().nullable(),premiere_page_electromenagers:ce.number().nullable(),premiere_page_bts:ce.number().nullable()}).merge(dh.types.relations.translations(ce.object({titre_top_ventes:ce.string().nullable(),bouton_top_ventes:ce.string().nullable(),titre_mes_promotions:ce.string().nullable(),bouton_top_promotions:ce.string().nullable(),titre_produits_preferes:ce.string().nullable(),bouton_produits_preferes:ce.string().nullable(),titre_page_creation_compte:ce.string().nullable(),image_page_creation_compte:dh.types.relations.image,image_carte_fidelite:dh.types.relations.image,label_bouton_fidelite:ce.string().nullable(),landing_image:dh.types.relations.image,sav_banner_image:dh.types.relations.image}))).partial()});var Df;!function(t){t.blockMobileV1Part=Tf,t.blockMobileV2Part=vf,t.baseBlockPart=Of,t.bandeauPart=df,t.carouselMobilePart=bf,t.carouselWebsitePart=Sf,t.eventPart=Nf,t.tagPart=Rf}(Df||(Df={}));const Lf=Af,Mf={id:!0,marjane_solidaire_faire_un_don:!0,listes_configurables:{liste_configurable_id:{"*":!0,bandeau_cms:{"*":!0}}},tags:{"*":!0},configuration_accueil_mobile_v2:{"*":!0,header_cards:{header_cards_id:{"*":{"*":!0}}},layers:{configuration_accueil_mobile_row_id:{"*":{"*":!0},multi_bandeau:{bandeau_cms_id:{"*":!0}}}},carousel_mobile:{carousel_mobile_id:{"*":!0,video:{"*":!0},translations:{"*":!0}}}},configuration_accueil_site_v2:{"*":!0,layers:{configuration_accueil_site_row_id:{"*":{"*":!0}}},bandeau_initial:{"*":!0},carousel_site:{carousel_site_id:{"*":!0,translations:{"*":!0}}}},evenement_actuel:{"*":!0,translations:{"*":!0}},titre_page_creation_compte:!0,image_page_creation_compte:!0,image_marjane_fidelite:!0,image_carte_fidelite:!0,couleur_fidelite:!0,label_bouton_fidelite:!0,landing_image:!0,sav_banner_image:!0,luckycart_period_start:!0,luckycart_period_end:!0,translations:{"*":!0}},kf=Ia(vh.settings,{},{apiName:"directus",schemas:{queries:dh.query.queries,defaultResBody:Lf}});var jf=Object.freeze({__proto__:null,get Parts(){return Df},settingsOut:Lf,get:async(t,e=Mf)=>{const n=dh.query.formatQueryFields(e),r=await kf({queries:{fields:n}}),i=r.data.data,o=i.configuration_accueil_mobile_v2?.header_cards?.map((t=>t.header_cards_id))?.map((e=>dh.translation.translateContent({translations:[],...e},t,[["title","title"],["image","image"]]))),s=i.configuration_accueil_site_v2?.layers?.map((t=>t.configuration_accueil_site_row_id)),a=i.configuration_accueil_site_v2?.carousel_site?.map((t=>t.carousel_site_id)),u=i.configuration_accueil_mobile_v2?.layers?.map((t=>t.configuration_accueil_mobile_row_id)).map((e=>{if(!e)return e;if("achats-frequents"===e.type||"catalogues"===e.type||"courses-en-ligne"===e.type||"liste-configurable"===e.type||"non-alimentaire"===e.type||"top-promotions"===e.type||"top-ventes"===e.type){const n=dh.translation.translateContent({translations:e.titre_translations??[],...e},t,[["titre","titre"]]).titre,r=dh.translation.translateContent({translations:e.bouton_voir_tout_translations??[],...e},t,[["bouton_voir_tout","bouton_voir_tout"]]).bouton_voir_tout;return{...e,titre:n,bouton_voir_tout:r}}if("commander-a-nouveau"===e.type||"commandes-en-cours"===e.type){const n=dh.translation.translateContent({translations:e.titre_translations??[],...e},t,[["titre","titre"]]).titre;return{...e,titre:n}}if("bandeau-cms"===e.type){const n=dh.translation.translateContent({translations:[],...e.bandeau},t,[["contenu","contenu"]]);return{...e,bandeau:{...e.bandeau,...n}}}return"multi-bandeau-cms"===e.type?{...e,multi_bandeau:e.multi_bandeau?.map((t=>t.bandeau_cms_id))?.map((e=>{const n=dh.translation.translateContent({translations:[],...e},t,[["contenu","contenu"]]);return{...e,...n}}))}:void 0})),c=i.configuration_accueil_mobile_v2?.carousel_mobile?.map((t=>t.carousel_mobile_id)).map((e=>dh.translation.translateContent({translations:[],...e},t,[["image","image"]]))),l=i.configuration_accueil_mobile?.map((e=>{if("top_promotions"===e.type||"top_ventes"===e.type||"achats_frequents"===e.type||"liste_configurable"===e.type||"produits_electromenagers"===e.type)return dh.translation.translateContent({translations:[],...e},t,[["titre_liste","titre_liste"],["bouton_voir_tout","bouton_voir_tout"]]);if("bandeau"===e.type&&e.bandeau_cms){const n=dh.translation.translateContent({translations:[],...e.bandeau_cms},t,[["contenu","contenu"]]);return{...e,bandeau_cms:{...e.bandeau_cms,...n}}}return e})),h={...dh.translation.translateContent({translations:[],...i},t,[["titre_top_ventes","titre_top_ventes"],["bouton_top_ventes","bouton_top_ventes"],["titre_mes_promotions","titre_mes_promotions"],["bouton_top_promotions","bouton_top_promotions"],["titre_produits_preferes","titre_produits_preferes"],["bouton_produits_preferes","bouton_produits_preferes"],["titre_page_creation_compte","titre_page_creation_compte"],["image_page_creation_compte","image_page_creation_compte"],["image_carte_fidelite","image_carte_fidelite"],["label_bouton_fidelite","label_bouton_fidelite"],["landing_image","landing_image"],["sav_banner_image","sav_banner_image"]]),evenement_actuel:i.evenement_actuel?dh.translation.translateContent({translations:[],...i.evenement_actuel},t,[["titre","titre"],["text","text"],["image","image"],["button_label","button_label"],["banner_button_label","banner_button_label"],["banniere_home_page","banniere_home_page"]]):null,tags:i.tags?.map((e=>dh.translation.translateContent({translations:[],...e},t,[["image","image"]]))),configuration_accueil_mobile:l,configuration_accueil_site_v2:{...i.configuration_accueil_site_v2,layers:s,carousel_website:a},configuration_accueil_mobile_v2:{...i.configuration_accueil_mobile_v2,header_cards:o,layers:u,carousel_mobile:c}};return{...r,data:{data:h}}}}),Ff=Object.freeze({__proto__:null,advantages:Eh,catalogs:Lh,pages:Pp,settings:jf,product:Mp,article:Th,recipe:$p,menu:mp,footer:rp,homeSlider:cp,faq:Yh,coupons:qh,sectorM:ff});const Bf=ce.object({id:ce.number(),data:ce.union([ce.null(),_u,sc])}).nullable(),qf=ce.array(Bf),Uf=ce.array(Bf),$f="experience",zf=Cu.pick({"entity[LEX]":!0,"entity[STD]":!0,selected_mode:!0}),Gf=ya.join($f,"home"),Vf=Ia(ya.join(Gf,"mobile"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:qf}}),Yf=Ia(ya.join(Gf,"mobile/public"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:qf}}),Zf=Ia(ya.join(Gf,"mobile/private"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:qf}}),Hf=Ia(ya.join(Gf,"mobile/v2/public"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:qf}}),Xf=Ia(ya.join(Gf,"mobile/v2/private"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:qf}}),Wf=Ia(ya.join(Gf,"website/v2/public"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:Uf}}),Kf=Ia(ya.join(Gf,"website/v2/private"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:Uf}}),Qf=Ia(ya.join(Gf,"website"),{},{apiName:"coral",schemas:{queries:zf,defaultResBody:Uf}});var Jf=Object.freeze({__proto__:null,mobileHomeOut:qf,websiteHomeOut:Uf,queryMobile:Vf,queryMobilePublic:Yf,queryMobilePrivate:Zf,queryMobilePublicV2:Hf,queryMobilePrivateV2:Xf,queryWebsitePublicV2:Wf,queryWebsitePrivateV2:Kf,queryWebsite:Qf});const td=ce.object({id:ce.number(),product_count:ce.number().nullable(),data:sc.nullable()}),ed=ce.array(td);var nd;!function(t){t.promotionBlock=td}(nd||(nd={}));const rd=Cu.pick({"entity[LEX]":!0,"entity[STD]":!0,selected_mode:!0,brand:!0,tags:!0,is_pot_amount:!0}).extend({page:ce.number().optional(),page_size:ce.number().optional()}),id=ya.join($f,"promotions"),od=Ia(ya.join(id,":area"),{},{apiName:"coral",schemas:{params:Ou,queries:rd,defaultResBody:ed}});var sd=Object.freeze({__proto__:null,promotionStartPageOut:ed,get Parts(){return nd},queryStartPage:od}),ad=Object.freeze({__proto__:null,home:Jf,promotion:sd});const ud=ce.object({routes:ce.array(ce.object({legs:ce.array(ce.object({steps:ce.array(ce.object({distance:ce.object({text:ce.string(),value:ce.number()}),duration:ce.object({text:ce.string(),value:ce.number()}),start_location:ce.object({lat:ce.number(),lng:ce.number()}),end_location:ce.object({lat:ce.number(),lng:ce.number()}),polyline:ce.object({points:ce.string()}),travel_mode:ce.string()}))})),overview_polyline:ce.object({points:ce.string()}),summary:ce.string()}))}),cd=Ia("/directions/json",{},{apiName:"geo",schemas:{queries:ce.object({origin:ce.string(),destination:ce.string(),waypoints:ce.string(),mode:ce.nativeEnum({driving:"driving",walking:"walking",bicycling:"bicycling",transit:"transit"})}).partial().optional(),defaultResBody:ud}});var ld=Object.freeze({__proto__:null,get:cd,routeOut:ud}),hd=Object.freeze({__proto__:null,route:ld});const pd=ce.object({id:ce.number(),uuid:ce.string(),price_ht:ce.number().nullable(),price_ttc:ce.number(),vat_rate:ce.string(),is_default:ce.boolean(),price_level:ce.string()}),fd=ce.object({id:ce.number(),uuid:ce.string(),label:ce.string()}),dd=ce.object({id:ce.number(),uuid:ce.string(),default_label:ce.string(),type:ce.nativeEnum({LEX:"LEX",STD:"STD"}),products_count:ce.number()}),gd=ce.object({});gd.extend({});const yd=gd.extend({id:ce.number(),uuid:ce.string(),default_label:ce.string(),description:ce.string(),status:ce.union([ce.nativeEnum({VALIDATED:"validated"}),ce.string()]),default_picture:ce.string().nullable(),thumbnail_picture:ce.string(),brand:ce.array(fd),tags:ce.array(dd),division:ce.object({id:ce.number(),default_label:ce.string()}),prices:ce.array(pd),weight:ce.number(),stock:ce.object({enabled:ce.boolean(),quantity:ce.number()}),rewards:ce.object({pot_amount:ce.union([ce.number(),ce.string(),ce.null()]),new_price:ce.number().nullable().optional()}),to_sell:ce.boolean(),enabled_in_entity:ce.boolean(),category_enabled_in_entity:ce.boolean()}),md={OPEN_PENDING:"STATUS_OPEN_PENDING",FINISHED:"STATUS_FINISHED",VALIDATED:"STATUS_VALIDATED",PREPARING:"STATUS_PREPARING",READY:"STATUS_READY",DELIVERING:"STATUS_DELIVERING",DELIVERED:"STATUS_DELIVERED",CANCELLED:"STATUS_CANCELLED",ERROR:"STATUS_ERROR",ERROR_PAYMENT:"STATUS_ERROR_PAYMENT",REFUSED:"STATUS_REFUSED"},_d={CREATED:"STATE_CREATED",SUBSTITUTED:"STATE_SUBSTITUTED",SUBSTITUTE:"STATE_SUBSTITUTE",MISSING:"STATE_OUT_OF_STOCK",CANCELLED:"STATE_CANCELLED",DELIVERED:"STATE_DELIVERED"},vd={clickAndCollect:"CLICK_AND_COLLECT",delivery:"DELIVERY",deliveryExpress:"DELIVERY_EXPRESS",deliverySapress:"DELIVERY_SAPRESS",deliverySuperExpress:"DELIVERY_SUPER_EXPRESS"},bd=ce.object({serial_number:ce.string().nullable(),price:ce.number(),new_price:ce.number().nullable(),quantity:ce.number()}),wd=bd.extend({product:ce.object({id:ce.number()})}),Ed=bd.extend({uuid:ce.string(),preparation_state:ce.nativeEnum(_d),original_quantity:ce.number(),forced_price:ce.boolean(),is_discount:ce.boolean(),product:yd.pick({id:!0,uuid:!0,default_label:!0,default_picture:!0,rewards:!0})}),xd=ce.discriminatedUnion("is_discount",[Ed.extend({is_discount:ce.literal(!1)}),Ed.extend({is_discount:ce.literal(!0)}).omit({product:!0})]),Sd=ce.object({status:ce.object({code:ce.nativeEnum(md)}),entity:ce.object({id:ce.number(),label:ce.string()}),destination:ce.object({code:ce.nativeEnum(vd)}),payment_method:ce.string(),delivery_address:la.pick({id:!0,address_inline:!0,latitude:!0,longitude:!0})}),Id=Sd.extend({content:ce.array(wd),cmi_card:ce.object({uuid:ce.string()}).nullable()}).partial(),Cd=Sd.extend({id:ce.number(),uuid:ce.string(),reference:ce.string(),barcode:ce.string(),total:ce.number(),sub_total:ce.number(),product_count:ce.number(),distance:ce.number().nullable(),due_date:ce.string(),due_date_start:ce.string(),created_at:ce.string(),updated_at:ce.string().optional(),content:ce.array(xd),cmi_card:ce.object({uuid:ce.string(),expired:ce.boolean(),holder_name:ce.string(),masked_credit_card:ce.string(),type:ce.number()}).nullable().optional(),pot_payment:ce.number(),pot_reward:ce.union([ce.array(ce.void()),ce.undefined(),ce.null(),ce.object({amount:ce.number(),label:ce.string().optional()})]),invoices:ce.array(ce.object({id:ce.number()})),discounts:ce.array(ce.object({uuid:ce.string(),amount:ce.number(),is_basket_impacted:ce.boolean(),discount:ce.object({default_label:ce.string()})})),fees:ce.array(ce.object({type:ce.string(),label:ce.string(),value:ce.number(),enabled:ce.boolean(),discount_value:ce.number().optional(),discount_label:ce.string().optional()})),carrier:ce.object({reference:ce.string(),label:ce.string(),logo:ce.string().nullable(),active:ce.boolean(),phone:ce.string()}).optional()}),Od=Cd.extend({product_count:ce.void(),delivery_address:la.pick({address_inline:!0})}),Td=ce.array(Cd.omit({content:!0,discounts:!0,updated_at:!0})),Pd=ce.object({id:ce.string(),reference:ce.string(),range:ce.string(),search:ce.string(),date_from:ce.string(),entity:ce.array(ce.string()),customer:ce.array(ce.string()),status:ce.array(ce.nativeEnum(md)),sort:ce.record(ce.string())}).partial().optional(),Nd="/customers/services/documents/order",Rd=Ia(Nd,{},{apiName:"wynd",schemas:{queries:Pd,defaultResBody:Td}}),Ad=Ia(`${Nd}/:uuid`,{},{apiName:"wynd",schemas:{queries:Pd,params:ce.object({uuid:ce.string()}),defaultResBody:Cd}}),Dd=Ia(`${Nd}/:uuid`,{method:"PUT"},{apiName:"wynd",schemas:{params:ce.object({uuid:ce.string()}),defaultReqBody:Id,defaultResBody:Od}});var Ld=Object.freeze({__proto__:null,StatusCode:md,ItemPreparationState:_d,DestinationCode:vd,itemIn:wd,itemOut:xd,orderIn:Id,orderOut:Cd,orderUpdatedOut:Od,ordersOut:Td,query:Rd,get:Ad,update:Dd,queryParams:Pd});const Md={MARJANE:"MARJANE",MARJANE_MARKET:"MARJANE_MARKET"},kd=ce.object({id:ce.number(),uuid:ce.string(),label:ce.string(),code:ce.nativeEnum(vd),is_active:ce.boolean(),is_shippable:ce.boolean()}),jd=ce.object({}),Fd=jd.extend({}),Bd=jd.extend({id:ce.number(),uuid:ce.string(),name:ce.string(),label:ce.string(),entity_address:la,photo:ce.string().nullable(),logo:ce.string().nullable(),longitude:ce.string(),latitude:ce.string(),marjane_type:ce.nativeEnum(Md),type:ce.string(),opening_hours:ce.string(),is_active:ce.boolean(),is_visible:ce.boolean(),destinations:ce.array(kd)}),qd=Ia("/shopping/entities/:id",{},{apiName:"wynd",schemas:{params:ce.object({id:ce.number()}),defaultResBody:Bd}});var Ud=Object.freeze({__proto__:null,get:qd,MarjaneType:Md,destination:kd,shopIn:Fd,shopOut:Bd});const $d=ce.coerce.date(),zd=Ia(ya.join("utils","time"),{method:"GET"},{apiName:"coral",schemas:{defaultResBody:$d}});var Gd=Object.freeze({__proto__:null,timeOut:$d,getMoroccoTime:zd}),Vd=Object.freeze({__proto__:null,time:Gd}),Yd=Object.freeze({__proto__:null,address:ha,analytics:lu,carrier:gu,catalog:Ec,city:Ac,cmi:jc,cms:$c,customer:Hc,customerService:ph,directus:Ff,experience:ad,geo:hd,order:Ld,shop:Ud,utils:Vd});const Zd=ce.object({latitude:ce.string(),longitude:ce.string(),timestamp:ce.string(),acceleration:ce.string(),vitesse_acceleration:ce.string(),vitesse_gps:ce.string()}),Hd={PositionChanged:Zd},Xd={},Wd=(t,e)=>async(n={})=>{const r=_a.get(),{url:i,socketer:o}=r[e.apiName];if(!i)throw new Error(`Unable to connect to the "${e.apiName}" WebSocket. No API url set.`);const s=await o({url:i,path:t,...n});return{...s,on:(t,n)=>{s.on(t,(r=>{n(((t,e,n)=>{const r=t.schemas.serverToClientEvents?.[e];return r&&(n=r.parse(n)),n})(e,t,r))}))},emit:(t,n)=>{s.emit(t,((t,e,n)=>{const r=t.schemas.clientToServerEvents?.[e];return r&&(n=r.parse(n)),n})(e,t,n))},close:()=>{s.close()}}},Kd=Wd("/Tracking",{apiName:"carrier",schemas:{serverToClientEvents:Hd,clientToServerEvents:Xd}}),Qd={PROVIDER_LOCATION_CHANGED:hu},Jd={SUBSCRIBE_TO_PROVIDER:ce.object({id:ce.string()}),UNSUBSCRIBE_FROM_PROVIDER:ce.object({id:ce.string()})},tg=Wd("/api/v1/socketspartners/connect",{apiName:"kaalix",schemas:{serverToClientEvents:Qd,clientToServerEvents:Jd}});var eg,ng,rg,ig,og,sg,ag=Object.freeze({__proto__:null,carrierLocationOut:Zd,carrierServerToClientEvents:Hd,carrierClientToServerEvents:Xd,carrier:Kd,kaalixServerToClientEvents:Qd,kaalixClientToServerEvents:Jd,kaalix:tg});!function(t){t.sleep=t=>new Promise((e=>setTimeout(e,t))),t.isThenable=t=>t instanceof Promise||Boolean(t&&"object"==typeof t&&"then"in t),t.toSettledPromise=async e=>{if(!t.isThenable(e))return{status:"fulfilled",value:e};try{return{status:"fulfilled",value:await e}}catch(t){return{status:"rejected",reason:t}}},t.allSettled=e=>Promise.all(Array.from(e).map(t.toSettledPromise))}(eg||(eg={})),function(t){t.add=async t=>{},t.remove=async t=>{},t.checkout=async t=>{await eg.allSettled([])}}(ng||(ng={})),function(t){t.click=async()=>{}}(rg||(rg={})),function(t){t.Type={HOME:"homepage",CATEGORY:"category",PRODUCT:"product",CART:"cart",CHECKOUT:"checkout"},t.view=async t=>{await eg.allSettled([])}}(ig||(ig={})),function(t){t.add=()=>{},t.remove=()=>{}}(og||(og={})),function(t){t.open=async()=>{await eg.allSettled([Na({body:{type:Ca.STOREFRONT_OPEN,payload:{}}})])},t.close=async()=>{},t.focus=async()=>{},t.unfocus=async()=>{}}(sg||(sg={}));var ug,cg=Object.freeze({__proto__:null,get cart(){return ng},get product(){return rg},get screen(){return ig},get shoppingList(){return og},get storefront(){return sg}}),lg=Object.freeze({__proto__:null,events:cg});!function(t){t.linear="linear",t.easeInOutCubic="easeInOutCubic"}(ug||(ug={}));var hg=Object.freeze({__proto__:null,get EasingName(){return ug},linear:t=>t,easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2});var pg;!function(t){t.not=t=>(...e)=>!t(...e)}(pg||(pg={}));const fg={units:"kilometers"},dg=(t,e,n={})=>(n={...fg,...n},oi(jr(t),jr(e),{units:n?.units})),gg=t=>[parseFloat(t.lng.toString()),parseFloat(t.lat.toString())],yg=t=>[parseFloat(t.longitude.toString()),parseFloat(t.latitude.toString())],mg=t=>t&&0!==t[0]&&0!==t[1],_g=(t,e)=>t[0]===e[0]&&t[1]===e[1],vg=(t,e)=>di(e,t).geometry.coordinates,bg=t=>t.reduce(((t,e)=>{const n=t[t.length-1];return n&&n[0]===e[0]&&n[1]===e[1]?t:[...t,e]}),[]);var wg=Object.freeze({__proto__:null,getRouteWaypoints:async t=>Br(await(async t=>{const e=[...t.from].reverse().join(","),n=[...t.to].reverse().join(","),r=t.waypoints?.map((t=>[...t].reverse().join(","))).join("|"),{data:i}=await cd({queries:{origin:e,destination:n,waypoints:r}});if(!i.routes.length)return[];const o=i.routes[0].legs[0].steps.map((t=>xg.decode(t.polyline.points,yg))).flat();return bg(o)})({from:t.departure,to:t.arrival,waypoints:t.waypoints})),nearestPointOnRoute:vg,removeDuplicatePoints:bg,nearestWaypointOnRoute:(t,e)=>{const n=Array.from(e.geometry.coordinates),r=vg(t,e);return n.sort(((t,e)=>dg(t,r)-dg(e,r))),n[0]},isPointAheadOfWaypoint:(t,e,n)=>{const r=n.geometry.coordinates,i=r[r.length-1];return wo(mi(e,i,n),jr(t))},disolveRoute:(t,e,n={})=>{const r=t.geometry.coordinates,i=[];for(;r.length>1;){const t=[],o=[];for(const[i,s]of r.entries()){const a=r[i+1];if(!a){o.length>0?o.push(s):t.push(s);break}const u=dg(s,a,n)>=e;if(u&&o.length>0){o.push(s);break}u?t.push(s):o.push(s)}if(r.splice(0,t.length+o.length),i.push(...t),!o.length)break;const s=Br(o),a=yi(s,n),u=Math.max(1,Math.floor(a/e));i.push(o[0]);for(let t=0;t<u;t++){const e=gi(s,(t+1)*(a/u),n);i.push(e.geometry.coordinates)}}return Br(i)},distance:dg,distanceFollowingRoute:(t,e,n={})=>{n={...fg,...n};const{coordinates:r}=t.geometry;if(!e.from&&!e.to)return yi(t,n);e.from||(e.from=r[0]),e.to||(e.to=r[r.length-1]);return yi(mi(jr(e.from),jr(e.to),t),n)},boundingBox:t=>Jr(Br(t)),positionToLatLng:t=>({lat:t[1],lng:t[0]}),latLngToPosition:gg,positionToFulLatLng:t=>({latitude:t[1],longitude:t[0]}),fullLatLngToPosition:yg,latLngToFullLatLng:t=>({latitude:parseFloat(t.lat.toString()),longitude:parseFloat(t.lng.toString())}),fullLatLngToLatLng:t=>({lat:parseFloat(t.latitude.toString()),lng:parseFloat(t.longitude.toString())}),isValidPosition:mg,isValidLatLng:t=>mg(gg(t)),isValidFullLatLng:t=>mg(yg(t)),isPositionEqual:_g,isLatLngEqual:(t,e)=>_g(gg(t),gg(e)),isFullLatLngEqual:(t,e)=>_g(yg(t),yg(e))});const Eg=t=>t,xg={decode:(t,e=Eg)=>{const n=[];let r=0,i=t.length,o=0,s=0;for(;r<i;){let i,a=0,u=0;do{i=t.charAt(r++).charCodeAt(0)-63,u|=(31&i)<<a,a+=5}while(i>=32);o+=0!=(1&u)?~(u>>1):u>>1,a=0,u=0;do{i=t.charAt(r++).charCodeAt(0)-63,u|=(31&i)<<a,a+=5}while(i>=32);s+=0!=(1&u)?~(u>>1):u>>1,n.push(e({latitude:o/1e5,longitude:s/1e5}))}return n}};var Sg;!function(t){t.parseContentRange=(t,e="content-range")=>{const n=t.get(e)?.split(/-|\//).map(Number);if(3!==n?.length||n.some(isNaN))return{page:0,pageLength:0,count:0};const[r,i,o]=n;return{page:r,pageLength:i,count:o}}}(Sg||(Sg={}));class Ig{constructor(t){this.logEvent=async(...t)=>{if(this.config.shopperId)return(t=>async(e,n,r={})=>{await Ba({signal:r.signal,body:{siteKey:t.siteKey,shopperId:t.shopperId,eventName:e,payload:n}})})(this.config)(...t);ga.warn("Luckycart shopperId not set. Cannot log event",{params:t})},this.getExperiences=(...t)=>(t=>async(e,n={})=>{const{data:r}=await Ha({signal:n.signal,queries:{siteKey:t.siteKey,shopperId:t.shopperId,experienceType:e}});return r})(this.config)(...t),this.getGameExperiences=(...t)=>(t=>async(e={})=>{const{data:n}=await Ja({signal:e.signal,queries:{siteKey:t.siteKey,shopperId:t.shopperId}});return n})(this.config)(...t),this.getResource=(...t)=>(t=>async(e,n={})=>{const{data:r}=await su({signal:n.signal,params:{siteKey:t.siteKey,shopperId:t.shopperId,subset:e.subset,format:e.format,pageType:e.pageType},queries:{pageId:e.pageId,store:e.store,storeType:e.storeType}});return r})(this.config)(...t),this.config=t}get config(){return this._config}set config(t){this._config={...this.config,...t},this.config.shopperId&&(this._config.shopperId=this.config.shopperId.padStart(6,"0"))}}!function(t){t.EventName=Da,t.PageType=La,t.ExperienceType=Ua,t.Subset=za,t.Format=$a,t.createSyncedClient=()=>{const e=t=>({shopperId:t.coral.session?.userID?.toString()??"",siteKey:t.luckycart.siteKey??""}),n=e(_a.get()),r=new t(n),i=_a.subscribe((t=>{r.config=e(t)}));return{client:r,unsubscribe:i}},t.createCloggedClient=()=>{const{client:e,unsubscribe:n}=t.createSyncedClient(),r=e.logEvent;return e.logEvent=async(...t)=>{const{periodStart:e,periodEnd:n}=_a.get().luckycart;if(!e||!n)return void ga.warn("Luckycart periodStart/periodEnd not set. Clogging events",{params:t});const i=new Date,o=new Date(e),s=new Date(n);if(!(i<o||i>s))return r(...t);ga.warn("Luckycart outside of periodStart/periodEnd. Clogging events",{params:t,periodStart:e,periodEnd:n})},{client:e,unsubscribe:n}}}(Ig||(Ig={}))},35778:function(t,e,n){"use strict";n.d(e,{Dp:function(){return r.Dp},cp:function(){return r.cp},uZ:function(){return r.uZ}});var r=n(89394)},49748:function(t,e,n){"use strict";n.d(e,{gx:function(){return Ht},gm:function(){return Qt},O8:function(){return te},vZ:function(){return ue},ZT:function(){return Lt},$0:function(){return kt},VU:function(){return Yt}});var r=n(67294),i=n(93649),o=n(31548),s=n(89394),a=n(52798);const u="undefined"==typeof window||"Deno"in window;function c(){}function l(t){return"number"==typeof t&&t>=0&&t!==1/0}function h(t,e){return Math.max(t+(e||0)-Date.now(),0)}function p(t,e,n){return I(t)?"function"==typeof e?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function f(t,e,n){return I(t)?[{...e,queryKey:t},n]:[t||{},e]}function d(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(I(s))if(r){if(e.queryHash!==y(s,e.options))return!1}else if(!_(e.queryKey,s))return!1;if("all"!==n){const t=e.isActive();if("active"===n&&!t)return!1;if("inactive"===n&&t)return!1}return("boolean"!=typeof a||e.isStale()===a)&&((void 0===i||i===e.state.fetchStatus)&&!(o&&!o(e)))}function g(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:o}=t;if(I(o)){if(!e.options.mutationKey)return!1;if(n){if(m(e.options.mutationKey)!==m(o))return!1}else if(!_(e.options.mutationKey,o))return!1}return("boolean"!=typeof r||"loading"===e.state.status===r)&&!(i&&!i(e))}function y(t,e){return((null==e?void 0:e.queryKeyHashFn)||m)(t)}function m(t){return JSON.stringify(t,((t,e)=>x(e)?Object.keys(e).sort().reduce(((t,n)=>(t[n]=e[n],t)),{}):e))}function _(t,e){return v(t,e)}function v(t,e){return t===e||typeof t==typeof e&&(!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some((n=>!v(t[n],e[n]))))}function b(t,e){if(t===e)return t;const n=E(t)&&E(e);if(n||x(t)&&x(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),o=i.length,s=n?[]:{};let a=0;for(let r=0;r<o;r++){const o=n?r:i[r];s[o]=b(t[o],e[o]),s[o]===t[o]&&a++}return r===o&&a===r?t:s}return e}function w(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function E(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function x(t){if(!S(t))return!1;const e=t.constructor;if(void 0===e)return!0;const n=e.prototype;return!!S(n)&&!!n.hasOwnProperty("isPrototypeOf")}function S(t){return"[object Object]"===Object.prototype.toString.call(t)}function I(t){return Array.isArray(t)}function C(t){return new Promise((e=>{setTimeout(e,t)}))}function O(t){C(0).then(t)}function T(t,e,n){return null!=n.isDataEqual&&n.isDataEqual(t,e)?t:"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?b(t,e):e}const P=console;const N=function(){let t=[],e=0,n=t=>{t()},r=t=>{t()};const i=r=>{e?t.push(r):O((()=>{n(r)}))},o=()=>{const e=t;t=[],e.length&&O((()=>{r((()=>{e.forEach((t=>{n(t)}))}))}))};return{batch:t=>{let n;e++;try{n=t()}finally{e--,e||o()}return n},batchCalls:t=>(...e)=>{i((()=>{t(...e)}))},schedule:i,setNotifyFunction:t=>{n=t},setBatchNotifyFunction:t=>{r=t}}}();class R{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const e={listener:t};return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const A=new class extends R{constructor(){super(),this.setup=t=>{if(!u&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),()=>{window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach((({listener:t})=>{t()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},D=["online","offline"];const L=new class extends R{constructor(){super(),this.setup=t=>{if(!u&&window.addEventListener){const e=()=>t();return D.forEach((t=>{window.addEventListener(t,e,!1)})),()=>{D.forEach((t=>{window.removeEventListener(t,e)}))}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setOnline(t):this.onOnline()}))}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach((({listener:t})=>{t()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};function M(t){return Math.min(1e3*2**t,3e4)}function k(t){return"online"!==(null!=t?t:"online")||L.isOnline()}class j{constructor(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}}function F(t){return t instanceof j}function B(t){let e,n,r,i=!1,o=0,s=!1;const a=new Promise(((t,e)=>{n=t,r=e})),u=()=>!A.isFocused()||"always"!==t.networkMode&&!L.isOnline(),c=r=>{s||(s=!0,null==t.onSuccess||t.onSuccess(r),null==e||e(),n(r))},l=n=>{s||(s=!0,null==t.onError||t.onError(n),null==e||e(),r(n))},h=()=>new Promise((n=>{e=t=>{const e=s||!u();return e&&n(t),e},null==t.onPause||t.onPause()})).then((()=>{e=void 0,s||null==t.onContinue||t.onContinue()})),p=()=>{if(s)return;let e;try{e=t.fn()}catch(t){e=Promise.reject(t)}Promise.resolve(e).then(c).catch((e=>{var n,r;if(s)return;const a=null!=(n=t.retry)?n:3,c=null!=(r=t.retryDelay)?r:M,f="function"==typeof c?c(o,e):c,d=!0===a||"number"==typeof a&&o<a||"function"==typeof a&&a(o,e);!i&&d?(o++,null==t.onFail||t.onFail(o,e),C(f).then((()=>{if(u())return h()})).then((()=>{i?l(e):p()}))):l(e)}))};return k(t.networkMode)?p():h().then(p),{promise:a,cancel:e=>{s||(l(new j(e)),null==t.abort||t.abort())},continue:()=>(null==e?void 0:e())?a:Promise.resolve(),cancelRetry:()=>{i=!0},continueRetry:()=>{i=!1}}}class q{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),l(this.cacheTime)&&(this.gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:u?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class U extends q{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||P,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==e,r=n?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(t,e){const n=T(this.state.data,t,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),n}setState(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})}cancel(t){var e;const n=this.promise;return null==(e=this.retryer)||e.cancel(t),n?n.then(c).catch(c):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((t=>!1!==t.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((t=>t.getCurrentResult().isStale))}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!h(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find((t=>t.shouldFetchOnWindowFocus()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}onOnline(){var t;const e=this.observers.find((t=>t.shouldFetchOnReconnect()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter((e=>e!==t)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,e){var n,r;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=e&&e.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find((t=>t.options.queryFn));t&&this.setOptions(t.options)}const o=function(){if("function"==typeof AbortController)return new AbortController}(),s={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};a(s);const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(s)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};var c;(a(u),null==(n=this.options.behavior)||n.onFetch(u),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(r=u.fetchOptions)?void 0:r.meta))&&this.dispatch({type:"fetch",meta:null==(c=u.fetchOptions)?void 0:c.meta});const l=t=>{var e,n,r,i;(F(t)&&t.silent||this.dispatch({type:"error",error:t}),F(t))||(null==(e=(n=this.cache.config).onError)||e.call(n,t,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,this.state.data,t,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=B({fn:u.fetchFn,abort:null==o?void 0:o.abort.bind(o),onSuccess:t=>{var e,n,r,i;void 0!==t?(this.setData(t),null==(e=(n=this.cache.config).onSuccess)||e.call(n,t,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,t,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):l(new Error(this.queryHash+" data is undefined"))},onError:l,onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){this.state=(e=>{var n,r;switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=t.meta)?n:null,fetchStatus:k(this.options.networkMode)?"fetching":"paused",...!e.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(r=t.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return F(i)&&i.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),N.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate(t)})),this.cache.notify({query:this,type:"updated",action:t})}))}}class $ extends R{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,e,n){var r;const i=e.queryKey,o=null!=(r=e.queryHash)?r:y(i,e);let s=this.get(o);return s||(s=new U({cache:this,logger:t.getLogger(),queryKey:i,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const e=this.queriesMap[t.queryHash];e&&(t.destroy(),this.queries=this.queries.filter((e=>e!==t)),e===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){N.batch((()=>{this.queries.forEach((t=>{this.remove(t)}))}))}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,e){const[n]=f(t,e);return void 0===n.exact&&(n.exact=!0),this.queries.find((t=>d(n,t)))}findAll(t,e){const[n]=f(t,e);return Object.keys(n).length>0?this.queries.filter((t=>d(n,t))):this.queries}notify(t){N.batch((()=>{this.listeners.forEach((({listener:e})=>{e(t)}))}))}onFocus(){N.batch((()=>{this.queries.forEach((t=>{t.onFocus()}))}))}onOnline(){N.batch((()=>{this.queries.forEach((t=>{t.onOnline()}))}))}}class z extends q{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||P,this.observers=[],this.state=t.state||G(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter((e=>e!==t)),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){const t=()=>{var t;return this.retryer=B({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},e="loading"===this.state.status;try{var n,r,i,o,s,a,u,c;if(!e){var l,h,p,f;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(l=(h=this.mutationCache.config).onMutate)?void 0:l.call(h,this.state.variables,this));const t=await(null==(p=(f=this.options).onMutate)?void 0:p.call(f,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}const d=await t();return await(null==(n=(r=this.mutationCache.config).onSuccess)?void 0:n.call(r,d,this.state.variables,this.state.context,this)),await(null==(i=(o=this.options).onSuccess)?void 0:i.call(o,d,this.state.variables,this.state.context)),await(null==(s=(a=this.mutationCache.config).onSettled)?void 0:s.call(a,d,null,this.state.variables,this.state.context,this)),await(null==(u=(c=this.options).onSettled)?void 0:u.call(c,d,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:d}),d}catch(t){try{var d,g,y,m,_,v,b,w;throw await(null==(d=(g=this.mutationCache.config).onError)?void 0:d.call(g,t,this.state.variables,this.state.context,this)),await(null==(y=(m=this.options).onError)?void 0:y.call(m,t,this.state.variables,this.state.context)),await(null==(_=(v=this.mutationCache.config).onSettled)?void 0:_.call(v,void 0,t,this.state.variables,this.state.context,this)),await(null==(b=(w=this.options).onSettled)?void 0:b.call(w,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!k(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),N.batch((()=>{this.observers.forEach((e=>{e.onMutationUpdate(t)})),this.mutationCache.notify({mutation:this,type:"updated",action:t})}))}}function G(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class V extends R{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,e,n){const r=new z({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(e),state:n,defaultOptions:e.mutationKey?t.getMutationDefaults(e.mutationKey):void 0});return this.add(r),r}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter((e=>e!==t)),this.notify({type:"removed",mutation:t})}clear(){N.batch((()=>{this.mutations.forEach((t=>{this.remove(t)}))}))}getAll(){return this.mutations}find(t){return void 0===t.exact&&(t.exact=!0),this.mutations.find((e=>g(t,e)))}findAll(t){return this.mutations.filter((e=>g(t,e)))}notify(t){N.batch((()=>{this.listeners.forEach((({listener:e})=>{e(t)}))}))}resumePausedMutations(){var t;return this.resuming=(null!=(t=this.resuming)?t:Promise.resolve()).then((()=>{const t=this.mutations.filter((t=>t.state.isPaused));return N.batch((()=>t.reduce(((t,e)=>t.then((()=>e.continue().catch(c)))),Promise.resolve())))})).then((()=>{this.resuming=void 0})),this.resuming}}function Y(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,o,s;const a=null==(e=t.fetchOptions)||null==(n=e.meta)?void 0:n.refetchPage,u=null==(r=t.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,c=null==u?void 0:u.pageParam,l="forward"===(null==u?void 0:u.direction),h="backward"===(null==u?void 0:u.direction),p=(null==(o=t.state.data)?void 0:o.pages)||[],f=(null==(s=t.state.data)?void 0:s.pageParams)||[];let d=f,g=!1;const y=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),m=(t,e,n,r)=>(d=r?[e,...d]:[...d,e],r?[n,...t]:[...t,n]),_=(e,n,r,i)=>{if(g)return Promise.reject("Cancelled");if(void 0===r&&!n&&e.length)return Promise.resolve(e);const o={queryKey:t.queryKey,pageParam:r,meta:t.options.meta};var s;s=o,Object.defineProperty(s,"signal",{enumerable:!0,get:()=>{var e,n;return null!=(e=t.signal)&&e.aborted?g=!0:null==(n=t.signal)||n.addEventListener("abort",(()=>{g=!0})),t.signal}});const a=y(o);return Promise.resolve(a).then((t=>m(e,r,t,i)))};let v;if(p.length)if(l){const e=void 0!==c,n=e?c:Z(t.options,p);v=_(p,e,n)}else if(h){const e=void 0!==c,n=e?c:H(t.options,p);v=_(p,e,n,!0)}else{d=[];const e=void 0===t.options.getNextPageParam;v=!a||!p[0]||a(p[0],0,p)?_([],e,f[0]):Promise.resolve(m([],f[0],p[0]));for(let n=1;n<p.length;n++)v=v.then((r=>{if(!a||!p[n]||a(p[n],n,p)){const i=e?f[n]:Z(t.options,r);return _(r,e,i)}return Promise.resolve(m(r,f[n],p[n]))}))}else v=_([]);return v.then((t=>({pages:t,pageParams:d})))}}}}function Z(t,e){return null==t.getNextPageParam?void 0:t.getNextPageParam(e[e.length-1],e)}function H(t,e){return null==t.getPreviousPageParam?void 0:t.getPreviousPageParam(e[0],e)}function X(t,e){if(t.getNextPageParam&&Array.isArray(e)){const n=Z(t,e);return null!=n&&!1!==n}}function W(t,e){if(t.getPreviousPageParam&&Array.isArray(e)){const n=H(t,e);return null!=n&&!1!==n}}const K=r.createContext(void 0),Q=r.createContext(!1);function J(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=K),window.ReactQueryClientContext):K)}const tt=({context:t}={})=>{const e=r.useContext(J(t,r.useContext(Q)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e};class et extends R{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const n=this.options;this.options=this.client.defaultMutationOptions(t),w(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){N.batch((()=>{var e,n,r,i;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(n=this.mutateOptions).onSuccess)||e.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var o,s,a,u;null==(o=(s=this.mutateOptions).onError)||o.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(u=this.mutateOptions).onSettled)||a.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)}))}))}}const nt=n(61688).useSyncExternalStore;function rt(t,e){return"function"==typeof t?t(...e):!!t}function it(t,e,n){const i=function(t,e,n){return I(t)?"function"==typeof e?{...n,mutationKey:t,mutationFn:e}:{...e,mutationKey:t}:"function"==typeof t?{...e,mutationFn:t}:{...t}}(t,e,n),o=tt({context:i.context}),[s]=r.useState((()=>new et(o,i)));r.useEffect((()=>{s.setOptions(i)}),[s,i]);const a=nt(r.useCallback((t=>s.subscribe(N.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),u=r.useCallback(((t,e)=>{s.mutate(t,e).catch(ot)}),[s]);if(a.error&&rt(s.options.useErrorBoundary,[a.error]))throw a.error;return{...a,mutate:u,mutateAsync:a.mutate}}function ot(){}class st extends R{constructor(t,e){super(),this.client=t,this.options=e,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(e)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),at(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ut(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ut(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),w(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const i=this.hasListeners();i&&ct(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const o=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)}getOptimisticResult(t){const e=this.client.getQueryCache().build(this.client,t),n=this.createResult(e,t);return function(t,e,n){if(n.keepPreviousData)return!1;if(void 0!==n.placeholderData)return e.isPlaceholderData;if(!w(t.getCurrentResult(),e))return!0;return!1}(this,n,t)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(t){const e={};return Object.keys(t).forEach((n=>{Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),t[n])})})),e}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...e}={}){return this.fetch({...e,meta:{refetchPage:t}})}fetchOptimistic(t){const e=this.client.defaultQueryOptions(t),n=this.client.getQueryCache().build(this.client,e);return n.isFetchingOptimistic=!0,n.fetch().then((()=>this.createResult(n,e)))}fetch(t){var e;return this.executeFetch({...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(t){this.updateQuery();let e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(c)),e}updateStaleTimeout(){if(this.clearStaleTimeout(),u||this.currentResult.isStale||!l(this.options.staleTime))return;const t=h(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),t)}computeRefetchInterval(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!u&&!1!==this.options.enabled&&l(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||A.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,e){const n=this.currentQuery,r=this.options,i=this.currentResult,o=this.currentResultState,s=this.currentResultOptions,a=t!==n,u=a?t.state:this.currentQueryInitialState,c=a?this.currentResult:this.previousQueryResult,{state:l}=t;let h,{dataUpdatedAt:p,error:f,errorUpdatedAt:d,fetchStatus:g,status:y}=l,m=!1,_=!1;if(e._optimisticResults){const i=this.hasListeners(),o=!i&&at(t,e),s=i&&ct(t,n,e,r);(o||s)&&(g=k(t.options.networkMode)?"fetching":"paused",p||(y="loading")),"isRestoring"===e._optimisticResults&&(g="idle")}if(e.keepPreviousData&&!l.dataUpdatedAt&&null!=c&&c.isSuccess&&"error"!==y)h=c.data,p=c.dataUpdatedAt,y=c.status,m=!0;else if(e.select&&void 0!==l.data)if(i&&l.data===(null==o?void 0:o.data)&&e.select===this.selectFn)h=this.selectResult;else try{this.selectFn=e.select,h=e.select(l.data),h=T(null==i?void 0:i.data,h,e),this.selectResult=h,this.selectError=null}catch(t){0,this.selectError=t}else h=l.data;if(void 0!==e.placeholderData&&void 0===h&&"loading"===y){let t;if(null!=i&&i.isPlaceholderData&&e.placeholderData===(null==s?void 0:s.placeholderData))t=i.data;else if(t="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.selectError=null}catch(t){0,this.selectError=t}void 0!==t&&(y="success",h=T(null==i?void 0:i.data,t,e),_=!0)}this.selectError&&(f=this.selectError,h=this.selectResult,d=Date.now(),y="error");const v="fetching"===g,b="loading"===y,w="error"===y;return{status:y,fetchStatus:g,isLoading:b,isSuccess:"success"===y,isError:w,isInitialLoading:b&&v,data:h,dataUpdatedAt:p,error:f,errorUpdatedAt:d,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>u.dataUpdateCount||l.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:w&&0===l.dataUpdatedAt,isPaused:"paused"===g,isPlaceholderData:_,isPreviousData:m,isRefetchError:w&&0!==l.dataUpdatedAt,isStale:lt(t,e),refetch:this.refetch,remove:this.remove}}updateResult(t){const e=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,w(n,e))return;this.currentResult=n;const r={cache:!0};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.trackedProps.size)return!0;const r=new Set(null!=n?n:this.trackedProps);return this.options.useErrorBoundary&&r.add("error"),Object.keys(this.currentResult).some((t=>{const n=t;return this.currentResult[n]!==e[n]&&r.has(n)}))})()&&(r.listeners=!0),this.notify({...r,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||F(t.error)||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()}notify(t){N.batch((()=>{var e,n,r,i;if(t.onSuccess)null==(e=(n=this.options).onSuccess)||e.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null);else if(t.onError){var o,s,a,u;null==(o=(s=this.options).onError)||o.call(s,this.currentResult.error),null==(a=(u=this.options).onSettled)||a.call(u,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)})),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function at(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&ut(t,e,e.refetchOnMount)}function ut(t,e,n){if(!1!==e.enabled){const r="function"==typeof n?n(t):n;return"always"===r||!1!==r&&lt(t,e)}return!1}function ct(t,e,n,r){return!1!==n.enabled&&(t!==e||!1===r.enabled)&&(!n.suspense||"error"!==t.state.status)&&lt(t,n)}function lt(t,e){return t.isStaleByTime(e.staleTime)}function ht(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const pt=r.createContext(ht()),ft=()=>r.useContext(pt),dt=r.createContext(!1),gt=()=>r.useContext(dt),yt=(dt.Provider,(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))}),mt=t=>{r.useEffect((()=>{t.clearReset()}),[t])},_t=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&rt(n,[t.error,r]),vt=t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},bt=(t,e,n)=>(null==t?void 0:t.suspense)&&((t,e)=>t.isLoading&&t.isFetching&&!e)(e,n),wt=(t,e,n)=>e.fetchOptimistic(t).then((({data:e})=>{null==t.onSuccess||t.onSuccess(e),null==t.onSettled||t.onSettled(e,null)})).catch((e=>{n.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}));function Et(t,e){const n=tt({context:t.context}),i=gt(),o=ft(),s=n.defaultQueryOptions(t);s._optimisticResults=i?"isRestoring":"optimistic",s.onError&&(s.onError=N.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=N.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=N.batchCalls(s.onSettled)),vt(s),yt(s,o),mt(o);const[a]=r.useState((()=>new e(n,s))),u=a.getOptimisticResult(s);if(nt(r.useCallback((t=>{const e=i?()=>{}:a.subscribe(N.batchCalls(t));return a.updateResult(),e}),[a,i]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),r.useEffect((()=>{a.setOptions(s,{listeners:!1})}),[s,a]),bt(s,u,i))throw wt(s,a,o);if(_t({result:u,errorResetBoundary:o,useErrorBoundary:s.useErrorBoundary,query:a.getCurrentQuery()}))throw u.error;return s.notifyOnChangeProps?u:a.trackResult(u)}class xt extends st{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,e){super.setOptions({...t,behavior:Y()},e)}getOptimisticResult(t){return t.behavior=Y(),super.getOptimisticResult(t)}fetchNextPage({pageParam:t,...e}={}){return this.fetch({...e,meta:{fetchMore:{direction:"forward",pageParam:t}}})}fetchPreviousPage({pageParam:t,...e}={}){return this.fetch({...e,meta:{fetchMore:{direction:"backward",pageParam:t}}})}createResult(t,e){var n,r,i,o,s,a;const{state:u}=t,c=super.createResult(t,e),{isFetching:l,isRefetching:h}=c,p=l&&"forward"===(null==(n=u.fetchMeta)||null==(r=n.fetchMore)?void 0:r.direction),f=l&&"backward"===(null==(i=u.fetchMeta)||null==(o=i.fetchMore)?void 0:o.direction);return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:X(e,null==(s=u.data)?void 0:s.pages),hasPreviousPage:W(e,null==(a=u.data)?void 0:a.pages),isFetchingNextPage:p,isFetchingPreviousPage:f,isRefetching:h&&!p&&!f}}}var St=n(9996);i.extend(o);const It=(t,e)=>i(`${t} ${e}`).toDate(),Ct=(t,e)=>t&&e?i.duration(i(t).diff(i(e))).asMilliseconds():null,Ot=t=>t?"number"==typeof t?null:{colors:{color600:t.color600??void 0,color500:t.color500??void 0,color400:t.color400??void 0,color300:t.color300??void 0,color200:t.color200??void 0,color100:t.color100??void 0},enabled_mobile:t.mobile??!1,enabled_website:t.site??!1,home:{banner:{image:t.banniere_home_page,button_link_mobile:t.banner_lien_button_mobile,button_label:t.banner_button_label}},modal:{title:t.titre,content:t.text,image:t.image,button_label:t.button_label,button_link_mobile:t.lien_button_mobile},landing:{image:t.landing_image},start_date:t.date_debut&&t.heure_debut?It(t.date_debut,t.heure_debut):null,end_date:t.date_fin&&t.heure_fin?It(t.date_fin,t.heure_fin):null}:null,Tt=(t,e,n)=>{const r=Ct(n?.start_date,e),i=Ct(n?.end_date,e);return{timeUntilEventStart:r,timeUntilEventEnd:i,isEventActive:Boolean(n&&("app"===t?n.enabled_mobile:n.enabled_website)&&r&&i&&r<0&&i>0)}},Pt=()=>{const t=jt();return Gt({queryKey:["directus-settings",t],queryFn:async()=>{const{data:e}=await s.uZ.directus.settings.get(t);return e}})},Nt=36e5,Rt=(0,r.createContext)({isActive:!1,colors:{color600:"",color500:"",color400:"",color300:"",color200:"",color100:""}}),At=({children:t,mode:e,defaultTheme:n})=>{const i=Pt(),o=Gt({queryKey:["coral-morocco-time"],queryFn:async()=>{const{data:t}=await s.uZ.utils.time.getMoroccoTime();return t}}),a=(0,r.useMemo)((()=>{const t=Ot(i.data?.data.evenement_actuel??null);return t?{...t,colors:{...t.colors,color100:t.colors.color100??n?.color100,color200:t.colors.color200??n?.color200,color300:t.colors.color300??n?.color300,color400:t.colors.color400??n?.color400,color500:t.colors.color500??n?.color500,color600:t.colors.color600??n?.color600}}:null}),[i.data]),{timeUntilEventStart:u,timeUntilEventEnd:c,isEventActive:l}=(0,r.useMemo)((()=>Tt(e,o.data??null,a)),[a,o]);return(0,r.useEffect)((()=>{if(!u||!c||u<=0||c<=0)return;if(u>Nt&&c>Nt)return;const t=setTimeout((()=>{i.refetch(),o.refetch()}),Math.min(u,c));return()=>{clearTimeout(t)}}),[u,c]),r.createElement(Rt.Provider,{value:l&&a?{isActive:!0,...a}:{isActive:!1,colors:n}},t)},Dt=()=>(0,r.useContext)(Rt);var Lt=Object.freeze({__proto__:null,convertEventData:Ot,calculateEventAvailability:Tt,useAdvantages:()=>{const t=jt();return Gt({queryKey:["directus-advantages",t],queryFn:async()=>{const{data:e}=await s.uZ.directus.advantages.get(t);return e}})},useCatalogs:()=>{const t=jt();return Gt({queryKey:["directus-catalogs",t],queryFn:async()=>{const{data:e}=await s.uZ.directus.catalogs.get(t);return e}})},usePages:()=>{const t=jt();return Gt({queryKey:["directus-pages",t],queryFn:async()=>{const{data:e}=await s.uZ.directus.pages.get(t,{titre_slug:{_eq:"espace-projet"}});return e}})},useSectorMCategory:t=>{const e=jt();return Gt({queryKey:["directus-sector-m-category",t,e],queryFn:async()=>{const{data:n}=await s.uZ.directus.sectorM.categories.get(e,t);return n}})},useSectorMHome:()=>{const t=jt();return Gt({queryKey:["directus-sector-m-home",t],queryFn:async()=>{const{data:e}=await s.uZ.directus.sectorM.home.get(t);return e}})},useSectorMProduct:t=>{const e=jt();return Gt({queryKey:["directus-sector-m-product",t,e],queryFn:async()=>{const{data:n}=await s.uZ.directus.sectorM.products.get(e,t);return n}})},useSettings:Pt,Provider:At,Context:Rt,useContext:Dt,useDynamicColors:()=>{const t=Dt();if(!t)throw new Error("Event context is not defined");return t.colors}});const Mt=t=>t,kt=(t=>{const e=(e=Mt,n)=>(0,a.useSyncExternalStoreWithSelector)(t.subscribe,t.get,t.get,e,n);return e.get=t.get,e.set=t.set,e.subscribe=t.subscribe,e.update=t.update,e})(s.Dp),jt=()=>{const t=kt();return t?.parameters.lang??"fr-FR"},Ft=(0,r.createContext)(new class{constructor(t={}){this.queryCache=t.queryCache||new $,this.mutationCache=t.mutationCache||new V,this.logger=t.logger||P,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=A.subscribe((()=>{A.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=L.subscribe((()=>{L.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())})))}unmount(){var t,e;this.mountCount--,0===this.mountCount&&(null==(t=this.unsubscribeFocus)||t.call(this),this.unsubscribeFocus=void 0,null==(e=this.unsubscribeOnline)||e.call(this),this.unsubscribeOnline=void 0)}isFetching(t,e){const[n]=f(t,e);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,e){var n;return null==(n=this.queryCache.find(t,e))?void 0:n.state.data}ensureQueryData(t,e,n){const r=p(t,e,n),i=this.getQueryData(r.queryKey);return i?Promise.resolve(i):this.fetchQuery(r)}getQueriesData(t){return this.getQueryCache().findAll(t).map((({queryKey:t,state:e})=>[t,e.data]))}setQueryData(t,e,n){const r=this.queryCache.find(t),i=function(t,e){return"function"==typeof t?t(e):t}(e,null==r?void 0:r.state.data);if(void 0===i)return;const o=p(t),s=this.defaultQueryOptions(o);return this.queryCache.build(this,s).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return N.batch((()=>this.getQueryCache().findAll(t).map((({queryKey:t})=>[t,this.setQueryData(t,e,n)]))))}getQueryState(t,e){var n;return null==(n=this.queryCache.find(t,e))?void 0:n.state}removeQueries(t,e){const[n]=f(t,e),r=this.queryCache;N.batch((()=>{r.findAll(n).forEach((t=>{r.remove(t)}))}))}resetQueries(t,e,n){const[r,i]=f(t,e,n),o=this.queryCache,s={type:"active",...r};return N.batch((()=>(o.findAll(r).forEach((t=>{t.reset()})),this.refetchQueries(s,i))))}cancelQueries(t,e,n){const[r,i={}]=f(t,e,n);void 0===i.revert&&(i.revert=!0);const o=N.batch((()=>this.queryCache.findAll(r).map((t=>t.cancel(i)))));return Promise.all(o).then(c).catch(c)}invalidateQueries(t,e,n){const[r,i]=f(t,e,n);return N.batch((()=>{var t,e;if(this.queryCache.findAll(r).forEach((t=>{t.invalidate()})),"none"===r.refetchType)return Promise.resolve();const n={...r,type:null!=(t=null!=(e=r.refetchType)?e:r.type)?t:"active"};return this.refetchQueries(n,i)}))}refetchQueries(t,e,n){const[r,i]=f(t,e,n),o=N.batch((()=>this.queryCache.findAll(r).filter((t=>!t.isDisabled())).map((t=>{var e;return t.fetch(void 0,{...i,cancelRefetch:null==(e=null==i?void 0:i.cancelRefetch)||e,meta:{refetchPage:r.refetchPage}})}))));let s=Promise.all(o).then(c);return null!=i&&i.throwOnError||(s=s.catch(c)),s}fetchQuery(t,e,n){const r=p(t,e,n),i=this.defaultQueryOptions(r);void 0===i.retry&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(t,e,n){return this.fetchQuery(t,e,n).then(c).catch(c)}fetchInfiniteQuery(t,e,n){const r=p(t,e,n);return r.behavior=Y(),this.fetchQuery(r)}prefetchInfiniteQuery(t,e,n){return this.fetchInfiniteQuery(t,e,n).then(c).catch(c)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,e){const n=this.queryDefaults.find((e=>m(t)===m(e.queryKey)));n?n.defaultOptions=e:this.queryDefaults.push({queryKey:t,defaultOptions:e})}getQueryDefaults(t){if(!t)return;const e=this.queryDefaults.find((e=>_(t,e.queryKey)));return null==e?void 0:e.defaultOptions}setMutationDefaults(t,e){const n=this.mutationDefaults.find((e=>m(t)===m(e.mutationKey)));n?n.defaultOptions=e:this.mutationDefaults.push({mutationKey:t,defaultOptions:e})}getMutationDefaults(t){if(!t)return;const e=this.mutationDefaults.find((e=>_(t,e.mutationKey)));return null==e?void 0:e.defaultOptions}defaultQueryOptions(t){if(null!=t&&t._defaulted)return t;const e={...this.defaultOptions.queries,...this.getQueryDefaults(null==t?void 0:t.queryKey),...t,_defaulted:!0};return!e.queryHash&&e.queryKey&&(e.queryHash=y(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.useErrorBoundary&&(e.useErrorBoundary=!!e.suspense),e}defaultMutationOptions(t){return null!=t&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==t?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}({})),Bt=(0,s.h)({listeners:0}),qt=()=>{const t=(0,r.useContext)(Ft);return(0,r.useEffect)((()=>{const e=Bt.get();return 0===e.listeners&&t.mount(),Bt.set({listeners:e.listeners+1}),()=>{1===e.listeners&&t.unmount(),Bt.set({listeners:e.listeners-1})}}),[]),Object.assign(t,Ft)},Ut=t=>it({...t,context:qt()}),$t=t=>{const e=tt({context:qt()});return Ut({onMutate:async n=>{const r=await(t.onMutate?.(n)),i=e.getQueryData(t.queryKey);return i?(await e.invalidateQueries(t.queryKey),e.setQueryData(t.queryKey,(()=>"function"==typeof t.optimisticUpdate?t.optimisticUpdate(i,n):St(i,n))),{...r,previousValue:i}):r},onError:async(n,r,i)=>{await(t.onError?.(n,r,i)),i?.previousValue&&e.setQueryData(t.queryKey,i.previousValue)},onSettled:async(n,r,i,o)=>{await(t.onSettled?.(n,r,i,o)),o?.previousValue&&e.invalidateQueries({queryKey:t.queryKey})},...t})},zt=t=>"optimisticUpdate"in t&&t.optimisticUpdate?$t(t):Ut(t),Gt=t=>{return Et(p({...t,context:qt()},e,n),st);var e,n},Vt=t=>{return Et(p({...t,context:qt()},e,n),xt);var e,n};Gt.withPolling=t=>{const e=(0,r.useRef)(1),n={pollingMaxRefetch:1/0,pollingPredicate:t=>!0,...t};return{...n,onSettled:(...t)=>{n.onSettled?.(...t),e.current++,e.current>n.pollingMaxRefetch&&(e.current=0)},refetchInterval:t=>{const r=n.pollingPredicate(t);return!(e.current>=n.pollingMaxRefetch||!r)&&n.pollingInterval}}};const Yt=(t,e)=>{const n=(0,r.useRef)(!1),i=()=>{n.current=!0};(0,r.useEffect)((()=>{n.current||t(i)}),e)},Zt=()=>{const t=kt();return t?.coral?.session?.userID?{userID:t.coral.session.userID}:null};var Ht=Object.freeze({__proto__:null,useSession:Zt});var Xt=Object.freeze({__proto__:null,useCategories:(t,e)=>Gt({queryKey:["categories","appliances",t,e],refetchOnWindowFocus:!1,queryFn:async()=>{const{data:n}=await s.uZ.catalog.category.get({queries:e,params:{area:"appliances",categoryID:t}});return n},enabled:!!t}),useCategoriesRoot:t=>Gt({queryKey:["categories-root","appliances",t],refetchOnWindowFocus:!1,keepPreviousData:!0,queryFn:async()=>{const{data:e}=await s.uZ.catalog.category.query({queries:t,params:{area:"appliances"}});return e}}),useCategoryProducts:(t,e,n)=>Vt({queryKey:["products","appliances",t,e],enabled:!n?.disabled,refetchOnWindowFocus:!1,queryFn:async({pageParam:n=1})=>{const{data:r,headers:i}=await s.uZ.catalog.product.queryCategory({queries:{...e,page:n},params:{area:"appliances",categoryID:t}});return{data:r,metadata:{...s.hF.parseContentRange(i)}}},getNextPageParam:(t,e)=>{if(!(e.reduce(((t,e)=>t+e.data.length),0)>=t.metadata.count))return t.metadata.page+1}}),useProduct:(t,e)=>({product:Gt({queryKey:["products","appliances",t,e],refetchOnWindowFocus:!1,queryFn:async()=>{const{data:n}=await s.uZ.catalog.product.get({queries:{...e},params:{productID:t}});return n}}),availability:Gt({queryKey:["availability","appliances",t,e],queryFn:async()=>{const{data:n}=await s.uZ.catalog.stock.get({params:{productID:t},queries:{...e}});return n}})}),useProducts:(t,e)=>Vt({queryKey:["products","appliances",t],enabled:!e?.disabled,refetchOnWindowFocus:!1,queryFn:async({pageParam:e=1})=>{const{data:n,headers:r}=await s.uZ.catalog.product.queryArea({queries:{...t,page:e},params:{area:"appliances"}});return{data:n,metadata:{...s.hF.parseContentRange(r)}}},getNextPageParam:(t,n)=>{const r=n.reduce(((t,e)=>t+e.data.length),0);if(!(e?.maxRange&&r>=e.maxRange||r>=t.metadata.count))return t.metadata.page+1}})});const Wt=t=>Gt({queryKey:["categories-root","groceries",t],keepPreviousData:!0,refetchOnWindowFocus:!1,queryFn:async()=>{const{data:e}=await s.uZ.catalog.category.query({queries:t,params:{area:"groceries"}});return e}});var Kt=Object.freeze({__proto__:null,useCategories:(t,e,n)=>Gt({queryKey:["categories","groceries",t,e],enabled:!n?.disabled,refetchOnWindowFocus:!1,queryFn:async()=>{const{data:n}=await s.uZ.catalog.category.get({queries:e,params:{area:"groceries",categoryID:t}});return n}}),useCategoriesRoot:Wt,useCategoryProducts:(t,e,n)=>Vt({queryKey:["products","groceries",t,e],enabled:!n?.disabled,refetchOnWindowFocus:!1,queryFn:async({pageParam:n=1})=>{const{data:r,headers:i}=await s.uZ.catalog.product.queryCategory({queries:{...e,page:n},params:{area:"groceries",categoryID:t}});return{data:r,metadata:{...s.hF.parseContentRange(i)}}},getNextPageParam:(t,e)=>{if(!(e.reduce(((t,e)=>t+e.data.length),0)>=t.metadata.count))return t.metadata.page+1}}),useProducts:(t,e)=>Vt({queryKey:["products","groceries",t],enabled:!e?.disabled,refetchOnWindowFocus:!1,queryFn:async({pageParam:e=1})=>{const{data:n,headers:r}=await s.uZ.catalog.product.queryArea({queries:{...t,page:e},params:{area:"groceries"}});return{data:n,metadata:{...s.hF.parseContentRange(r)}}},getNextPageParam:(t,n)=>{const r=n.reduce(((t,e)=>t+e.data.length),0);if(!(e?.maxRange&&r>=e.maxRange||r>=t.metadata.count))return t.metadata.page+1}}),useProduct:(t,e)=>Gt({queryKey:["products","groceries",t,e],refetchOnWindowFocus:!1,queryFn:async()=>{const{data:n}=await s.uZ.catalog.product.get({queries:{...e},params:{productID:t}});return n}})});var Qt=Object.freeze({__proto__:null,appliances:Xt,groceries:Kt,useAutocompleteProductsSearch:(t,e)=>Gt({enabled:t.length>=3,queryKey:["autocomplete-products",t,e],queryFn:async()=>{const{data:n,headers:r}=await s.uZ.catalog.product.searchAutocomplete({queries:{...e,keyword:t}});return{data:n,metadata:{...s.hF.parseContentRange(r)}}}}),useFilters:(t,e)=>Gt({queryKey:["filters","groceries",t],enabled:!e?.disabled,queryFn:async()=>{const{data:e}=await s.uZ.catalog.filter.query({queries:t});return e}}),useProducts:(t,e)=>Vt({queryKey:["products",t],enabled:!e?.disabled,refetchOnWindowFocus:!1,queryFn:async({pageParam:e=1})=>{const{data:n,headers:r}=await s.uZ.catalog.product.query({queries:{...t,page:e}});return{data:n,metadata:{...s.hF.parseContentRange(r)}}},getNextPageParam:(t,n)=>{const r=n.reduce(((t,e)=>t+e.data.length),0);if(!(e?.maxRange&&r>=e.maxRange||r>=t.metadata.count))return t.metadata.page+1}}),useProductsSearch:(t,e,n)=>Vt({enabled:t.length>=3&&!n?.disabled,queryKey:["products",t,e],refetchOnWindowFocus:!1,queryFn:async({pageParam:n=1})=>{const{data:r,headers:i}=await s.uZ.catalog.product.search({queries:{...e,keyword:t,page:n}});return{data:r,metadata:{...s.hF.parseContentRange(i)}}},getNextPageParam:(t,e)=>{if(!(e.reduce(((t,e)=>t+e.data.length),0)>=t.metadata.count))return t.metadata.page+1}})});var Jt=Object.freeze({__proto__:null,useVouchers:()=>{const t=kt(),e=t?.coral.session?.userID;return Gt({queryKey:["customer","vouchers",e],refetchOnWindowFocus:!1,queryFn:async()=>{const{data:t}=await s.uZ.customer.voucher.queryVoucher();return t},enabled:Boolean(e)})}}),te=Object.freeze({__proto__:null,vouchers:Jt});const ee=t=>!t.draft,ne=[[{id:0,name:"zendesk.storeInquiry.inquiryType",index:-1},{id:1,name:"zendesk.storeInquiry.exchangeRefund",value:"echange___remboursement"},{id:2,name:"zendesk.storeInquiry.addressSchedule",value:"adresse/horaire_de_travail"},{id:3,name:"zendesk.storeInquiry.loyalty",value:"fidélité"},{id:4,name:"zendesk.storeInquiry.other",value:void 0}],[{id:0,name:"zendesk.storeClaim.claimType",index:-1},{id:1,name:"zendesk.storeClaim.quality",value:"qualite_produit"},{id:2,name:"zendesk.storeClaim.flaw",value:"article_avec_defaut"},{id:3,name:"zendesk.storeClaim.behaviour",value:"comportement"},{id:4,name:"zendesk.storeClaim.other",value:void 0}],[{id:0,name:"zendesk.ecomClaim.claimType",index:-1},{id:1,name:"zendesk.ecomClaim.article",value:"article_manquant"},{id:2,name:"zendesk.ecomClaim.quality",value:"qualite_produit"},{id:3,name:"zendesk.ecomClaim.bug",value:"bug_application"},{id:4,name:"zendesk.ecomClaim.delay",value:"livraison"},{id:5,name:"zendesk.ecomClaim.other",value:void 0}],[{id:0,name:"zendesk.ecomInquiry.inquiryType",index:-1},{id:1,name:"zendesk.ecomInquiry.exchangeRefund",value:"echange___remboursement"},{id:2,name:"zendesk.ecomInquiry.loyalty",value:"fidélité"},{id:3,name:"zendesk.ecomInquiry.slot",value:"changement_créneau"},{id:4,name:"zendesk.ecomInquiry.delivery",value:"information_livraison"},{id:5,name:"zendesk.ecomInquiry.other",value:void 0}]],re=[{id:1,name:"zendesk.fieldsType.type",fields:[{id:0,name:"zendesk.fieldsType.type",index:-1},{id:5444068667538,name:"zendesk.fieldsType.inquiry",value:"demande",source:"e-commerce",index:0},{id:5444068667666,name:"zendesk.fieldsType.claim",value:"reclamation",source:"e-commerce",index:1}]}],ie=[{id:1,name:"zendesk.sources.type",fields:[{id:0,name:"zendesk.sources.canal",source:void 0},{id:5444068667666,name:"zendesk.sources.online",source:"e-commerce",index:1},{id:5444068667538,name:"zendesk.sources.store",source:"magasin",index:0}]}],oe=[{id:5444068667538,name:"zendesk.fields.claim",fields:ne[0]},{id:5444068667666,name:"zendesk.fields.inquiry",fields:ne[2]}],se=({source:t,category:e,type:n,order:r,phone:i})=>{const o=[{id:5513765316242,value:"live_chat"},{id:5514298392210,value:t},{id:5444089276050,value:n},{id:5673209272594,value:e},{id:5802972047506,value:i}];return r&&o.push({id:360012069179,value:r}),o},ae=t=>t.is_public;var ue=Object.freeze({__proto__:null,isArticleDraft:t=>t.draft,isArticlePublished:ee,dynamicFields:ne,fieldsType:re,sources:ie,fields:oe,getFields:se,isCommentPublic:ae,useArticles:t=>Gt({queryKey:["cs-articles",t],queryFn:async()=>{const{data:e}=await s.uZ.customerService.faq.query({queries:{label_names:t}});return{...e,articles:e.filter(ee)}}}),useFailures:()=>Gt({queryKey:["cs-failures"],queryFn:async()=>{const{data:t}=await s.uZ.customerService.failure.query();return t}}),useReclamation:()=>({buildFormData:t=>{const e=new FormData;return e.append("articleName",t.articleName),t.failures.forEach((t=>e.append("failures",t.toString()))),e.append("comment",t.comment),e.append("productCode",t.productCode),t.files?.forEach((t=>e.append("files",t))),e.append("supplierCode",t.supplierCode),e.append("supplierName",t.supplierName),e.append("firstName",t.firstName),e.append("lastName",t.lastName),e.append("isWarranty",t.isWarranty.toString()),e.append("pieceType",t.pieceType),e.append("contractNumber",t.contractNumber),e.append("siteCode",t.siteCode.toString()),e},create:zt({mutationFn:async t=>{const{data:e}=await s.uZ.customerService.reclamation.create({body:t});return e}})}),useReclamationDetails:t=>Gt({queryKey:["cs-reclamation-details",t],queryFn:async()=>{const{data:e}=await s.uZ.customerService.reclamation.find({params:{id:t}});return e}}),useReclamations:()=>Gt({queryKey:["cs-reclamations"],queryFn:async()=>{const{data:t}=await s.uZ.customerService.reclamation.query();return t}}),useSearch:()=>({search:zt({mutationFn:async({number:t,searchType:e})=>{const{data:n}=await s.uZ.customerService.reclamation.queryArticles({queries:{number:t,searchType:e}});return n}})}),useSearchEcommerce:()=>Gt({queryKey:["cs-search-ecommerce"],queryFn:async()=>{const{data:t}=await s.uZ.customerService.reclamation.queryArticlesEcommerce();return t}}),useTicket:()=>({create:zt({mutationFn:async({ticket:t})=>{const{data:e}=await s.uZ.customerService.ticket.create({body:t});return e}}),dynamicFields:ne,fieldsType:re,sources:ie,fields:oe,getFields:se}),useTicketComment:()=>({create:zt({mutationFn:async({comment:t,ticket:e})=>{if(t instanceof FormData){const{data:n}=await s.uZ.customerService.ticket.comment.createWithAttachment({body:t,params:{id:e}});return n}{const{data:n}=await s.uZ.customerService.ticket.comment.create({body:t,params:{id:e}});return n}}})}),useTicketComments:(t,e)=>{const n=Zt();return Gt({queryKey:["cs-ticket-comments",n?.userID,t],queryFn:async()=>{const{data:e}=await s.uZ.customerService.ticket.comment.query({params:{id:t}});return{...e,comments:e.comments.filter(ae)}},enabled:Boolean(n),refetchInterval:e})},useTickets:(t,e,n)=>{const r=Zt();return Gt({queryKey:["cs-tickets",r?.userID,{sort_by:t,sort_order:e}],queryFn:async()=>{const{data:n}=await s.uZ.customerService.ticket.query({queries:{sort_by:t,sort_order:e}});return n},refetchInterval:n,enabled:Boolean(r)})}})},96568:function(t,e,n){"use strict";n.d(e,{FD:function(){return Rr},Pl:function(){return Pr},Qc:function(){return Lr},Xj:function(){return Sr},ZP:function(){return Mr},bH:function(){return Dr},m6:function(){return Or},o9:function(){return Ar},uS:function(){return Nr}});var r=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),l=(t,e)=>{for(var n in e)i(t,n,{get:e[n],enumerable:!0})},h=(t,e,n)=>(((t,e,n)=>{e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n),p=c((t=>{t.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},t.toByteArray=function(t){var e,n,o=s(t),a=o[0],u=o[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),l=0,h=u>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},t.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,c=r-i;a<c;a+=s)o.push(u(t,a,a+s>c?c:a+s));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};var e,n=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(e=0,64;e<64;++e)n[e]=o[e],r[o.charCodeAt(e)]=e;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function a(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function u(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63})),f=c((t=>{t.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=d,s/=256,c-=8);t[n+f-d]|=128*g}})),d=c((t=>{var e=p(),n=f(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},t.INSPECT_MAX_BYTES=50;var i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=o(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(U(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=function(t){if(s.isBuffer(t)){var e=0|d(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||$(t.length)?o(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|d(t))}function l(t){for(var e=t.length<0?0:0|d(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,s.prototype),r}function d(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function g(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(i)return r?-1:F(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(c(t,o+p)!==c(e,p)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if($(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return q(F(e,t.length-n),t,n,r)}function E(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return q(B(e),t,n,r)}function S(t,e,n,r){return q(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&((u=(31&c)<<6|63&o)>127&&(l=u));break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&((u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u));break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch{return!1}}(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(U(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(U(o,Uint8Array))i+o.length>r.length?s.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):y.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,i){if(U(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<u;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z[t[o]];return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,r,i,o){return e=+e,r>>>=0,o||L(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function k(t,e,r,i,o){return e=+e,r>>>=0,o||L(t,0,r,8),n.write(t,e,r,i,52,8),r+8}s.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||A(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var j=/[^+/0-9A-Za-z-_]/g;function F(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}var z=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()})),g={};l(g,{addChild:()=>ke,addFavoriteStore:()=>Ae,addShoppingList:()=>Kn,authByCard:()=>Oe,authByCardV2:()=>Te,authByPhone:()=>Ie,authByPhoneV2:()=>Ce,authPhone:()=>Ue,authenticateApp:()=>te,cancelTransaction:()=>Zn,checkBalancePhone:()=>bn,checkIfIsFidelityAccount:()=>xn,confirm:()=>Pe,confirmPhone:()=>$e,confirmTransaction:()=>Yn,createOrder:()=>He,deleteCard:()=>hn,deleteChild:()=>Fe,deleteFavoriteStore:()=>Le,deleteShoppingList:()=>Qn,editAddress:()=>Se,endTransaction:()=>Vn,getAddresses:()=>xe,getAppRating:()=>ir,getBanners:()=>ie,getBooking:()=>Mn,getBookingMarjane:()=>rn,getBookings:()=>Ln,getBrand:()=>ae,getBrands:()=>se,getCards:()=>ln,getCatalog:()=>re,getCategoriesRootIds:()=>fe,getChildren:()=>Me,getCities:()=>he,getCmiPage:()=>pn,getCommandRating:()=>sr,getConfigParameters:()=>kn,getCountries:()=>ue,getCoupons:()=>Re,getCreditAccount:()=>fn,getCustomerOrders:()=>Ye,getDeliveryCost:()=>Hn,getDepartments:()=>ve,getDestination:()=>le,getDestinations:()=>ce,getDistricts:()=>pe,getFavoriteProducts:()=>Rn,getFavoriteStores:()=>De,getFidelityConfig:()=>wn,getInvoicePdf:()=>Ke,getLexDeliveryConfig:()=>En,getLexDeliveryStore:()=>en,getMoroccoTime:()=>an,getNoFoodDeliveryStore:()=>nn,getOrder:()=>Ze,getOrders:()=>Ve,getPreparationCost:()=>Xn,getPrice:()=>jn,getPrices:()=>Fn,getProduct:()=>Pn,getProductAvailability:()=>Nn,getProductCategories:()=>de,getProductCategory:()=>ge,getProductStock:()=>Bn,getProducts:()=>Tn,getProductsCategories:()=>me,getProfile:()=>Be,getPromotions:()=>_e,getPromotionsCategories:()=>ye,getPurchase:()=>Ge,getPurchases:()=>ze,getSafeKey:()=>cn,getShoppingListItems:()=>Je,getShoppingLists:()=>Qe,getShops:()=>$n,getStampCost:()=>Wn,getStore:()=>tr,getStores:()=>Jn,getStoresMap:()=>er,getTags:()=>oe,getTokenState:()=>ee,getTopSales:()=>An,getTopSalesCategories:()=>be,getVersion:()=>nr,getVersionV2:()=>rr,getWafasalafBalance:()=>gn,getWafasalafOperations:()=>dn,getWalletBalance:()=>yn,getWalletBalanceHistory:()=>mn,getWareHouse:()=>qn,quoteOrderCart:()=>We,refillAFriendsBalance:()=>In,refillAssociationBalance:()=>Cn,refillMyBalance:()=>Sn,register:()=>Ne,registerCheck:()=>Ee,requestBalanceTransfer:()=>_n,requestCodePinSms:()=>vn,requestEcryptIdCustomer:()=>sn,sendContactUsForm:()=>Un,startTransaction:()=>zn,updateChild:()=>je,updateOrder:()=>Xe,updateProfile:()=>qe,updateRating:()=>or,updateShoppingList:()=>tn,validTransaction:()=>Gn});var y={};function m(t,e,n,r){(N(t)||R(t))&&("family"in t||"graphite"in t)||P(`${e}: expect ${n} to be a unit (store, event or effect)${r}`)}function _({node:t=[],from:e,source:n,parent:r=e||n,to:i,target:o,child:s=i||o,scope:a={},meta:u={},family:c={type:"regular"},regional:l}={}){let h=ut(r),p=ut(c.links),f=ut(c.owners),d=[],g={};for(let e=0;e<t.length;e++){let n=t[e];n&&(d.push(n),ct(n,g))}let y={id:M(),seq:d,next:ut(s),meta:u,scope:a,family:{type:c.type||"crosslink",links:p,owners:f},reg:g};for(let t=0;t<p.length;t++)K(p[t]).push(y);for(let t=0;t<f.length;t++)Q(f[t]).push(y);for(let t=0;t<h.length;t++)h[t].next.push(y);return l&&ot&&it(tt(ot),[y]),y}function v(t,e,n){let r=xt,i=null,o=dt;if(t.target&&(e=t.params,n=t.defer,r="page"in t?t.page:r,t.stack&&(i=t.stack),o=rt(t)||o,t=t.target),o&&dt&&o!==dt&&(dt=null),Array.isArray(t))for(let n=0;n<t.length;n++)mt("pure",r,W(t[n]),i,e[n],o);else mt("pure",r,W(t),i,e,o);if(n&&!wt)return;let s,a,u,c,l,h,p={isRoot:wt,currentPage:xt,forkPage:dt,isWatch:Et};wt=0;t:for(;c=yt();){let{idx:t,stack:e,type:n}=c;u=e.node,xt=l=e.page,dt=rt(e),h=(l||u).reg;let r={fail:0,scope:u.scope};s=a=0;for(let i=t;i<u.seq.length&&!s;i++){let o=u.seq[i],c=o.data;switch(o.type){case"barrier":{let r=c.barrierID;l&&(r=`${l.fullID}_${r}`);let o=c.priority;if(i!==t||n!==o){bt.has(r)||(bt.add(r),_t(i,e,o,r));continue t}bt.delete(r);break}case"mov":{let t;switch(c.from){case"stack":t=tt(e);break;case"a":case"b":t=e[c.from];break;case"value":t=c.store;break;case E:h[c.store.id]||(e.page=l=It(l,c.store.id),h=l?l.reg:u.reg),t=Y(h[c.store.id])}switch(c.to){case"stack":e.value=t;break;case"a":case"b":e[c.to]=t;break;case E:Ct(l,u,c.target.id).current=t}break}case"check":switch(c.type){case"defined":a=void 0===tt(e);break;case"changed":a=tt(e)===Y(Ct(l,u,c.store.id))}break;case"filter":a=!Ot(r,c,e);break;case"run":if(i!==t||"effect"!==n){_t(i,e,"effect");continue t}case"compute":Et="watch"===u.meta.op,e.value=Ot(r,c,e),Et=p.isWatch}s=r.fail||a}if(!s)for(let t=0;t<u.next.length;t++)mt("child",l,u.next[t],e,tt(e),rt(e))}wt=p.isRoot,xt=p.currentPage,dt=rt(p)}function b(t,e){let n=(t,...e)=>xt?((t,e,n,r)=>{let i=xt,o=null;if(e)for(o=xt;o&&o.template!==e;)o=nt(o);St(o);let s=t.create(n,r);return St(i),s})(n,r,t,e):n.create(t,e);n.graphite=_({meta:Ut("event",n,e,t),regional:1}),n.create=t=>(v(dt?dt.find(n):n,t),t),n.watch=k(Ft,n),n.map=t=>{let e,r;N(t)&&(e=t,r=t.name,t=t.fn);let i=b(Pt(n,r),e);return zt(n,i,S,t),i},n.filter=t=>Gt(n,"filter",t.fn?t:t.fn,[$({fn:X})]),n.filterMap=t=>Gt(n,"filterMap",t,[U({fn:X}),q.defined()]),n.prepend=t=>{let e=b("* → "+n.shortName,{parent:nt(n)}),r=st();return r&&W(e).seq.push(r.upward),zt(e,n,"prepend",t),qt(n,e),e};let r=st();return n}l(y,{config:()=>Zt,setConfig:()=>Yt});for(var w=typeof Symbol<"u"&&Symbol.observable||"@@observable",E="store",x="effect",S="map",I=(t=>(R(t)||N(t))&&"kind"in t),C=t=>e=>I(e)&&e.kind===t,O=C(E),T=(C("event"),C(x),C("domain")),P=t=>{throw Error(t)},N=t=>"object"==typeof t&&null!==t,R=t=>"function"==typeof t,A=()=>{let t=0;return()=>(++t).toString(36)},D=A(),L=A(),M=A(),k=(t,e)=>t.bind(null,e),j=(t,e,n)=>t.bind(null,e,n),F=(t,e,n)=>({id:L(),type:t,data:n,hasRef:e}),B=({from:t=E,store:e,target:n,to:r=(n?E:"stack")})=>F("mov",t===E,{from:t,store:e,to:r,target:n}),q={defined:()=>F("check",0,{type:"defined"}),changed:({store:t})=>F("check",1,{type:"changed",store:t})},U=j(F,"compute",0),$=j(F,"filter",0),z=j(F,"run",0),G=({store:t})=>B({from:"stack",target:t}),V=t=>({id:L(),current:t}),Y=({current:t})=>t,Z=(t,{fn:e},{a:n})=>e(t,n),H=(t,{fn:e},{a:n})=>e(n,t),X=(t,{fn:e})=>e(t),W=t=>t.graphite||t,K=t=>t.family.owners,Q=t=>t.family.links,J=t=>t.stateRef,tt=t=>t.value,et=t=>t.subscribers,nt=t=>t.parent,rt=t=>t.forkPage,it=(t,e)=>{let n=W(t);for(let t=0;t<e.length;t++){let r=W(e[t]);"domain"!==n.family.type&&(r.family.type="crosslink"),K(r).push(n),Q(n).push(r)}},ot=null,st=()=>ot&&ot.template,at=t=>(t&&ot&&ot.sidRoot&&(t=`${ot.sidRoot}ɔ${t}`),t),ut=(t=[])=>{let e=[];if(Array.isArray(t))for(let n=0;n<t.length;n++)Array.isArray(t[n])?e.push(...t[n]):e.push(t[n]);else e.push(t);return e.map(W)},ct=({hasRef:t,type:e,data:n},r)=>{let i;t&&(i=n.store,r[i.id]=i),"mov"===e&&n.to===E&&(i=n.target,r[i.id]=i)},lt=null,ht=(t,e)=>{if(!t)return e;if(!e)return t;let n,r=t.v.type===e.v.type;return(r&&t.v.id>e.v.id||!r&&"sampler"===t.v.type)&&(n=t,t=e,e=n),n=ht(t.r,e),t.r=t.l,t.l=n,t},pt=[],ft=0;ft<5;)pt.push({first:null,last:null,size:0}),ft+=1;var dt,gt,yt=()=>{for(let t=0;t<5;t++){let e=pt[t];if(e.size>0){if(2===t||3===t){e.size-=1;let t=lt.v;return lt=ht(lt.l,lt.r),t}1===e.size&&(e.last=null);let n=e.first;return e.first=n.r,e.size-=1,n.v}}},mt=(t,e,n,r,i,o)=>_t(0,{a:null,b:null,node:n,parent:r,value:i,page:e,forkPage:o},t),_t=(t,e,n,r=0)=>{let i=vt(n),o=pt[i],s={v:{idx:t,stack:e,type:n,id:r},l:0,r:0};2===i||3===i?lt=ht(lt,s):(0===o.size?o.first=s:o.last.r=s,o.last=s),o.size+=1},vt=t=>{switch(t){case"child":return 0;case"pure":return 1;case"barrier":return 2;case"sampler":return 3;case x:return 4;default:return-1}},bt=new Set,wt=1,Et=0,xt=null,St=t=>{xt=t},It=(t,e)=>{if(t){for(;t&&!t.reg[e];)t=nt(t);if(t)return t}return null},Ct=(t,e,n)=>(It(t,n)||e).reg[n],Ot=(t,{fn:e},n)=>{try{return e(tt(n),t.scope,n)}catch(e){console.error(e),t.fail=1}},Tt=(t,e)=>""+t.shortName+e,Pt=(t,e)=>e??Tt(t," → *"),Nt=(t,e)=>t.includes(e),Rt=(t,e)=>{let n=t.indexOf(e);-1!==n&&t.splice(n,1)},At=(t,e)=>{Rt(t.next,e),Rt(K(t),e),Rt(Q(t),e)},Dt=(t,e,n)=>{let r;t.next.length=0,t.seq.length=0,t.scope=null;let i=Q(t);for(;r=i.pop();)At(r,t),(e||n&&!t.meta.sample||"crosslink"===r.family.type)&&Dt(r,e,"on"!==r.meta.op&&n);for(i=K(t);r=i.pop();)At(r,t),n&&"crosslink"===r.family.type&&Dt(r,e,"on"!==r.meta.op&&n)},Lt=t=>t.clear(),Mt=(t,{deep:e}={})=>{let n=0;if(t.ownerSet&&t.ownerSet.delete(t),O(t))Lt(et(t));else if(T(t)){n=1;let e=t.history;Lt(e.events),Lt(e.effects),Lt(e.stores),Lt(e.domains)}Dt(W(t),!!e,n)},kt=t=>{let e=j(Mt,t,void 0);return e.unsubscribe=e,e},jt=(t,e,{node:n,scope:r,meta:i})=>_({node:n,parent:t,child:e,scope:r,meta:i,family:{owners:[t,e],links:e},regional:1}),Ft=(t,e)=>{if(R(e)||P(".watch argument should be a function"),dt){let e=dt.nodeMap[W(t).id];e&&(t=e)}return kt(_({scope:{fn:e},node:[z({fn:X})],parent:t,meta:{op:"watch"},family:{owners:t},regional:1}))},Bt=(t,e)=>(N(t)&&(Bt((t=>t.config)(t),e),null!=t.name&&(N(t.name)?Bt(t.name,e):R(t.name)?e.handler=t.name:e.name=t.name),t.loc&&(e.loc=t.loc),(t.sid||null===t.sid)&&(e.sid=t.sid),t.handler&&(e.handler=t.handler),t.updateFilter&&(e.updateFilter=t.updateFilter),nt(t)&&(e.parent=nt(t)),"strict"in t&&(e.strict=t.strict),t.named&&(e.named=t.named),Bt((t=>t.ɔ)(t),e)),e),qt=(t,e,n="event")=>{nt(t)&&nt(t).hooks[n](e)},Ut=(t,e,n,r)=>{let i=Bt({name:r,config:n},{}),o="domain"===t,s=D(),{parent:a=null,sid:u=null,strict:c=1,named:l=null}=i,h=l||i.name||(o?"":s),p=function(t,e){let n,r,i,o=t;return e?(i=e.compositeName,0===t.length?(n=i.path,r=i.fullName):(n=i.path.concat([t]),r=0===i.fullName.length?t:i.fullName+"/"+t)):(n=0===t.length?[]:[t],r=t),{shortName:o,fullName:r,path:n}}(h,a),f={unit:e.kind=t,name:e.shortName=h,sid:e.sid=at(u),named:l,unitId:e.id=s};if(e.parent=a,e.compositeName=p,e.defaultConfig=i,e.thru=t=>t(e),e.getType=()=>p.fullName,!o){e.subscribe=t=>((t=>{N(t)||R(t)||P("expect first argument be an object")})(t),e.watch(R(t)?t:e=>{t.next&&t.next(e)})),e[w]=()=>e;let t=st();t&&(f.nativeTemplate=t)}return gt=c,f},$t=t=>b({named:t}),zt=(t,e,n,r)=>jt(t,e,{scope:{fn:r},node:[U({fn:X})],meta:{op:n}}),Gt=(t,e,n,r)=>{let i;N(n)&&(i=n,n=n.fn);let o=b(Tt(t," →? *"),i);return jt(t,o,{scope:{fn:n},node:r,meta:{op:e}}),o},Vt=(t,e,n,r,i,o)=>{let s=J(e),a=[B({store:s,to:"a"}),U({fn:r?H:Z}),q.defined(),q.changed({store:s}),o&&$({fn:(t,e,{a:n})=>o(t,n)}),G({store:s})],u=st();if(u&&(a.unshift(u.loader),a.push(u.upward),O(t))){let e=J(t);Nt(u.plain,e)||(Nt(u.closure,e)||u.closure.push(e),s.before||(s.before=[]),s.before.push({type:"closure",of:e}))}return jt(t,e,{scope:{fn:i},node:a,meta:{op:n}})},Yt=(_({node:[z({fn({fn:t,value:e}){t(e)}})],meta:{op:"fx",fx:"sidechain"}}),b()),Zt=function t(e,n){function r(t,e){c.off(t),et(c).set(t,kt(Vt(t,c,"on",1,e,h)))}let i=V(e),o=V(e),s=$t("updates"),a=st();i.after=[{type:"copy",to:o}],a&&a.plain.push(i,o);let u=i.id,c={subscribers:new Map,updates:s,defaultState:e,stateRef:i,getState(){let t,e=i;if(xt){let e=xt;for(;e&&!e.reg[u];)e=nt(e);e&&(t=e)}return!t&&dt&&dt.reg[u]&&(t=dt),t&&(e=t.reg[u]),Y(e)},setState(t){let e;dt&&(e=dt.nodeMap[W(c).id]),e||(e=c),v({target:e,params:t,defer:1})},reset(...t){for(let e of t)c.on(e,(()=>c.defaultState));return c},on(t,e){if(function(t,e,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)m(t[r],e,`${r} item of ${n}`,"");else m(t,e,n," or array of units")}(t,".on","first argument"),Array.isArray(t))for(let n of t)r(n,e);else r(t,e);return c},off(t){let e=et(c).get(t);return e&&(e(),et(c).delete(t)),c},map(e,n){let r,o,s;N(e)&&(r=e,o=e.name,n=e.firstState,e=e.fn);let a=c.getState(),u=st();u?s=null:void 0!==a&&(s=e(a,n));let l=t(s,{name:Pt(c,o),config:r,strict:0}),h=Vt(c,l,S,0,e);return J(l).before=[{type:S,fn:e,from:i}],u&&(Nt(u.plain,i)||Nt(h.seq,u.loader)||h.seq.unshift(u.loader)),l},watch(t,e){if(!e||!I(t)){let e=Ft(c,t),n=st();return n?n.watch.push({of:i,fn:t}):t(c.getState()),e}return R(e)||P("second argument should be a function"),t.watch((t=>e(c.getState(),t)))}},l=Ut(E,c,n),h=c.defaultConfig.updateFilter;return c.graphite=_({scope:{state:i},node:[q.defined(),q.changed({store:o}),h&&B({store:o,to:"a"}),h&&$({fn:(t,e,{a:n})=>h(t,n)}),G({store:i}),G({store:o})],child:s,meta:l,regional:1}),gt&&void 0===e&&P("current state can't be undefined, use null instead"),it(c,[s]),c}({apiUrl:null,marjaneApiKey:null,marjaneDevApiKey:null,token:null,requestMiddleware:null}).on(Yt,((t,e)=>({...t,...e}))),Ht=()=>{},Xt=async t=>{let e=null,n=t.headers.get("content-type");try{switch(n?.split(";")[0]){case"application/json":case"text/json":e=await t.json();break;case"application/pdf":e=await t.blob();break;default:e=await t.text()}}catch(e){throw console.error(e),t}return e},Wt=async(t,...e)=>{let n=null,r=null;for(let t of e)if("function"==typeof t)n=t;else{if("object"!=typeof t)throw new Error(`Unknown argument: ${t}`);r=t}let i=t.replace(/\{\w+\}/g,(t=>""+r?.params?.[t.substring(1,t.length-1)])),o=Ht,s=Ht,a=new Promise(((t,e)=>{o=t,s=e})),u=!1,c=()=>(u=!0,a),{requestMiddleware:l}=Zt.getState();l?await l(c,i):c();let h={method:"GET",headers:{Authorization:`Bearer ${r?.bearerToken||Zt.getState().token}`,"Content-Type":"application/json"},mode:"cors"};if(n?.(h),h.body&&"string"!=typeof h.body&&(h.body=JSON.stringify(h.body)),!u)throw new Error("Request canceled");try{try{let t=await fetch(Qt(i,r?.queries,{url:r?.url}),h);if(!t.ok)throw t;let e=await Xt(t),n=Object.assign(t,{data:e});return o(n),n}catch(t){if(t instanceof Response){let e=await Xt(t);throw Object.assign(t,{data:e})}throw t}}catch(t){throw s(t),t}},Kt=t=>"[object Object]"===Object.prototype.toString.call(t),Qt=(t,e,n)=>{let{apiUrl:r}=Zt.getState();return`${n?.url||r}/${t}${e?`?${(t=>t.map((([t,e])=>Array.isArray(e)?e.map((e=>`${encodeURIComponent(t)}[]=${encodeURIComponent(`${e}`)}`)).join("&"):Kt(e)?Object.keys(e).map((n=>`${encodeURIComponent(t)}[${encodeURIComponent(n)}]=${encodeURIComponent(`${e[n]}`)}`)).join("&"):`${encodeURIComponent(t)}=${encodeURIComponent(`${e}`)}`)).join("&"))(Object.entries(e))}`:""}`},Jt="auth",te=t=>Wt(`${Jt}/authenticate`,(e=>{e.method="POST",e.body=t})),ee=t=>Wt(`${Jt}/check_token`,(e=>{delete e.headers.Authorization,e.method="POST",e.body={token:t}})),ne="catalog",re=()=>Wt(`${ne}/catalog`),ie=t=>Wt(`${ne}/banner`,{queries:t}),oe=t=>Wt(`${ne}/tags/filter`,{queries:t}),se=t=>Wt(`${ne}/brands/filter`,{queries:t}),ae=t=>Wt(`${ne}/brands/{id}`,{params:{id:t}}),ue=t=>Wt(`${ne}/countries`,{queries:t}),ce=(t={})=>Wt(`${ne}/destinations`,{queries:t}),le=t=>Wt(`${ne}/destinations/{uuid}`,{params:{uuid:t}}),he=()=>Wt(`${ne}/cities`),pe=t=>Wt(t?`${ne}/cities/${t}/districts`:`${ne}/cities/districts`),fe=()=>Wt(`${ne}/marjane-config/1/root-categories-ids`),de=t=>Wt(`${ne}/categories`,{queries:t}),ge=(t,e)=>Wt(`${ne}/categories/{categoryId}`,{params:{categoryId:t},queries:e}),ye=t=>Wt(`${ne}/promotion_categories`,{queries:t}),me=t=>Wt(`${ne}/product-categories`,{queries:t}),_e=t=>Wt(`${ne}/promotion`,{queries:t}),ve=t=>Wt(`${ne}/promotion-department`,{queries:t}),be=t=>Wt(`${ne}/top-sales-categories`,{queries:t}),we="customers",Ee=()=>Wt(`${we}/register/check`),xe=t=>Wt(`${we}/{id}/addresses`,{params:{id:t}}),Se=(t,e,n)=>Wt(`${we}/{id}/addresses/{addressId}`,{params:{id:t,addressId:e}},(t=>{t.method="PUT",t.body=n})),Ie=(t,e)=>Wt(`${we}/authenticate/app/phone`,(n=>{delete n.headers.Authorization,n.method="POST",n.body={phone:t,locale:{code:e??"fr_FR"}}})),Ce=(t,e,n,r)=>Wt(`${we}/authenticate/app/phone/v2`,(i=>{delete i.headers.Authorization,i.method="POST",i.body={phone:t,locale:{code:r??"fr_FR"},recaptcha:{token:n,platform:e}}})),Oe=(t,e)=>Wt(`${we}/authenticate/app/card`,(n=>{n.method="POST",n.body={card:t,locale:{code:e??"fr_FR"}}})),Te=(t,e,n,r)=>Wt(`${we}/authenticate/app/card/v2`,(i=>{i.method="POST",i.body={card:t,locale:{code:r??"fr_FR"},recaptcha:{token:n,platform:e}}})),Pe=(t,e)=>Wt(`${we}/authenticate/app/confirm/v2`,{bearerToken:e},(e=>{e.method="POST",e.body={code:t}})),Ne=t=>Wt(we,(e=>{e.method="POST",e.body={...t}})),Re=(t,e,n)=>Wt(`${we}/{id}/vouchers`,{params:{id:t},queries:{limit:15,type:e,...n&&{offset:15*(n-1)}}}),Ae=(t,e)=>Wt(`${we}/{customerId}/favorite_stores/{entityId}`,{params:{customerId:t,entityId:e}},(t=>{t.method="PUT"})),De=t=>Wt(`${we}/{id}/favorite_stores`,{params:{id:t}}),Le=(t,e)=>Wt(`${we}/{customerId}/favorite_stores/{entityId}`,{params:{customerId:t,entityId:e}},(t=>{t.method="DELETE"})),Me=t=>Wt(`${we}/{id}/children`,{params:{id:t}}),ke=(t,e)=>Wt(`${we}/{id}/child`,{params:{id:e}},(e=>{e.method="POST",e.body=t})),je=(t,e,n)=>Wt(`${we}/{customerId}/child/{childId}`,{params:{childId:e,customerId:n}},(e=>{e.method="PUT",e.body=t})),Fe=(t,e)=>Wt(`${we}/{customerId}/child/{childId}`,{params:{customerId:e,childId:t}},(t=>{t.method="DELETE"})),Be=t=>Wt(`${we}/{customerId}`,{params:{customerId:t}}),qe=(t,e,n)=>Wt(`${we}/{id}`,{params:{id:e}},(e=>{e.headers={...e.headers,...n&&{"edit-login-token":n}},e.method="PUT",e.body=t})),Ue=t=>Wt(`${we}/authenticate/app/phone`,(e=>{e.method="POST",e.body={phone:t}})),$e=t=>Wt(`${we}/authenticate/app/confirm`,(e=>{e.method="POST",e.body={code:t}})),ze=(t,e)=>Wt(`${we}/{id}/tickets`,{params:{id:t},queries:{mode:"Marjane",...e}}),Ge=(t,e,n,r)=>Wt(`${we}/{customerId}/tickets/{serverId}/{ticketKey}`,{params:{customerId:t,ticketKey:n,serverId:e},queries:r}),Ve=t=>Wt(`${we}/services/documents/order`,{queries:t}),Ye=t=>Wt(`front/${we}/orders`,{queries:t}),Ze=t=>Wt(`${we}/services/documents/order/{uuid}`,{params:{uuid:t}}),He=(t,e)=>Wt(`${we}/services/documents/order`,{queries:e},(e=>{e.method="POST",e.body=t})),Xe=(t,e,n)=>Wt(`${we}/services/documents/order/{uuid}`,{params:{uuid:t},queries:n},(t=>{t.method="PUT",t.body=e})),We=(t,e)=>Wt(`${we}/services/documents/order/quote`,{queries:e},(e=>{e.method="POST",e.body=t})),Ke=t=>Wt(`${we}/services/invoices/{invoiceId}/pdf`,{params:{invoiceId:t}}),Qe=(t,e)=>Wt(`${we}/shopping-list`,{queries:{customer:t,...e}}),Je=(t,e)=>Wt(`${we}/shopping-list/{uuid}/items`,{params:{uuid:t},queries:e}),tn=(t,e)=>Wt(`${we}/shopping-list/{uuid}`,{params:{uuid:t}},(t=>{t.method="PUT",t.body={...e}})),en=(t,e)=>Wt("v2/store-locator",(n=>{n.method="POST",delete n.headers.Authorization,n.headers={...n.headers,"api-key":Zt.getState().marjaneApiKey||""},n.body={lat:t,lon:e}})),nn=(t,e,n)=>Wt("v2/store-locator-no-food",(r=>{r.method="POST",delete r.headers.Authorization,r.headers={...r.headers,"api-key":Zt.getState().marjaneApiKey||""},r.body={lat:t,lon:e,Destination:n}})),rn=(t,e)=>Wt("v2/delivery-slots/list/{magasin}/{type}",{params:{magasin:t,type:e}},(t=>{delete t.headers.Authorization,t.headers={...t.headers,"api-key":Zt.getState().marjaneApiKey||""}})),on="process-public",sn=(t,e)=>Wt(`${on}/encrypt/{id}`,{params:{id:t}},(t=>{t.method="POST",t.body=e})),an=()=>Wt(`${on}/time`),un="payment",cn=t=>Wt(`${un}/cmi/customers/{id}/safe_key`,{params:{id:t}}),ln=t=>Wt(`${un}/cmi/customers/{id}/cards`,{params:{id:t}}),hn=(t,e)=>Wt(`${un}/cmi/customers/{customer_id}/cards/{card_uuid}`,{params:{customer_id:t,card_uuid:e}},(t=>{t.method="DELETE"})),pn=(t,e)=>Wt("/fim/est3Dgate",{queries:e,url:t},(t=>{t.method="POST"})),fn=()=>Wt(`${un}/wafasalaf`),dn=t=>Wt(`${un}/wafasalaf/{id}/operations`,{params:{id:t}}),gn=t=>Wt(`${un}/wafasalaf/{id}/balance`,{params:{id:t}}),yn=t=>Wt(`${un}/wallet/customers/{id}/balance`,{params:{id:t}}),mn=(t,e)=>Wt(`${un}/wallet/customers/{id}/balance/history`,{params:{id:t},queries:{...e}}),_n=(t,e)=>Wt(`${un}/wallet/customers/{id}/balance/transfer`,{params:{id:t}},(t=>{t.method="POST",t.body=e})),vn=t=>Wt(`${un}/wallet/customers/{id}/pin_code`,{params:{id:t}}),bn=(t,e)=>Wt(`${un}/wallet/customers/{id}/balance_phone/check`,{params:{id:t}},(t=>{t.method="POST",t.body=e})),wn=()=>Wt(`${un}/marjane-config/1`),En=()=>Wt(`${un}/marjane-config/1/express-delivery`),xn=t=>Wt(`${un}/balance_order/receiver_phone/check`,(e=>{e.method="POST",e.body={receiver_phone:t}})),Sn=({customerId:t,amount:e,cmi_card:n})=>Wt(`${un}/balance_order`,(r=>{r.method="POST",r.body={action_type:1,customer:{id:t},cb_amount:e,cmi_card:n}})),In=({customerId:t,receiverId:e,amount:n,cmi_card:r})=>Wt(`${un}/balance_order`,(i=>{i.method="POST",i.body={action_type:2,customer:{id:t},receiver:{id:e},cb_amount:n,cmi_card:r}})),Cn=({customerId:t,receiverId:e,cb_amount:n,fidelity_amount:r,cmi_card:i})=>Wt(`${un}/balance_order`,(o=>{o.method="POST",o.body={action_type:3,customer:{id:t},receiver:{id:e},cb_amount:n,fidelity_amount:r,cmi_card:i}})),On="front/products",Tn=t=>Wt(On,{queries:t}),Pn=(t,e)=>Wt("products/{id}",{params:{id:t},queries:e}),Nn=(t,e)=>Wt(`${On}/{id}/stock-availability`,{params:{id:t},queries:e}),Rn=t=>Wt(On,{queries:{...t,is_favorite_products:!0}}),An=t=>Wt(On,{queries:{...t,is_top_sales:!0}}),Dn="shopping",Ln=()=>Wt(`${Dn}/booking_management/bookings`),Mn=t=>Wt(`${Dn}/booking_management/bookings/{uuid}`,{params:{uuid:t}}),kn=()=>Wt(`${Dn}/config/parameters`),jn=t=>Wt(`${Dn}/prices/{priceId}`,{params:{priceId:t}}),Fn=t=>Wt(`${Dn}/prices`,{queries:t}),Bn=t=>Wt(`${Dn}/stocks`,{queries:t}),qn=t=>Wt(`${Dn}/warehouses/{warehouseId}`,{params:{warehouseId:t}}),Un=t=>Wt(`${Dn}/feedback/contact`,(e=>{e.method="POST",e.body=t})),$n=()=>Wt(`${Dn}/shop`),zn=t=>Wt(`${Dn}/store/start_transaction`,(e=>{e.method="POST",e.body=t})),Gn=t=>Wt(`${Dn}/store/valid_transaction`,(e=>{e.method="POST",e.body=t})),Vn=t=>Wt(`${Dn}/store/end_transaction`,(e=>{e.method="POST",e.body=t})),Yn=t=>Wt(`${Dn}/store/confirm_transaction`,(e=>{e.method="POST",e.body=t})),Zn=t=>Wt(`${Dn}/store/cancel_transaction`,(e=>{e.method="POST",e.body=t})),Hn=t=>Wt(`${Dn}/delivery-costs/{id}`,{params:{id:t}}),Xn=t=>Wt(`${Dn}/preparation-costs/{id}`,{params:{id:t}}),Wn=t=>Wt(`${Dn}/stamp-costs/{id}`,{params:{id:t}}),Kn=t=>Wt(`${Dn}/shopping-list`,(e=>{e.method="POST",e.body={...t}})),Qn=t=>Wt(`${Dn}/shopping-list/{id}`,{params:{id:t}},(t=>{t.method="DELETE"})),Jn=()=>Wt(`${Dn}/entities`,{queries:{parent:1}}),tr=t=>Wt(`${Dn}/entities/{id}`,{params:{id:t}}),er=(t,e,n)=>Wt(`${Dn}/entities/search/geoloc`,{queries:{latitude:t,longitude:e,distance:n}}),nr=t=>Wt(`${Dn}/mobile-versions/check`,(e=>{e.headers={...e.headers,"mobile-version":t}})),rr=t=>Wt(`${Dn}/mobile-versions/v2/check`,{queries:t}),ir=t=>Wt(`${Dn}/rating/customer/{userId}/check`,{params:{userId:t}}),or=(t,e,n)=>Wt(`${Dn}/rating/{ratingId}`,{params:{ratingId:t}},(t=>{t.method="PUT",t.body={comment:n,rating:e}})),sr=t=>Wt(`${Dn}/rating/customer/{userId}/order/check`,{params:{userId:t}}),ar={};l(ar,{CmiFunctions:()=>wr,DeliveryTypes:()=>gr,ResourceTypes:()=>fr,parseCloudinaryUrl:()=>_r,toCloudinaryUrl:()=>mr});var ur,cr,lr,hr,pr,fr=((cr=fr||{}).image="image",cr.raw="raw",cr.video="video",cr),dr=Object.values(fr),gr=((ur=gr||{}).upload="upload",ur.private="private",ur.authenticated="authenticated",ur.fetch="fetch",ur.facebook="facebook",ur.twitter="twitter",ur.twitter_name="twitter_name",ur.gravatar="gravatar",ur.youtube="youtube",ur.hulu="hulu",ur.vimeo="vimeo",ur.animoto="animoto",ur.worldstarhiphop="worldstarhiphop",ur.dailymotion="dailymotion",ur.multi="multi",ur.text="text",ur.asset="asset",ur.list="list",ur),yr=Object.values(gr),mr=({cloudName:t,resourceType:e,deliveryType:n,transformations:r,version:i,publicId:o,format:s=""})=>{let a=(t,e)=>Array.isArray(t)?t.join(e):t,u=[t,e,n,Array.isArray(r?.[0])?a(r.map((t=>a(t,","))),"/"):a(r,","),i,a(o,"/")].filter((t=>t)).join("/");return encodeURI(`https://res.cloudinary.com/${u}${s}`)},_r=t=>{let e=t.replace(/^.*\/\/[^/]+\//,"").split("/");return e.reduce(((t,n,r)=>{let i=e=>{let{publicId:n}=t;return Array.isArray(n)?[...n,e]:n?[n,e]:e};if(0===r)return{...t,cloudName:n};let o=dr.find((t=>t===n));if(o)return{...t,resourceType:o};let s=yr.find((t=>t===n));if(s)return{...t,deliveryType:s};if(r===e.length-1){let[e,r]=n.split(".");return{...t,format:r?"."+r:"",publicId:i(e)}}if(!t.version&&!t.publicId&&/^\w_[^]/.test(n)){let e=n.split(","),{transformations:r}=t;return{...t,transformations:r?Array.isArray(r?.[0])?[...r,e]:[r,e]:e}}return/^v\d+$/.test(n)?{...t,version:n}:{...t,publicId:i(n)}}),{})},vr=(lr=d(),pr=null!=lr?r(a(lr)):{},((t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let a of s(e))!u.call(t,a)&&a!==n&&i(t,a,{get:()=>e[a],enumerable:!(r=o(e,a))||r.enumerable});return t})(!hr&&lr&&lr.__esModule?pr:i(pr,"default",{value:lr,enumerable:!0}),lr)),br=class{highOrder;lowOrder;constructor(t,e){this.highOrder=t,this.lowOrder=e}},wr=class{static SHA512(t){var e,n,r,i,o,s,a,u,c,l,h=[new br(1779033703,4089235720),new br(3144134277,2227873595),new br(1013904242,4271175723),new br(2773480762,1595750129),new br(1359893119,2917565137),new br(2600822924,725511199),new br(528734635,4215389547),new br(1541459225,327033209)],p=[new br(1116352408,3609767458),new br(1899447441,602891725),new br(3049323471,3964484399),new br(3921009573,2173295548),new br(961987163,4081628472),new br(1508970993,3053834265),new br(2453635748,2937671579),new br(2870763221,3664609560),new br(3624381080,2734883394),new br(310598401,1164996542),new br(607225278,1323610764),new br(1426881987,3590304994),new br(1925078388,4068182383),new br(2162078206,991336113),new br(2614888103,633803317),new br(3248222580,3479774868),new br(3835390401,2666613458),new br(4022224774,944711139),new br(264347078,2341262773),new br(604807628,2007800933),new br(770255983,1495990901),new br(1249150122,1856431235),new br(1555081692,3175218132),new br(1996064986,2198950837),new br(2554220882,3999719339),new br(2821834349,766784016),new br(2952996808,2566594879),new br(3210313671,3203337956),new br(3336571891,1034457026),new br(3584528711,2466948901),new br(113926993,3758326383),new br(338241895,168717936),new br(666307205,1188179964),new br(773529912,1546045734),new br(1294757372,1522805485),new br(1396182291,2643833823),new br(1695183700,2343527390),new br(1986661051,1014477480),new br(2177026350,1206759142),new br(2456956037,344077627),new br(2730485921,1290863460),new br(2820302411,3158454273),new br(3259730800,3505952657),new br(3345764771,106217008),new br(3516065817,3606008344),new br(3600352804,1432725776),new br(4094571909,1467031594),new br(275423344,851169720),new br(430227734,3100823752),new br(506948616,1363258195),new br(659060556,3750685593),new br(883997877,3785050280),new br(958139571,3318307427),new br(1322822218,3812723403),new br(1537002063,2003034995),new br(1747873779,3602036899),new br(1955562222,1575990012),new br(2024104815,1125592928),new br(2227730452,2716904306),new br(2361852424,442776044),new br(2428436474,593698344),new br(2756734187,3733110249),new br(3204031479,2999351573),new br(3329325298,3815920427),new br(3391569614,3928383900),new br(3515267271,566280711),new br(3940187606,3454069534),new br(4118630271,4000239992),new br(116418474,1914138554),new br(174292421,2731055270),new br(289380356,3203993006),new br(460393269,320620315),new br(685471733,587496836),new br(852142971,1086792851),new br(1017036298,365543100),new br(1126000580,2618297676),new br(1288033470,3409855158),new br(1501505948,4234509866),new br(1607167915,987167468),new br(1816402316,1246189591)],f=new Array(64);function d(t,e){var n,r,i;return n=(65535&t.lowOrder)+(65535&e.lowOrder),i=(65535&(r=(t.lowOrder>>>16)+(e.lowOrder>>>16)+(n>>>16)))<<16|65535&n,n=(65535&t.highOrder)+(65535&e.highOrder)+(r>>>16),r=(t.highOrder>>>16)+(e.highOrder>>>16)+(n>>>16),new br((65535&r)<<16|65535&n,i)}function g(t,e,n,r){var i,o,s;return i=(65535&t.lowOrder)+(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&r.lowOrder),s=(65535&(o=(t.lowOrder>>>16)+(e.lowOrder>>>16)+(n.lowOrder>>>16)+(r.lowOrder>>>16)+(i>>>16)))<<16|65535&i,i=(65535&t.highOrder)+(65535&e.highOrder)+(65535&n.highOrder)+(65535&r.highOrder)+(o>>>16),o=(t.highOrder>>>16)+(e.highOrder>>>16)+(n.highOrder>>>16)+(r.highOrder>>>16)+(i>>>16),new br((65535&o)<<16|65535&i,s)}function y(t,e,n,r,i){var o,s,a;return o=(65535&t.lowOrder)+(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&r.lowOrder)+(65535&i.lowOrder),a=(65535&(s=(t.lowOrder>>>16)+(e.lowOrder>>>16)+(n.lowOrder>>>16)+(r.lowOrder>>>16)+(i.lowOrder>>>16)+(o>>>16)))<<16|65535&o,o=(65535&t.highOrder)+(65535&e.highOrder)+(65535&n.highOrder)+(65535&r.highOrder)+(65535&i.highOrder)+(s>>>16),s=(t.highOrder>>>16)+(e.highOrder>>>16)+(n.highOrder>>>16)+(r.highOrder>>>16)+(i.highOrder>>>16)+(o>>>16),new br((65535&s)<<16|65535&o,a)}function m(t,e,n){return new br(t.highOrder&e.highOrder^t.highOrder&n.highOrder^e.highOrder&n.highOrder,t.lowOrder&e.lowOrder^t.lowOrder&n.lowOrder^e.lowOrder&n.lowOrder)}function _(t,e,n){return new br(t.highOrder&e.highOrder^~t.highOrder&n.highOrder,t.lowOrder&e.lowOrder^~t.lowOrder&n.lowOrder)}function v(t,e){return e<=32?new br(t.highOrder>>>e|t.lowOrder<<32-e,t.lowOrder>>>e|t.highOrder<<32-e):new br(t.lowOrder>>>e|t.highOrder<<32-e,t.highOrder>>>e|t.lowOrder<<32-e)}function b(t){var e=v(t,28),n=v(t,34),r=v(t,39);return new br(e.highOrder^n.highOrder^r.highOrder,e.lowOrder^n.lowOrder^r.lowOrder)}function w(t){var e=v(t,14),n=v(t,18),r=v(t,41);return new br(e.highOrder^n.highOrder^r.highOrder,e.lowOrder^n.lowOrder^r.lowOrder)}function E(t){var e=v(t,1),n=v(t,8),r=S(t,7);return new br(e.highOrder^n.highOrder^r.highOrder,e.lowOrder^n.lowOrder^r.lowOrder)}function x(t){var e=v(t,19),n=v(t,61),r=S(t,6);return new br(e.highOrder^n.highOrder^r.highOrder,e.lowOrder^n.lowOrder^r.lowOrder)}function S(t,e){return e<=32?new br(t.highOrder>>>e,t.lowOrder>>>e|t.highOrder<<32-e):new br(0,t.highOrder<<32-e)}let I=8*(t=unescape(encodeURIComponent(t))).length;t=function(t){for(var e=[],n=8*t.length,r=0;r<n;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<24-r%32;return e}(t),t[I>>5]|=128<<24-I%32,t[31+(I+128>>10<<5)]=I;for(var C=0;C<t.length;C+=32){e=h[0],n=h[1],r=h[2],i=h[3],o=h[4],s=h[5],a=h[6],u=h[7];for(var O=0;O<80;O++)f[O]=O<16?new br(t[2*O+C],t[2*O+C+1]):g(x(f[O-2]),f[O-7],E(f[O-15]),f[O-16]),c=y(u,w(o),_(o,s,a),p[O],f[O]),l=d(b(e),m(e,n,r)),u=a,a=s,s=o,o=d(i,c),i=r,r=n,n=e,e=d(c,l);h[0]=d(e,h[0]),h[1]=d(n,h[1]),h[2]=d(r,h[2]),h[3]=d(i,h[3]),h[4]=d(o,h[4]),h[5]=d(s,h[5]),h[6]=d(a,h[6]),h[7]=d(u,h[7])}var T=[];for(C=0;C<h.length;C++)T.push(h[C].highOrder),T.push(h[C].lowOrder);return function(t){for(var e,n="0123456789abcdef",r="",i=4*t.length,o=0;o<i;o+=1)e=t[o>>2]>>8*(3-o%4),r+=n.charAt(e>>4&15)+n.charAt(15&e);return r}(T)}static pack(t){for(var e,n,r,i,o,s,a,u,c,l,h,p,f,d,g,y,m,_,v,b,w,E,x=0,S=1,I="",C="",O=0,T=[];x<t.length;){for(e=t.charAt(x),n="",x++;x<t.length&&null!==t.charAt(x).match(/[\d*]/);)n+=t.charAt(x),x++;switch(""===n&&(n="1"),e){case"a":case"A":if(typeof arguments[S]>"u")throw new Error("Warning:  pack() Type "+e+": not enough arguments");for(C=String(arguments[S]),"*"===n&&(n=C.length),O=0;O<n;O++)typeof C[O]>"u"?I+="a"===e?String.fromCharCode(0):" ":I+=C[O];S++;break;case"h":case"H":if(typeof arguments[S]>"u")throw new Error("Warning: pack() Type "+e+": not enough arguments");if(C=arguments[S],"*"===n&&(n=C.length),n>C.length)throw new Error("Warning: pack() Type "+e+": not enough characters in string");for(O=0;O<n;O+=2)r=C[O],O+1>=n||typeof C[O+1]>"u"?r+="0":r+=C[O+1],"h"===e&&(r=r[1]+r[0]),I+=String.fromCharCode(parseInt(r,16));S++;break;case"c":case"C":if("*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(O=0;O<n;O++)I+=String.fromCharCode(arguments[S]),S++;break;case"s":case"S":case"v":if("*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(O=0;O<n;O++)I+=String.fromCharCode(255&arguments[S]),I+=String.fromCharCode(arguments[S]>>8&255),S++;break;case"n":if("*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning: pack() Type "+e+": too few arguments");for(O=0;O<n;O++)I+=String.fromCharCode(arguments[S]>>8&255),I+=String.fromCharCode(255&arguments[S]),S++;break;case"i":case"I":case"l":case"L":case"V":if("*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(O=0;O<n;O++)I+=String.fromCharCode(255&arguments[S]),I+=String.fromCharCode(arguments[S]>>8&255),I+=String.fromCharCode(arguments[S]>>16&255),I+=String.fromCharCode(arguments[S]>>24&255),S++;break;case"N":if("*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(O=0;O<n;O++)I+=String.fromCharCode(arguments[S]>>24&255),I+=String.fromCharCode(arguments[S]>>16&255),I+=String.fromCharCode(arguments[S]>>8&255),I+=String.fromCharCode(255&arguments[S]),S++;break;case"f":case"d":if(i=23,o=8,"d"===e&&(i=52,o=11),"*"===n&&(n=arguments.length-S),n>arguments.length-S)throw new Error("Warning:  pack() Type "+e+": too few arguments");for(O=0;O<n;O++){for(C=arguments[S],c=a=Math.pow(2,o-1)-1,(u=1-a)-i,l=isNaN(g=parseFloat(C))||g===-1/0||g===1/0?g:0,h=0,p=2*a+1+i+3,f=new Array(p),d=(g=0!==l?0:g)<0,m=(g=Math.abs(g))-(y=Math.floor(g)),w=p;w;)f[--w]=0;for(w=a+2;y&&w;)f[--w]=y%2,y=Math.floor(y/2);for(w=a+1;m>0&&w;--m)f[++w]=((m*=2)>=1)-0;for(w=-1;++w<p&&!f[w];);if(f[(_=i-1+(w=(h=a+1-w)>=u&&h<=c?w+1:a+1-(h=u-1)))+1]){if(!(v=f[_]))for(b=_+2;!v&&b<p;v=f[b++]);for(b=_+1;v&&--b>=0;(f[b]=!f[b]-0)&&(v=0));}for(w=w-2<0?-1:w-3;++w<p&&!f[w];);for((h=a+1-w)>=u&&h<=c?++w:h<u&&(w=a+1-(h=u-1)),(y||0!==l)&&(h=c+1,w=a+2,l===-1/0?d=1:isNaN(l)&&(f[w]=1)),g=Math.abs(h+a),E="",b=o+1;--b;)E=g%2+E,g=g>>=1;for(g=0,b=0,w=(E=(d?"1":"0")+E+f.slice(w,w+i).join("")).length,T=[];w;)g+=(1<<b)*E.charAt(--w),7===b&&(T[T.length]=String.fromCharCode(g),g=0),b=(b+1)%8;T[T.length]=g?String.fromCharCode(g):"",I+=T.join(""),S++}break;case"x":if("*"===n)throw new Error("Warning: pack(): Type x: '*' ignored");for(O=0;O<n;O++)I+=String.fromCharCode(0);break;case"X":if("*"===n)throw new Error("Warning: pack(): Type X: '*' ignored");for(O=0;O<n;O++){if(0===I.length)throw new Error("Warning: pack(): Type X: outside of string");I=I.substring(0,I.length-1)}break;case"@":if("*"===n)throw new Error("Warning: pack(): Type X: '*' ignored");if(n>I.length)for(s=n-I.length,O=0;O<s;O++)I+=String.fromCharCode(0);n<I.length&&(I=I.substring(0,n))}}if(S<arguments.length)throw new Error("Warning: pack(): "+(arguments.length-S)+" arguments unused");return I}static generateParameters(t,e,n,r,i,o,s){let{isBalanceOrder:a}={isBalanceOrder:!1,...s},u={hash:"",hashAlgorithm:this.hashAlgorithm,encoding:"UTF-8",TranType:"PreAuth",currency:this.currency,amount:o.amount||"1",CallbackResponse:"true",BillToCity:"o",BillToStateProv:"o",BillToCountry:"o",storetype:this.storeType,BillToStreet1:"o",BillToTelVoice:"o",failUrl:i.failUrl,callbackUrl:Qt(a?"payment/cmi/callback/balance_transfer":"payment/cmi/callback/card_register"),clientid:o.clientId,BillToName:"o",okUrl:i.okUrl,lang:this.lang,tel:o.tel||"0500000000",email:"email@domain.ma",saveCard:t?"1":"0",...e?.length>0&&{oid:e},AutoRedirect:"true",...!a&&{MERCHANTSAFE:this.merchantSafe,MERCHANTSAFEKEY:r,MERCHANTSAFEAUTHTYPE:this.merchantSafeAuthType,MERCHANTSAFEACQUIRER:this.merchantSafeAcquirer,MERCHANTGROUPID:o.merchantGroupId}},c="",l=[];for(let t in u)l.push(t);l.sort(((t,e)=>t.toLowerCase().localeCompare(e.toLowerCase()))),l.forEach((t=>{if("hash"!==t&&"encoding"!==t){let e=u[t].replace("|","\\|").replace("\\","\\\\");c=c+e+"|"}})),c+=o.storeKey;let h=this.SHA512(c),p=vr.Buffer.from(this.pack("H*",h),"binary").toString("base64");return u.hash=p,u}static composeCmiUrl(t,e){return Qt("/fim/est3Dgate",e,{url:t})}};h(wr,"hashAlgorithm","ver3"),h(wr,"currency","504"),h(wr,"storeType","3D_PAY_HOSTING"),h(wr,"lang","fr"),h(wr,"clientId","600001236"),h(wr,"merchantSafe","MERCHANTSAFE"),h(wr,"merchantSafeAuthType","3DPAYAUTH"),h(wr,"merchantSafeAcquirer","60"),h(wr,"merchantGroupId","60013"),h(wr,"storeKey","TEST1234");var Er,xr,Sr={marjane:1,market:2,eCommerce:3},Ir=((xr=Ir||{}).public="public_api",xr.api="api",xr.user="user",xr.customer="customer",xr),Cr=((Er=Cr||{}).name="name",Er.surname="surname",Er.phone="phone",Er.type="type",Er.message="message",Er.email="email",Er),Or={Marjane:1,Market:2},Tr=(t=>(t.DRAFT="DRAFT",t.SUBMITTED="SUBMITTED",t.VALIDATED="VALIDATED",t))(Tr||{}),Pr={STATUS_OPEN_PENDING:"STATUS_OPEN_PENDING",STATUS_FINISHED:"STATUS_FINISHED",STATUS_VALIDATED:"STATUS_VALIDATED",STATUS_PREPARING:"STATUS_PREPARING",STATUS_READY:"STATUS_READY",STATUS_DELIVERING:"STATUS_DELIVERING",STATUS_DELIVERED:"STATUS_DELIVERED",STATUS_CANCELLED:"STATUS_CANCELLED",STATUS_ERROR:"STATUS_ERROR",STATUS_ERROR_PAYMENT:"STATUS_ERROR_PAYMENT",STATUS_REFUSED:"STATUS_REFUSED"},Nr={clickAndCollect:"CLICK_AND_COLLECT",delivery:"DELIVERY",deliveryExpress:"DELIVERY_EXPRESS",deliverySapress:"DELIVERY_SAPRESS",deliverySuperExpress:"DELIVERY_SUPER_EXPRESS"},Rr=(t=>(t[t.outOfStandardDeliveryBounds=2]="outOfStandardDeliveryBounds",t))(Rr||{}),Ar=(t=>(t[t.outOfLEXDeliveryBounds=2]="outOfLEXDeliveryBounds",t))(Ar||{}),Dr={client:1,product:2,delivery:3},Lr={like:1,dislike:2,ignore:3},Mr={requests:g,config:y,utils:ar}},15761:function(t,e,n){"use strict";n.d(e,{j:function(){return s}});var r=n(33989),i=n(32161);class o extends r.l{constructor(){super(),this.setup=t=>{if(!i.sk&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),()=>{window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.focused=t,t&&this.onFocus()}onFocus(){this.listeners.forEach((({listener:t})=>{t()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}}const s=new o},30819:function(t,e,n){"use strict";n.d(e,{_:function(){return r}});const r=console},89886:function(t,e,n){"use strict";n.d(e,{R:function(){return u},m:function(){return a}});var r=n(30819),i=n(30081),o=n(89643),s=n(72379);class a extends o.F{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||r._,this.observers=[],this.state=t.state||u(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter((e=>e!==t)),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){const t=()=>{var t;return this.retryer=(0,s.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},e="loading"===this.state.status;try{var n,r,i,o,a,u,c,l;if(!e){var h,p,f,d;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(h=(p=this.mutationCache.config).onMutate)?void 0:h.call(p,this.state.variables,this));const t=await(null==(f=(d=this.options).onMutate)?void 0:f.call(d,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}const s=await t();return await(null==(n=(r=this.mutationCache.config).onSuccess)?void 0:n.call(r,s,this.state.variables,this.state.context,this)),await(null==(i=(o=this.options).onSuccess)?void 0:i.call(o,s,this.state.variables,this.state.context)),await(null==(a=(u=this.mutationCache.config).onSettled)?void 0:a.call(u,s,null,this.state.variables,this.state.context,this)),await(null==(c=(l=this.options).onSettled)?void 0:c.call(l,s,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:s}),s}catch(t){try{var g,y,m,_,v,b,w,E;throw await(null==(g=(y=this.mutationCache.config).onError)?void 0:g.call(y,t,this.state.variables,this.state.context,this)),await(null==(m=(_=this.options).onError)?void 0:m.call(_,t,this.state.variables,this.state.context)),await(null==(v=(b=this.mutationCache.config).onSettled)?void 0:v.call(b,void 0,t,this.state.variables,this.state.context,this)),await(null==(w=(E=this.options).onSettled)?void 0:w.call(E,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,s.Kw)(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),i.V.batch((()=>{this.observers.forEach((e=>{e.onMutationUpdate(t)})),this.mutationCache.notify({mutation:this,type:"updated",action:t})}))}}function u(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},30081:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(32161);const i=function(){let t=[],e=0,n=t=>{t()},i=t=>{t()};const o=i=>{e?t.push(i):(0,r.A4)((()=>{n(i)}))},s=()=>{const e=t;t=[],e.length&&(0,r.A4)((()=>{i((()=>{e.forEach((t=>{n(t)}))}))}))};return{batch:t=>{let n;e++;try{n=t()}finally{e--,e||s()}return n},batchCalls:t=>(...e)=>{o((()=>{t(...e)}))},schedule:o,setNotifyFunction:t=>{n=t},setBatchNotifyFunction:t=>{i=t}}}()},96474:function(t,e,n){"use strict";n.d(e,{N:function(){return a}});var r=n(33989),i=n(32161);const o=["online","offline"];class s extends r.l{constructor(){super(),this.setup=t=>{if(!i.sk&&window.addEventListener){const e=()=>t();return o.forEach((t=>{window.addEventListener(t,e,!1)})),()=>{o.forEach((t=>{window.removeEventListener(t,e)}))}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setOnline(t):this.onOnline()}))}setOnline(t){this.online=t,t&&this.onOnline()}onOnline(){this.listeners.forEach((({listener:t})=>{t()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}}const a=new s},89643:function(t,e,n){"use strict";n.d(e,{F:function(){return i}});var r=n(32161);class i{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,r.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:r.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},72379:function(t,e,n){"use strict";n.d(e,{DV:function(){return c},Kw:function(){return a},Mz:function(){return l}});var r=n(15761),i=n(96474),o=n(32161);function s(t){return Math.min(1e3*2**t,3e4)}function a(t){return"online"!==(null!=t?t:"online")||i.N.isOnline()}class u{constructor(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}}function c(t){return t instanceof u}function l(t){let e,n,c,l=!1,h=0,p=!1;const f=new Promise(((t,e)=>{n=t,c=e})),d=()=>!r.j.isFocused()||"always"!==t.networkMode&&!i.N.isOnline(),g=r=>{p||(p=!0,null==t.onSuccess||t.onSuccess(r),null==e||e(),n(r))},y=n=>{p||(p=!0,null==t.onError||t.onError(n),null==e||e(),c(n))},m=()=>new Promise((n=>{e=t=>{const e=p||!d();return e&&n(t),e},null==t.onPause||t.onPause()})).then((()=>{e=void 0,p||null==t.onContinue||t.onContinue()})),_=()=>{if(p)return;let e;try{e=t.fn()}catch(t){e=Promise.reject(t)}Promise.resolve(e).then(g).catch((e=>{var n,r;if(p)return;const i=null!=(n=t.retry)?n:3,a=null!=(r=t.retryDelay)?r:s,u="function"==typeof a?a(h,e):a,c=!0===i||"number"==typeof i&&h<i||"function"==typeof i&&i(h,e);!l&&c?(h++,null==t.onFail||t.onFail(h,e),(0,o.Gh)(u).then((()=>{if(d())return m()})).then((()=>{l?y(e):_()}))):y(e)}))};return a(t.networkMode)?_():m().then(_),{promise:f,cancel:e=>{p||(y(new u(e)),null==t.abort||t.abort())},continue:()=>(null==e?void 0:e())?f:Promise.resolve(),cancelRetry:()=>{l=!0},continueRetry:()=>{l=!1}}}},33989:function(t,e,n){"use strict";n.d(e,{l:function(){return r}});class r{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const e={listener:t};return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},32161:function(t,e,n){"use strict";n.d(e,{A4:function(){return S},G9:function(){return I},Gh:function(){return x},I6:function(){return l},Kp:function(){return a},PN:function(){return s},Rm:function(){return f},SE:function(){return o},VS:function(){return _},X7:function(){return p},ZT:function(){return i},_v:function(){return u},_x:function(){return h},lV:function(){return c},oE:function(){return C},sk:function(){return r},to:function(){return g},yF:function(){return d}});const r="undefined"==typeof window||"Deno"in window;function i(){}function o(t,e){return"function"==typeof t?t(e):t}function s(t){return"number"==typeof t&&t>=0&&t!==1/0}function a(t,e){return Math.max(t+(e||0)-Date.now(),0)}function u(t,e,n){return E(t)?"function"==typeof e?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function c(t,e,n){return E(t)?"function"==typeof e?{...n,mutationKey:t,mutationFn:e}:{...e,mutationKey:t}:"function"==typeof t?{...e,mutationFn:t}:{...t}}function l(t,e,n){return E(t)?[{...e,queryKey:t},n]:[t||{},e]}function h(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(E(s))if(r){if(e.queryHash!==f(s,e.options))return!1}else if(!g(e.queryKey,s))return!1;if("all"!==n){const t=e.isActive();if("active"===n&&!t)return!1;if("inactive"===n&&t)return!1}return("boolean"!=typeof a||e.isStale()===a)&&((void 0===i||i===e.state.fetchStatus)&&!(o&&!o(e)))}function p(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:o}=t;if(E(o)){if(!e.options.mutationKey)return!1;if(n){if(d(e.options.mutationKey)!==d(o))return!1}else if(!g(e.options.mutationKey,o))return!1}return("boolean"!=typeof r||"loading"===e.state.status===r)&&!(i&&!i(e))}function f(t,e){return((null==e?void 0:e.queryKeyHashFn)||d)(t)}function d(t){return JSON.stringify(t,((t,e)=>b(e)?Object.keys(e).sort().reduce(((t,n)=>(t[n]=e[n],t)),{}):e))}function g(t,e){return y(t,e)}function y(t,e){return t===e||typeof t==typeof e&&(!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some((n=>!y(t[n],e[n]))))}function m(t,e){if(t===e)return t;const n=v(t)&&v(e);if(n||b(t)&&b(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),o=i.length,s=n?[]:{};let a=0;for(let r=0;r<o;r++){const o=n?r:i[r];s[o]=m(t[o],e[o]),s[o]===t[o]&&a++}return r===o&&a===r?t:s}return e}function _(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function v(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function b(t){if(!w(t))return!1;const e=t.constructor;if(void 0===e)return!0;const n=e.prototype;return!!w(n)&&!!n.hasOwnProperty("isPrototypeOf")}function w(t){return"[object Object]"===Object.prototype.toString.call(t)}function E(t){return Array.isArray(t)}function x(t){return new Promise((e=>{setTimeout(e,t)}))}function S(t){x(0).then(t)}function I(){if("function"==typeof AbortController)return new AbortController}function C(t,e,n){return null!=n.isDataEqual&&n.isDataEqual(t,e)?t:"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?m(t,e):e}},85945:function(t,e,n){"use strict";n.d(e,{NL:function(){return a},aH:function(){return u}});var r=n(67294);const i=r.createContext(void 0),o=r.createContext(!1);function s(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=i),window.ReactQueryClientContext):i)}const a=({context:t}={})=>{const e=r.useContext(s(t,r.useContext(o)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},u=({client:t,children:e,context:n,contextSharing:i=!1})=>{r.useEffect((()=>(t.mount(),()=>{t.unmount()})),[t]);const a=s(n,i);return r.createElement(o.Provider,{value:!n&&i},r.createElement(a.Provider,{value:t},e))}},48228:function(t,e,n){"use strict";n.d(e,{D:function(){return p}});var r=n(67294),i=n(464),o=n(32161),s=n(89886),a=n(30081),u=n(33989);class c extends u.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const n=this.options;this.options=this.client.defaultMutationOptions(t),(0,o.VS)(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,s.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch((()=>{var e,n,r,i;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(n=this.mutateOptions).onSuccess)||e.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var o,s,a,u;null==(o=(s=this.mutateOptions).onError)||o.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(u=this.mutateOptions).onSettled)||a.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)}))}))}}var l=n(85945),h=n(24798);function p(t,e,n){const s=(0,o.lV)(t,e,n),u=(0,l.NL)({context:s.context}),[p]=r.useState((()=>new c(u,s)));r.useEffect((()=>{p.setOptions(s)}),[p,s]);const d=(0,i.$)(r.useCallback((t=>p.subscribe(a.V.batchCalls(t))),[p]),(()=>p.getCurrentResult()),(()=>p.getCurrentResult())),g=r.useCallback(((t,e)=>{p.mutate(t,e).catch(f)}),[p]);if(d.error&&(0,h.L)(p.options.useErrorBoundary,[d.error]))throw d.error;return{...d,mutate:g,mutateAsync:d.mutate}}function f(){}},67848:function(t,e,n){"use strict";n.d(e,{a:function(){return T}});var r=n(32161),i=n(30081),o=n(15761),s=n(33989),a=n(72379);class u extends s.l{constructor(t,e){super(),this.client=t,this.options=e,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(e)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),c(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return l(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return l(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,e){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),(0,r.VS)(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const o=this.hasListeners();o&&h(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(e),!o||this.currentQuery===i&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const s=this.computeRefetchInterval();!o||this.currentQuery===i&&this.options.enabled===n.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)}getOptimisticResult(t){const e=this.client.getQueryCache().build(this.client,t);return this.createResult(e,t)}getCurrentResult(){return this.currentResult}trackResult(t){const e={};return Object.keys(t).forEach((n=>{Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),t[n])})})),e}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...e}={}){return this.fetch({...e,meta:{refetchPage:t}})}fetchOptimistic(t){const e=this.client.defaultQueryOptions(t),n=this.client.getQueryCache().build(this.client,e);return n.isFetchingOptimistic=!0,n.fetch().then((()=>this.createResult(n,e)))}fetch(t){var e;return this.executeFetch({...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(t){this.updateQuery();let e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(r.ZT)),e}updateStaleTimeout(){if(this.clearStaleTimeout(),r.sk||this.currentResult.isStale||!(0,r.PN)(this.options.staleTime))return;const t=(0,r.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),t)}computeRefetchInterval(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!r.sk&&!1!==this.options.enabled&&(0,r.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||o.j.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,e){const n=this.currentQuery,i=this.options,o=this.currentResult,s=this.currentResultState,u=this.currentResultOptions,l=t!==n,f=l?t.state:this.currentQueryInitialState,d=l?this.currentResult:this.previousQueryResult,{state:g}=t;let y,{dataUpdatedAt:m,error:_,errorUpdatedAt:v,fetchStatus:b,status:w}=g,E=!1,x=!1;if(e._optimisticResults){const r=this.hasListeners(),o=!r&&c(t,e),s=r&&h(t,n,e,i);(o||s)&&(b=(0,a.Kw)(t.options.networkMode)?"fetching":"paused",m||(w="loading")),"isRestoring"===e._optimisticResults&&(b="idle")}if(e.keepPreviousData&&!g.dataUpdatedAt&&null!=d&&d.isSuccess&&"error"!==w)y=d.data,m=d.dataUpdatedAt,w=d.status,E=!0;else if(e.select&&void 0!==g.data)if(o&&g.data===(null==s?void 0:s.data)&&e.select===this.selectFn)y=this.selectResult;else try{this.selectFn=e.select,y=e.select(g.data),y=(0,r.oE)(null==o?void 0:o.data,y,e),this.selectResult=y,this.selectError=null}catch(t){0,this.selectError=t}else y=g.data;if(void 0!==e.placeholderData&&void 0===y&&"loading"===w){let t;if(null!=o&&o.isPlaceholderData&&e.placeholderData===(null==u?void 0:u.placeholderData))t=o.data;else if(t="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.selectError=null}catch(t){0,this.selectError=t}void 0!==t&&(w="success",y=(0,r.oE)(null==o?void 0:o.data,t,e),x=!0)}this.selectError&&(_=this.selectError,y=this.selectResult,v=Date.now(),w="error");const S="fetching"===b,I="loading"===w,C="error"===w;return{status:w,fetchStatus:b,isLoading:I,isSuccess:"success"===w,isError:C,isInitialLoading:I&&S,data:y,dataUpdatedAt:m,error:_,errorUpdatedAt:v,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:S,isRefetching:S&&!I,isLoadingError:C&&0===g.dataUpdatedAt,isPaused:"paused"===b,isPlaceholderData:x,isPreviousData:E,isRefetchError:C&&0!==g.dataUpdatedAt,isStale:p(t,e),refetch:this.refetch,remove:this.remove}}updateResult(t){const e=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,r.VS)(n,e))return;this.currentResult=n;const i={cache:!0};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options;if("all"===t||!t&&!this.trackedProps.size)return!0;const n=new Set(null!=t?t:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some((t=>{const r=t;return this.currentResult[r]!==e[r]&&n.has(r)}))})()&&(i.listeners=!0),this.notify({...i,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||(0,a.DV)(t.error)||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()}notify(t){i.V.batch((()=>{var e,n,r,i;if(t.onSuccess)null==(e=(n=this.options).onSuccess)||e.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null);else if(t.onError){var o,s,a,u;null==(o=(s=this.options).onError)||o.call(s,this.currentResult.error),null==(a=(u=this.options).onSettled)||a.call(u,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)})),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function c(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&l(t,e,e.refetchOnMount)}function l(t,e,n){if(!1!==e.enabled){const r="function"==typeof n?n(t):n;return"always"===r||!1!==r&&p(t,e)}return!1}function h(t,e,n,r){return!1!==n.enabled&&(t!==e||!1===r.enabled)&&(!n.suspense||"error"!==t.state.status)&&p(t,n)}function p(t,e){return t.isStaleByTime(e.staleTime)}var f=n(67294),d=n(464);function g(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const y=f.createContext(g()),m=()=>f.useContext(y);var _=n(85945);const v=f.createContext(!1),b=()=>f.useContext(v);v.Provider;var w=n(24798);const E=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},x=t=>{f.useEffect((()=>{t.clearReset()}),[t])},S=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&(0,w.L)(n,[t.error,r]),I=t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},C=(t,e,n)=>(null==t?void 0:t.suspense)&&((t,e)=>t.isLoading&&t.isFetching&&!e)(e,n),O=(t,e,n)=>e.fetchOptimistic(t).then((({data:e})=>{null==t.onSuccess||t.onSuccess(e),null==t.onSettled||t.onSettled(e,null)})).catch((e=>{n.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}));function T(t,e,n){return function(t,e){const n=(0,_.NL)({context:t.context}),r=b(),o=m(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=i.V.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=i.V.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=i.V.batchCalls(s.onSettled)),I(s),E(s,o),x(o);const[a]=f.useState((()=>new e(n,s))),u=a.getOptimisticResult(s);if((0,d.$)(f.useCallback((t=>{const e=r?()=>{}:a.subscribe(i.V.batchCalls(t));return a.updateResult(),e}),[a,r]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),f.useEffect((()=>{a.setOptions(s,{listeners:!1})}),[s,a]),C(s,u,r))throw O(s,a,o);if(S({result:u,errorResetBoundary:o,useErrorBoundary:s.useErrorBoundary,query:a.getCurrentQuery()}))throw u.error;return s.notifyOnChangeProps?u:a.trackResult(u)}((0,r._v)(t,e,n),u)}},464:function(t,e,n){"use strict";n.d(e,{$:function(){return r}});const r=n(61688).useSyncExternalStore},24798:function(t,e,n){"use strict";function r(t,e){return"function"==typeof t?t(...e):!!t}n.d(e,{L:function(){return r}})},52587:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},50029:function(t,e,n){"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}n.d(e,{Z:function(){return i}})},59499:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},4730:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,{Z:function(){return r}})},16835:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2937);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||(0,r.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},27812:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(52587);var i=n(2937);function o(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2937:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(52587);function i(t,e){if(t){if("string"==typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[9774,179],(function(){return e(6840),e(21996)}));var n=t.O();_N_E=n}]);